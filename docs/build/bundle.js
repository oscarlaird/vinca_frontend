var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e,n,i){return t[1]&&i?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](i(e))):n.ctx}function r(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function _(){return f(" ")}function p(){return f("")}function h(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t){return""===t?null:+t}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function b(t,e,n,i){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function y(t,e){for(let n=0;n<t.options.length;n+=1){const i=t.options[n];if(i.__value===e)return void(i.selected=!0)}t.selectedIndex=-1}function w(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}class x{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){var i;this.e||(this.is_svg?this.e=(i=e.nodeName,document.createElementNS("http://www.w3.org/2000/svg",i)):this.e=u(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)l(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(s)}}let k;function C(t){k=t}function M(){if(!k)throw new Error("Function called outside component initialization");return k}function S(t){M().$$.on_mount.push(t)}function q(){const t=M();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const a=function(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,i,e),o}(e,n,{cancelable:i});return o.slice().forEach((e=>{e.call(t,a)})),!a.defaultPrevented}return!0}}const L=[],O=[],T=[],z=[],N=Promise.resolve();let j=!1;function E(t){T.push(t)}function R(t){z.push(t)}const I=new Set;let A=0;function U(){const t=k;do{for(;A<L.length;){const t=L[A];A++,C(t),P(t.$$)}for(C(null),L.length=0,A=0;O.length;)O.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];I.has(e)||(I.add(e),e())}T.length=0}while(L.length);for(;z.length;)z.pop()();j=!1,I.clear(),C(t)}function P(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const H=new Set;let B;function J(){B={r:0,c:[],p:B}}function D(){B.r||i(B.c),B=B.p}function F(t,e){t&&t.i&&(H.delete(t),t.i(e))}function G(t,e,n,i){if(t&&t.o){if(H.has(t))return;H.add(t),B.c.push((()=>{H.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}const X="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Y(t,e){G(t,1,1,(()=>{e.delete(t.key)}))}function W(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function Q(t){t&&t.c()}function V(t,n,a,c){const{fragment:r,on_mount:l,on_destroy:s,after_update:d}=t.$$;r&&r.m(n,a),c||E((()=>{const n=l.map(e).filter(o);s?s.push(...n):i(n),t.$$.on_mount=[]})),d.forEach(E)}function K(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(t,e){-1===t.$$.dirty[0]&&(L.push(t),j||(j=!0,N.then(U)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function tt(e,o,a,c,r,l,d,u=[-1]){const f=k;C(e);const _=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:o.target||f.$$.root};d&&d(_.root);let p=!1;if(_.ctx=a?a(e,o.props||{},((t,n,...i)=>{const o=i.length?i[0]:n;return _.ctx&&r(_.ctx[t],_.ctx[t]=o)&&(!_.skip_bound&&_.bound[t]&&_.bound[t](o),p&&Z(e,t)),n})):[],_.update(),p=!0,i(_.before_update),_.fragment=!!c&&c(_.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);_.fragment&&_.fragment.l(t),t.forEach(s)}else _.fragment&&_.fragment.c();o.intro&&F(e.$$.fragment),V(e,o.target,o.anchor,o.customElement),U()}C(f)}class et{$destroy(){K(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let nt=()=>Math.floor(Date.now()/1e3);const it=60*(new Date).getTimezoneOffset();let ot=()=>(nt()-it)/86400;function at(){const t=ot();return{id:0,front_text:"",back_text:"",visibility:"visible",card_type:"basic",scheduler:"basic",tags:"",merit:6,create_date:t,due_date:t,last_review_date:t,last_edit_date:t,review_seconds:0,edit_seconds:0,total_seconds:0,front_image_id:0,back_image_id:0,front_audio_id:0,back_audio_id:0}}function ct(){return ct={...at(),front_text:"loading..."}}let rt="api.vinca.study/";function lt(){return String(Math.floor(1e15*Math.random()))}function st(){return{method:"POST",mode:"cors",headers:{"content-type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("access_token")}}}async function dt(t,e=0){const n=new URL(rt+"commit_card"),i={seconds:e,date:ot()},o={card:t,metadata:i};let a=st();a.body=JSON.stringify(o),fetch(n,a).then(ft).then((e=>{const n=e.json();for(var i in n)t[i]=n[i]})).catch(ut)}function ut(t){alert("Internet Problem: "+t.message)}function ft(t){if(t.ok)return t;throw new Error(t.status+":  "+t.statusText)}async function _t(t,e=!0){let n=st();n.body=JSON.stringify({content:t,base64:e});var i=new URL(rt+"upload_media");const o=await fetch(i,n).then(ft).catch(ut),a=await o.json();return await a.media_id}async function pt(t){new Headers;var e=st();e.method="GET";return await fetch(t,e)}async function ht(t){const e=rt+"get_media?media_id="+t,n=await pt(e),i=await n.blob();return URL.createObjectURL(i)}async function gt(t){const e=rt+"get_occlusion_data?media_id="+t,n=await pt(e),i=await n.json();return JSON.parse(i)}function mt(t){let e,n,i,o,a,d,p,m,$,y,w;const x=t[6].default,k=function(t,e,n,i){if(t){const o=c(t,e,n,i);return t[0](o)}}(x,t,t[5],null);return{c(){e=u("label"),k&&k.c(),n=u("br"),i=_(),o=u("input"),p=_(),m=f(t[1]),g(o,"type","checkbox"),o.indeterminate=a=!1===t[0],o.checked=d=null!=t[0],g(e,"class","svelte-1ad6k3b"),b(e,"color",t[2],!1),b(e,"display","inline",!1)},m(a,c){l(a,e,c),k&&k.m(e,null),r(e,n),r(e,i),r(e,o),r(e,p),r(e,m),$=!0,y||(w=h(o,"click",t[3]),y=!0)},p(t,[n]){k&&k.p&&(!$||32&n)&&function(t,e,n,i,o,a){if(o){const r=c(e,n,i,a);t.p(r,o)}}(k,x,t,t[5],$?function(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|o[i];return t}return e.dirty|o}return e.dirty}(x,t[5],n,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[5]),null),(!$||1&n&&a!==(a=!1===t[0]))&&(o.indeterminate=a),(!$||1&n&&d!==(d=null!=t[0]))&&(o.checked=d),(!$||2&n)&&v(m,t[1]),4&n&&b(e,"color",t[2],!1)},i(t){$||(F(k,t),$=!0)},o(t){G(k,t),$=!1},d(t){t&&s(e),k&&k.d(t),y=!1,w()}}}function vt(t,e,n){let i,o,{$$slots:a={},$$scope:c}=e,{state:r=null}=e,l=[null,!0,!1],s=l.indexOf(r);return t.$$set=t=>{"state"in t&&n(0,r=t.state),"$$scope"in t&&n(5,c=t.$$scope)},t.$$.update=()=>{16&t.$$.dirty&&n(0,r=l[s]),1&t.$$.dirty&&n(2,i={null:"black",true:"darkgreen",false:"red"}[r]),1&t.$$.dirty&&n(1,o={null:"any",true:"yes",false:"no"}[r])},[r,o,i,function(){n(4,s=(s+1)%l.length)},s,c,a]}class $t extends et{constructor(t){super(),tt(this,t,vt,mt,a,{state:0})}}function bt(e){let n,i,o,a,c,d,p,m;return{c(){n=u("button"),i=u("div"),i.innerHTML='Review <span style="font-size: 100%;">üïÆ</span>',o=_(),a=u("div"),c=f(e[0]),d=f(" cards due"),g(i,"id","review_text"),g(i,"class","svelte-in18e9"),g(a,"id","due_count"),g(a,"class","svelte-in18e9"),g(n,"type","button"),g(n,"class","svelte-in18e9")},m(t,s){l(t,n,s),r(n,i),r(n,o),r(n,a),r(a,c),r(a,d),p||(m=h(n,"click",e[1]),p=!0)},p(t,[e]){1&e&&v(c,t[0])},i:t,o:t,d(t){t&&s(n),p=!1,m()}}}function yt(t,e,n){let i;const o=q();let{due_count:a=0}=e;return t.$$set=t=>{"due_count"in t&&n(2,a=t.due_count)},t.$$.update=()=>{4&t.$$.dirty&&n(0,i=a+(a>=50?"+":""))},[i,function(){o("click")},a]}class wt extends et{constructor(t){super(),tt(this,t,yt,bt,a,{due_count:2})}}function xt(e){let n,i,o,a,c,d,p,m;return{c(){n=u("button"),i=u("div"),i.innerHTML='Create <span style="font-size: 100%;">‚úç</span>',o=_(),a=u("div"),c=f(e[0]),d=f(" created today"),g(i,"id","create_text"),g(i,"class","svelte-1sqwcsp"),g(a,"id","due_count"),g(a,"class","svelte-1sqwcsp"),g(n,"type","button"),g(n,"class","svelte-1sqwcsp")},m(t,s){l(t,n,s),r(n,i),r(n,o),r(n,a),r(a,c),r(a,d),p||(m=h(n,"click",e[1]),p=!0)},p(t,[e]){1&e&&v(c,t[0])},i:t,o:t,d(t){t&&s(n),p=!1,m()}}}function kt(t,e,n){const i=q();let{created_count:o}=e;return t.$$set=t=>{"created_count"in t&&n(0,o=t.created_count)},[o,function(){i("click")}]}class Ct extends et{constructor(t){super(),tt(this,t,kt,xt,a,{created_count:0})}}function Mt(e){let n,o,a,c,d,p,m,$,y,w,k,C,M,S,q,L,O=(e[0].front_text?e[0].front_text:"(blank)")+"";return{c(){n=u("div"),o=u("button"),o.textContent="‚úï",a=f("¬†\n    "),c=u("button"),c.textContent="üëÅ",d=f("¬†\n    "),p=u("button"),p.textContent="‚úç",m=f("¬†\n    "),$=new x(!1),y=_(),w=u("span"),k=f("due¬†"),C=_(),M=u("span"),S=f(O),g(o,"type","button"),g(o,"class","button svelte-1kgg240"),b(o,"color","darkred",!1),g(c,"type","button"),g(c,"class","button svelte-1kgg240"),g(p,"type","button"),g(p,"class","button svelte-1kgg240"),$.a=y,g(w,"class","front_text svelte-1kgg240"),b(w,"color","purple"),b(w,"display",e[2]),b(w,"font-size","14px",!1),g(M,"class","front_text svelte-1kgg240"),b(M,"text-decoration",e[3]),g(n,"class","card_container svelte-1kgg240")},m(t,i){l(t,n,i),r(n,o),r(n,a),r(n,c),r(n,d),r(n,p),r(n,m),$.m(e[1],n),r(n,y),r(n,w),r(w,k),r(n,C),r(n,M),r(M,S),q||(L=[h(o,"click",e[4]),h(c,"click",e[5]),h(p,"click",e[6])],q=!0)},p(t,[e]){2&e&&$.p(t[1]),4&e&&b(w,"display",t[2]),1&e&&O!==(O=(t[0].front_text?t[0].front_text:"(blank)")+"")&&v(S,O),8&e&&b(M,"text-decoration",t[3])},i:t,o:t,d(t){t&&s(n),q=!1,i(L)}}}function St(t,e,n){let i,o,a,c;let{card:r}=e,{card_edited_alert:l}=e,{state:s}=e,{info:d}=e,u=ot();return t.$$set=t=>{"card"in t&&n(0,r=t.card),"card_edited_alert"in t&&n(7,l=t.card_edited_alert),"state"in t&&n(8,s=t.state),"info"in t&&n(9,d=t.info)},t.$$.update=()=>{1&t.$$.dirty&&n(3,i="deleted"===r.visibility?"line-through":""),1&t.$$.dirty&&n(10,o=r.due_date<u),1025&t.$$.dirty&&n(2,a=o&&"visible"===r.visibility?"inline":"none"),512&t.$$.dirty&&n(1,c=function(t){switch(t){case"":default:return"";case"create_date":return"Created <b><mark>"+Math.trunc(u-r[t])+"</mark></b> days ago";case"due_date":return"Due in <b><mark>"+Math.trunc(r[t]-u)+"</mark></b> days";case"last_review_date":return"Last reviewed <b><mark>"+Math.trunc(u-r[t])+"</mark></b> days ago";case"last_edit_date":return"Last edited <b><mark>"+Math.trunc(u-r[t])+"</mark></b> days ago";case"review_seconds":return"Spent <b><mark>"+Math.floor(r[t])+"</mark></b> seconds reviewing";case"edit_seconds":return"Spent <b><mark>"+Math.floor(r[t])+"</mark></b> seconds editing";case"total_seconds":return"Spent <b><mark>"+Math.floor(r[t])+"</mark></b> seconds";case"card_type":case"merit":return"<b><mark>"+r[t]+"</mark></b>";case"tags":return"tags: <b><mark>"+r[t]+"</mark></b>"}}(d))},[r,c,a,i,async function(){n(0,r.visibility="visible"===r.visibility?"deleted":"visible",r),dt(r),n(7,l=!0)},function(){n(8,s.card_to_preview=r,s),n(8,s.preview_mode=!0,s)},function(){n(8,s.card_to_edit=r,s),n(8,s.edit_mode=!0,s)},l,s,d,o]}class qt extends et{constructor(t){super(),tt(this,t,St,Mt,a,{card:0,card_edited_alert:7,state:8,info:9})}}function Lt(e){let n,i,o,a,c,d;return E(e[4]),{c(){n=u("div"),i=u("span"),i.textContent="?",o=_(),a=u("span"),g(i,"class","question_mark svelte-1d9etfy"),g(a,"class","tooltiptext svelte-1d9etfy"),g(n,"class","tooltip svelte-1d9etfy")},m(t,s){l(t,n,s),r(n,i),r(n,o),r(n,a),a.innerHTML=e[0],e[5](a),e[6](n),c||(d=h(window,"resize",e[4]),c=!0)},p(t,[e]){1&e&&(a.innerHTML=t[0])},i:t,o:t,d(t){t&&s(n),e[5](null),e[6](null),c=!1,d()}}}function Ot(t,e,n){let i,o,a,{text:c}=e;return S((()=>{const t=i.getBoundingClientRect(),e=t.left,c=a-t.right;n(2,o.style["margin-left"]=e<120?"-"+e+"px":c<120?"-"+(240-c)+"px":"-120px",o)})),t.$$set=t=>{"text"in t&&n(0,c=t.text)},[c,i,o,a,function(){n(3,a=window.innerWidth)},function(t){O[t?"unshift":"push"]((()=>{o=t,n(2,o)}))},function(t){O[t?"unshift":"push"]((()=>{i=t,n(1,i)}))}]}class Tt extends et{constructor(t){super(),tt(this,t,Ot,Lt,a,{text:0})}}function zt(t,e,n){const i=t.slice();return i[18]=e[n],i}function Nt(t){let e;return{c(){e=f("due:")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function jt(t){let e;return{c(){e=f("new:")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function Et(t){let e;return{c(){e=f("deleted:")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function Rt(e){let n,i,o,a,c,d;return o=new Tt({props:{text:"Purged cards will never be seen again.<br><br>(However, vinca never destroys data and it is possible to manually recover purged cards from the database)."}}),{c(){n=u("button"),i=f("purge\n                "),Q(o.$$.fragment),g(n,"type","button"),g(n,"class","svelte-zgasv9"),b(n,"border-radius","4px",!1),b(n,"color","red",!1)},m(t,s){l(t,n,s),r(n,i),V(o,n,null),e[11](n),a=!0,c||(d=h(n,"click",e[5]),c=!0)},p:t,i(t){a||(F(o.$$.fragment,t),a=!0)},o(t){G(o.$$.fragment,t),a=!1},d(t){t&&s(n),K(o),e[11](null),c=!1,d()}}}function It(t){let e;return{c(){e=f("images:")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function At(t){let e;return{c(){e=f("audio:")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function Ut(t){let e,n,i,o=t[18]+"";return{c(){e=u("option"),n=f(o),e.__value=i=t[18],e.value=e.__value},m(t,i){l(t,e,i),r(e,n)},p(t,a){8&a&&o!==(o=t[18]+"")&&v(n,o),8&a&&i!==(i=t[18])&&(e.__value=i,e.value=e.__value)},d(t){t&&s(e)}}}function Pt(t){let e,n,o,a,c,p,m,v,$,b,w,x,k,C,M,S,q,L,T,z,N,j,I,A,U,P,H,B,X,Y,Z,tt,et,nt,it,ot,at,ct,rt,lt,st,dt,ut,ft,_t,pt,ht,gt,mt,vt,bt,yt,wt,xt,kt,Ct,Mt,St,qt;function Lt(e){t[8](e)}let Ot={$$slots:{default:[Nt]},$$scope:{ctx:t}};function Tt(e){t[9](e)}void 0!==t[1].due&&(Ot.state=t[1].due),o=new $t({props:Ot}),O.push((()=>W(o,"state",Lt)));let Pt={$$slots:{default:[jt]},$$scope:{ctx:t}};function Ht(e){t[10](e)}void 0!==t[1].new&&(Pt.state=t[1].new),p=new $t({props:Pt}),O.push((()=>W(p,"state",Tt)));let Bt={$$slots:{default:[Et]},$$scope:{ctx:t}};void 0!==t[1].deleted&&(Bt.state=t[1].deleted),$=new $t({props:Bt}),O.push((()=>W($,"state",Ht)));let Jt=t[1].deleted&&Rt(t);function Dt(e){t[12](e)}let Ft={$$slots:{default:[It]},$$scope:{ctx:t}};function Gt(e){t[13](e)}void 0!==t[1].images&&(Ft.state=t[1].images),k=new $t({props:Ft}),O.push((()=>W(k,"state",Dt)));let Xt={$$slots:{default:[At]},$$scope:{ctx:t}};void 0!==t[1].audio&&(Xt.state=t[1].audio),S=new $t({props:Xt}),O.push((()=>W(S,"state",Gt)));let Yt=t[3],Wt=[];for(let e=0;e<Yt.length;e+=1)Wt[e]=Ut(zt(t,Yt,e));return{c(){e=u("div"),n=u("div"),Q(o.$$.fragment),c=_(),Q(p.$$.fragment),v=_(),Q($.$$.fragment),w=_(),Jt&&Jt.c(),x=_(),Q(k.$$.fragment),M=_(),Q(S.$$.fragment),L=_(),T=u("div"),z=u("span"),N=f("Card type:\n"),j=u("select"),I=u("option"),A=u("option"),A.textContent="basic",U=u("option"),U.textContent="verses",P=u("option"),P.textContent="occlusion",H=_(),B=u("span"),X=f("Info: \n"),Y=u("select"),Z=u("option"),tt=u("option"),tt.textContent="created",et=u("option"),et.textContent="due date",nt=u("option"),nt.textContent="last review",it=u("option"),it.textContent="editing time",ot=u("option"),ot.textContent="review time",at=u("option"),at.textContent="total time",ct=u("option"),ct.textContent="card type",rt=u("option"),rt.textContent="tags",lt=u("option"),lt.textContent="merit",st=_(),dt=u("div"),ut=u("span"),ft=f("Sort: \n"),_t=u("select"),pt=u("option"),pt.textContent="recent",ht=u("option"),ht.textContent="old",gt=u("option"),gt.textContent="overdue",mt=u("option"),mt.textContent="total time",vt=u("option"),vt.textContent="random",bt=u("option"),bt.textContent="meritorious",yt=_(),wt=u("span"),xt=f("Tag: \n"),kt=u("select"),Ct=u("option");for(let t=0;t<Wt.length;t+=1)Wt[t].c();g(n,"class","tristates svelte-zgasv9"),I.__value="",I.value=I.__value,A.__value="basic",A.value=A.__value,U.__value="verses",U.value=U.__value,P.__value="occlusion",P.value=P.__value,g(j,"class","svelte-zgasv9"),void 0===t[1].card_type&&E((()=>t[14].call(j))),Z.__value="",Z.value=Z.__value,tt.__value="create_date",tt.value=tt.__value,et.__value="due_date",et.value=et.__value,nt.__value="last_review_date",nt.value=nt.__value,it.__value="edit_seconds",it.value=it.__value,ot.__value="review_seconds",ot.value=ot.__value,at.__value="total_seconds",at.value=at.__value,ct.__value="card_type",ct.value=ct.__value,rt.__value="tags",rt.value=rt.__value,lt.__value="merit",lt.value=lt.__value,g(Y,"class","svelte-zgasv9"),void 0===t[2]&&E((()=>t[15].call(Y))),g(T,"class","selectors svelte-zgasv9"),pt.__value="recent",pt.value=pt.__value,ht.__value="old",ht.value=ht.__value,gt.__value="overdue",gt.value=gt.__value,mt.__value="total time",mt.value=mt.__value,vt.__value="random",vt.value=vt.__value,bt.__value="meritorious",bt.value=bt.__value,g(_t,"class","svelte-zgasv9"),void 0===t[0]&&E((()=>t[16].call(_t))),Ct.__value="",Ct.value=Ct.__value,g(kt,"class","svelte-zgasv9"),void 0===t[1].tag&&E((()=>t[17].call(kt))),g(dt,"class","selectors svelte-zgasv9"),g(e,"class","master svelte-zgasv9")},m(i,a){l(i,e,a),r(e,n),V(o,n,null),r(n,c),V(p,n,null),r(n,v),V($,n,null),r(n,w),Jt&&Jt.m(n,null),r(n,x),V(k,n,null),r(n,M),V(S,n,null),r(e,L),r(e,T),r(T,z),r(z,N),r(z,j),r(j,I),r(j,A),r(j,U),r(j,P),y(j,t[1].card_type),r(T,H),r(T,B),r(B,X),r(B,Y),r(Y,Z),r(Y,tt),r(Y,et),r(Y,nt),r(Y,it),r(Y,ot),r(Y,at),r(Y,ct),r(Y,rt),r(Y,lt),y(Y,t[2]),r(e,st),r(e,dt),r(dt,ut),r(ut,ft),r(ut,_t),r(_t,pt),r(_t,ht),r(_t,gt),r(_t,mt),r(_t,vt),r(_t,bt),y(_t,t[0]),r(dt,yt),r(dt,wt),r(wt,xt),r(wt,kt),r(kt,Ct);for(let t=0;t<Wt.length;t+=1)Wt[t].m(kt,null);y(kt,t[1].tag),Mt=!0,St||(qt=[h(j,"change",t[14]),h(Y,"change",t[15]),h(_t,"change",t[16]),h(kt,"change",t[17])],St=!0)},p(t,[e]){const i={};2097152&e&&(i.$$scope={dirty:e,ctx:t}),!a&&2&e&&(a=!0,i.state=t[1].due,R((()=>a=!1))),o.$set(i);const c={};2097152&e&&(c.$$scope={dirty:e,ctx:t}),!m&&2&e&&(m=!0,c.state=t[1].new,R((()=>m=!1))),p.$set(c);const r={};2097152&e&&(r.$$scope={dirty:e,ctx:t}),!b&&2&e&&(b=!0,r.state=t[1].deleted,R((()=>b=!1))),$.$set(r),t[1].deleted?Jt?(Jt.p(t,e),2&e&&F(Jt,1)):(Jt=Rt(t),Jt.c(),F(Jt,1),Jt.m(n,x)):Jt&&(J(),G(Jt,1,1,(()=>{Jt=null})),D());const l={};2097152&e&&(l.$$scope={dirty:e,ctx:t}),!C&&2&e&&(C=!0,l.state=t[1].images,R((()=>C=!1))),k.$set(l);const s={};if(2097152&e&&(s.$$scope={dirty:e,ctx:t}),!q&&2&e&&(q=!0,s.state=t[1].audio,R((()=>q=!1))),S.$set(s),2&e&&y(j,t[1].card_type),4&e&&y(Y,t[2]),1&e&&y(_t,t[0]),8&e){let n;for(Yt=t[3],n=0;n<Yt.length;n+=1){const i=zt(t,Yt,n);Wt[n]?Wt[n].p(i,e):(Wt[n]=Ut(i),Wt[n].c(),Wt[n].m(kt,null))}for(;n<Wt.length;n+=1)Wt[n].d(1);Wt.length=Yt.length}2&e&&y(kt,t[1].tag)},i(t){Mt||(F(o.$$.fragment,t),F(p.$$.fragment,t),F($.$$.fragment,t),F(Jt),F(k.$$.fragment,t),F(S.$$.fragment,t),Mt=!0)},o(t){G(o.$$.fragment,t),G(p.$$.fragment,t),G($.$$.fragment,t),G(Jt),G(k.$$.fragment,t),G(S.$$.fragment,t),Mt=!1},d(t){t&&s(e),K(o),K(p),K($),Jt&&Jt.d(),K(k),K(S),d(Wt,t),St=!1,i(qt)}}}function Ht(t,e,n){let i,{filters:o}=e,{info:a}=e,{collection_tags:c}=e,{sort:r}=e,{card_edited_alert:l}=e,{filtered_cards:s}=e;return t.$$set=t=>{"filters"in t&&n(1,o=t.filters),"info"in t&&n(2,a=t.info),"collection_tags"in t&&n(3,c=t.collection_tags),"sort"in t&&n(0,r=t.sort),"card_edited_alert"in t&&n(7,l=t.card_edited_alert),"filtered_cards"in t&&n(6,s=t.filtered_cards)},t.$$.update=()=>{if(1&t.$$.dirty)switch(r){case"old":n(2,a="create_date");break;case"overdue":n(2,a="due_date");break;case"total time":n(2,a="total_seconds");break;case"meritorious":n(2,a="merit");break;default:n(2,a=null)}},[r,o,a,c,i,function(){confirm("Purge deleted cards?")&&(!async function(t){const e=new URL(rt+"purge");var n=st();n.body=JSON.stringify(t),await fetch(e,n)}(o),n(4,i.style.display="none",i),n(6,s=[]))},s,l,function(e){t.$$.not_equal(o.due,e)&&(o.due=e,n(1,o))},function(e){t.$$.not_equal(o.new,e)&&(o.new=e,n(1,o))},function(e){t.$$.not_equal(o.deleted,e)&&(o.deleted=e,n(1,o))},function(t){O[t?"unshift":"push"]((()=>{i=t,n(4,i)}))},function(e){t.$$.not_equal(o.images,e)&&(o.images=e,n(1,o))},function(e){t.$$.not_equal(o.audio,e)&&(o.audio=e,n(1,o))},function(){o.card_type=w(this),n(1,o)},function(){a=w(this),n(2,a),n(0,r)},function(){r=w(this),n(0,r)},function(){o.tag=w(this),n(1,o)}]}class Bt extends et{constructor(t){super(),tt(this,t,Ht,Pt,a,{filters:1,info:2,collection_tags:3,sort:0,card_edited_alert:7,filtered_cards:6})}}function Jt(t){let e,n,o,a,c,d,p,m,y,w,x,k,C,M,S,q,L,T,z,N;function j(e){t[11](e)}function E(e){t[12](e)}function I(e){t[13](e)}function A(e){t[14](e)}function U(e){t[15](e)}let P={};return void 0!==t[4]&&(P.filtered_cards=t[4]),void 0!==t[2]&&(P.sort=t[2]),void 0!==t[3]&&(P.collection_tags=t[3]),void 0!==t[1]&&(P.info=t[1]),void 0!==t[0]&&(P.filters=t[0]),k=new Bt({props:P}),O.push((()=>W(k,"filtered_cards",j))),O.push((()=>W(k,"sort",E))),O.push((()=>W(k,"collection_tags",I))),O.push((()=>W(k,"info",A))),O.push((()=>W(k,"filters",U))),{c(){e=u("center"),n=f("Search: "),o=u("input"),a=_(),c=u("button"),d=f(t[5]),p=f(" Filters "),m=u("b"),y=f(t[6]),w=_(),x=u("div"),Q(k.$$.fragment),g(o,"type","search"),g(c,"type","button"),b(x,"display",t[7],!1)},m(i,s){l(i,e,s),r(e,n),r(e,o),$(o,t[0].search),r(e,a),r(e,c),r(c,d),r(c,p),r(c,m),r(m,y),l(i,w,s),l(i,x,s),V(k,x,null),T=!0,z||(N=[h(o,"input",t[10]),h(c,"click",t[8])],z=!0)},p(t,[e]){1&e&&$(o,t[0].search),(!T||32&e)&&v(d,t[5]),(!T||64&e)&&v(y,t[6]);const n={};!C&&16&e&&(C=!0,n.filtered_cards=t[4],R((()=>C=!1))),!M&&4&e&&(M=!0,n.sort=t[2],R((()=>M=!1))),!S&&8&e&&(S=!0,n.collection_tags=t[3],R((()=>S=!1))),!q&&2&e&&(q=!0,n.info=t[1],R((()=>q=!1))),!L&&1&e&&(L=!0,n.filters=t[0],R((()=>L=!1))),k.$set(n),128&e&&b(x,"display",t[7],!1)},i(t){T||(F(k.$$.fragment,t),T=!0)},o(t){G(k.$$.fragment,t),T=!1},d(t){t&&s(e),t&&s(w),t&&s(x),K(k),z=!1,i(N)}}}function Dt(t,e,n){let i,o,a,{filters:c}=e,{info:r}=e,{sort:l}=e,{collection_tags:s}=e,{filtered_cards:d}=e,u=!1;return t.$$set=t=>{"filters"in t&&n(0,c=t.filters),"info"in t&&n(1,r=t.info),"sort"in t&&n(2,l=t.sort),"collection_tags"in t&&n(3,s=t.collection_tags),"filtered_cards"in t&&n(4,d=t.filtered_cards)},t.$$.update=()=>{512&t.$$.dirty&&n(7,i=u?"block":"none"),512&t.$$.dirty&&n(6,o=u?"-":"+"),512&t.$$.dirty&&n(5,a=u?"Less":"More")},[c,r,l,s,d,a,o,i,()=>{n(9,u=!u)},u,function(){c.search=this.value,n(0,c)},function(t){d=t,n(4,d)},function(t){l=t,n(2,l)},function(t){s=t,n(3,s)},function(t){r=t,n(1,r)},function(t){c=t,n(0,c)}]}class Ft extends et{constructor(t){super(),tt(this,t,Dt,Jt,a,{filters:0,info:1,sort:2,collection_tags:3,filtered_cards:4})}}const{window:Gt}=X;function Xt(t,e,n){const i=t.slice();return i[35]=e[n],i}function Yt(t,e,n){const i=t.slice();return i[38]=e[n],i}function Wt(t){let e,n,o,a,c,r,d,p;return{c(){e=f("Hello, "),n=f(t[0]),o=_(),a=u("a"),a.textContent="sign out",c=f(" or\n        "),r=u("a"),r.textContent="switch account",g(a,"class","login_button svelte-sxvern"),g(r,"class","login_button svelte-sxvern")},m(i,s){l(i,e,s),l(i,n,s),l(i,o,s),l(i,a,s),l(i,c,s),l(i,r,s),d||(p=[h(a,"click",t[17]),h(r,"click",t[18])],d=!0)},p(t,e){1&e[0]&&v(n,t[0])},d(t){t&&s(e),t&&s(n),t&&s(o),t&&s(a),t&&s(c),t&&s(r),d=!1,i(p)}}}function Qt(e){let n,i,o,a;return{c(){n=f("Welcome, guest\n        "),i=u("button"),i.textContent="login / register",g(i,"class","login_button svelte-sxvern"),g(i,"type","button")},m(t,c){l(t,n,c),l(t,i,c),o||(a=h(i,"click",e[16]),o=!0)},p:t,d(t){t&&s(n),t&&s(i),o=!1,a()}}}function Vt(t,e){let n,i,o,a,c,r;function d(t){e[29](t)}function u(t){e[30](t)}function f(t){e[31](t)}let _={card:e[38]};return void 0!==e[7]&&(_.card_edited_alert=e[7]),void 0!==e[5]&&(_.info=e[5]),void 0!==e[1]&&(_.state=e[1]),i=new qt({props:_}),O.push((()=>W(i,"card_edited_alert",d))),O.push((()=>W(i,"info",u))),O.push((()=>W(i,"state",f))),{key:t,first:null,c(){n=p(),Q(i.$$.fragment),this.first=n},m(t,e){l(t,n,e),V(i,t,e),r=!0},p(t,n){e=t;const r={};4100&n[0]&&(r.card=e[38]),!o&&128&n[0]&&(o=!0,r.card_edited_alert=e[7],R((()=>o=!1))),!a&&32&n[0]&&(a=!0,r.info=e[5],R((()=>a=!1))),!c&&2&n[0]&&(c=!0,r.state=e[1],R((()=>c=!1))),i.$set(r)},i(t){r||(F(i.$$.fragment,t),r=!0)},o(t){G(i.$$.fragment,t),r=!1},d(t){t&&s(n),K(i,t)}}}function Kt(t){let e,n,i,o=[],a=new Map;function c(...e){return t[28](t[35],...e)}let d=t[2].filter(c);const f=t=>t[38].id;for(let e=0;e<d.length;e+=1){let n=Yt(t,d,e),i=f(n);a.set(i,o[e]=Vt(i,n))}return{c(){e=u("div");for(let t=0;t<o.length;t+=1)o[t].c();n=_(),g(e,"class","column")},m(t,a){l(t,e,a);for(let t=0;t<o.length;t+=1)o[t].m(e,null);r(e,n),i=!0},p(i,r){t=i,4262&r[0]&&(d=t[2].filter(c),J(),o=function(t,e,n,i,o,a,c,r,l,s,d,u){let f=t.length,_=a.length,p=f;const h={};for(;p--;)h[t[p].key]=p;const g=[],m=new Map,v=new Map;for(p=_;p--;){const t=u(o,a,p),r=n(t);let l=c.get(r);l?i&&l.p(t,e):(l=s(r,t),l.c()),m.set(r,g[p]=l),r in h&&v.set(r,Math.abs(p-h[r]))}const $=new Set,b=new Set;function y(t){F(t,1),t.m(r,d),c.set(t.key,t),d=t.first,_--}for(;f&&_;){const e=g[_-1],n=t[f-1],i=e.key,o=n.key;e===n?(d=e.first,f--,_--):m.has(o)?!c.has(i)||$.has(i)?y(e):b.has(o)?f--:v.get(i)>v.get(o)?(b.add(i),y(e)):($.add(o),f--):(l(n,c),f--)}for(;f--;){const e=t[f];m.has(e.key)||l(e,c)}for(;_;)y(g[_-1]);return g}(o,r,f,1,t,d,a,e,Y,Vt,n,Yt),D())},i(t){if(!i){for(let t=0;t<d.length;t+=1)F(o[t]);i=!0}},o(t){for(let t=0;t<o.length;t+=1)G(o[t]);i=!1},d(t){t&&s(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Zt(t){let e,n,i,o,a,c,f,p,m,v,$,y,w,x,k,C,M,S,q,L,T,z,N,j,I;function A(t,e){return"guest"===t[0]?Qt:Wt}E(t[15]);let U=A(t),P=U(t);function H(e){t[19](e)}let B={};function X(e){t[21](e)}void 0!==t[4]&&(B.due_count=t[4]),f=new wt({props:B}),O.push((()=>W(f,"due_count",H))),f.$on("click",t[20]);let Y={};function Z(e){t[22](e)}function tt(e){t[23](e)}function et(e){t[24](e)}function nt(e){t[25](e)}function it(e){t[26](e)}function ot(e){t[27](e)}void 0!==t[6]&&(Y.created_count=t[6]),v=new Ct({props:Y}),O.push((()=>W(v,"created_count",X))),v.$on("click",t[13]);let at={};void 0!==t[2]&&(at.filtered_cards=t[2]),void 0!==t[10]&&(at.search=t[10]),void 0!==t[9]&&(at.sort=t[9]),void 0!==t[3]&&(at.filters=t[3]),void 0!==t[5]&&(at.info=t[5]),void 0!==t[8]&&(at.collection_tags=t[8]),x=new Ft({props:at}),O.push((()=>W(x,"filtered_cards",Z))),O.push((()=>W(x,"search",tt))),O.push((()=>W(x,"sort",et))),O.push((()=>W(x,"filters",nt))),O.push((()=>W(x,"info",it))),O.push((()=>W(x,"collection_tags",ot)));let ct=[...Array(t[12]).keys()],rt=[];for(let e=0;e<ct.length;e+=1)rt[e]=Kt(Xt(t,ct,e));const lt=t=>G(rt[t],1,1,(()=>{rt[t]=null}));return{c(){e=u("body"),n=u("div"),P.c(),i=_(),o=u("a"),o.textContent="Links",a=_(),c=u("div"),Q(f.$$.fragment),m=_(),Q(v.$$.fragment),y=_(),w=u("div"),Q(x.$$.fragment),T=_(),z=u("div");for(let t=0;t<rt.length;t+=1)rt[t].c();b(o,"float","right"),b(o,"position","relative"),g(c,"id","major_buttons"),g(c,"class","svelte-sxvern"),g(n,"class","top svelte-sxvern"),b(w,"margin","20px",!1),g(z,"class","columns svelte-sxvern")},m(s,d){l(s,e,d),r(e,n),P.m(n,null),r(n,i),r(n,o),r(n,a),r(n,c),V(f,c,null),r(c,m),V(v,c,null),r(e,y),r(e,w),V(x,w,null),r(e,T),r(e,z);for(let t=0;t<rt.length;t+=1)rt[t].m(z,null);N=!0,j||(I=h(Gt,"resize",t[15]),j=!0)},p(t,e){U===(U=A(t))&&P?P.p(t,e):(P.d(1),P=U(t),P&&(P.c(),P.m(n,i)));const o={};!p&&16&e[0]&&(p=!0,o.due_count=t[4],R((()=>p=!1))),f.$set(o);const a={};!$&&64&e[0]&&($=!0,a.created_count=t[6],R((()=>$=!1))),v.$set(a);const c={};if(!k&&4&e[0]&&(k=!0,c.filtered_cards=t[2],R((()=>k=!1))),!C&&1024&e[0]&&(C=!0,c.search=t[10],R((()=>C=!1))),!M&&512&e[0]&&(M=!0,c.sort=t[9],R((()=>M=!1))),!S&&8&e[0]&&(S=!0,c.filters=t[3],R((()=>S=!1))),!q&&32&e[0]&&(q=!0,c.info=t[5],R((()=>q=!1))),!L&&256&e[0]&&(L=!0,c.collection_tags=t[8],R((()=>L=!1))),x.$set(c),4262&e[0]){let n;for(ct=[...Array(t[12]).keys()],n=0;n<ct.length;n+=1){const i=Xt(t,ct,n);rt[n]?(rt[n].p(i,e),F(rt[n],1)):(rt[n]=Kt(i),rt[n].c(),F(rt[n],1),rt[n].m(z,null))}for(J(),n=ct.length;n<rt.length;n+=1)lt(n);D()}},i(t){if(!N){F(f.$$.fragment,t),F(v.$$.fragment,t),F(x.$$.fragment,t);for(let t=0;t<ct.length;t+=1)F(rt[t]);N=!0}},o(t){G(f.$$.fragment,t),G(v.$$.fragment,t),G(x.$$.fragment,t),rt=rt.filter(Boolean);for(let t=0;t<rt.length;t+=1)G(rt[t]);N=!1},d(t){t&&s(e),P.d(),K(f),K(v),K(x),d(rt,t),j=!1,I()}}}function te(t,e,n){let i,o,{username:a}=e,{state:c}=e,{filtered_cards:r}=e,{cached_cards:l}=e,{filters:s}=e,{due_count:d}=e,{info:u}=e,{created_count:f}=e,{card_edited_alert:_}=e,{collection_tags:p}=e,{sort:h}=e,{search:g}=e;return t.$$set=t=>{"username"in t&&n(0,a=t.username),"state"in t&&n(1,c=t.state),"filtered_cards"in t&&n(2,r=t.filtered_cards),"cached_cards"in t&&n(14,l=t.cached_cards),"filters"in t&&n(3,s=t.filters),"due_count"in t&&n(4,d=t.due_count),"info"in t&&n(5,u=t.info),"created_count"in t&&n(6,f=t.created_count),"card_edited_alert"in t&&n(7,_=t.card_edited_alert),"collection_tags"in t&&n(8,p=t.collection_tags),"sort"in t&&n(9,h=t.sort),"search"in t&&n(10,g=t.search)},t.$$.update=()=>{2048&t.$$.dirty[0]&&n(12,i=Math.floor(o/450)||1)},[a,c,r,s,d,u,f,_,p,h,g,o,i,function(){let t={...at()};n(1,c.card_to_edit=t,c),n(1,c.edit_mode=!0,c)},l,function(){n(11,o=Gt.innerWidth)},()=>{n(0,a="none")},()=>{n(0,a="guest"),window.localStorage.clear()},()=>{n(0,a="none")},function(t){d=t,n(4,d)},()=>{n(1,c.reviewing=!0,c)},function(t){f=t,n(6,f)},function(t){r=t,n(2,r)},function(t){g=t,n(10,g)},function(t){h=t,n(9,h)},function(t){s=t,n(3,s)},function(t){u=t,n(5,u)},function(t){p=t,n(8,p)},(t,e,n,o)=>n%i===t,function(t){_=t,n(7,_)},function(t){u=t,n(5,u)},function(t){c=t,n(1,c)}]}class ee extends et{constructor(t){super(),tt(this,t,te,Zt,a,{username:0,state:1,filtered_cards:2,cached_cards:14,filters:3,due_count:4,info:5,created_count:6,card_edited_alert:7,collection_tags:8,sort:9,search:10},null,[-1,-1])}}function ne(e){let n,i,o;return{c(){n=u("textarea"),g(n,"class","svelte-o80sq3")},m(t,a){l(t,n,a),$(n,e[0]),e[4](n),i||(o=h(n,"input",e[3]),i=!0)},p(t,[e]){1&e&&$(n,t[0])},i:t,o:t,d(t){t&&s(n),e[4](null),i=!1,o()}}}function ie(t,e,n){let i,{value:o=null}=e,{placeholder:a}=e;return t.$$set=t=>{"value"in t&&n(0,o=t.value),"placeholder"in t&&n(2,a=t.placeholder)},t.$$.update=()=>{6&t.$$.dirty&&i&&n(1,i.placeholder=a,i)},[o,i,a,function(){o=this.value,n(0,o)},function(t){O[t?"unshift":"push"]((()=>{i=t,n(1,i),n(2,a)}))}]}class oe extends et{constructor(t){super(),tt(this,t,ie,ne,a,{value:0,placeholder:2})}}function ae(e){let n,o,a,c,d,p,m,$,y,w,x,k;return{c(){n=u("input"),o=_(),a=u("button"),c=f("¬†\n\t‚ô¨\n\t¬†\n\t"),d=u("span"),d.textContent="‚Üë",p=f("\n\t¬†\n\tüï™\n\t"),m=u("br"),$=_(),y=u("span"),w=f(e[1]),g(n,"type","file"),g(n,"accept",".mp3,.wav,.ogg"),b(n,"display","none"),b(d,"font-size","32px"),b(y,"font-size","16px"),g(a,"class","svelte-1ur4qxs")},m(t,i){l(t,n,i),e[2](n),l(t,o,i),l(t,a,i),r(a,c),r(a,d),r(a,p),r(a,m),r(a,$),r(a,y),r(y,w),x||(k=[h(n,"change",e[3]),h(a,"click",e[4])],x=!0)},p(t,[e]){2&e&&v(w,t[1])},i:t,o:t,d(t){t&&s(n),e[2](null),t&&s(o),t&&s(a),x=!1,i(k)}}}function ce(t,e,n){let i,o="Choose audio";return[i,o,function(t){O[t?"unshift":"push"]((()=>{i=t,n(0,i)}))},function(){o=this.value,n(1,o)},()=>{i.click()}]}class re extends et{constructor(t){super(),tt(this,t,ce,ae,a,{})}}function le(e){let n,o,a,c,d,p,m,$,y,w,x,k,C=(e[0]?"N/A":e[2])+"";return{c(){n=u("input"),o=_(),a=u("button"),c=f("¬†\n\tüñº\n\t¬†\n\t"),d=u("span"),d.textContent="‚Üë",p=f("\n\t¬†\n\tüì∑\n\t"),m=u("br"),$=_(),y=u("span"),w=f(C),g(n,"type","file"),g(n,"accept","image/*"),b(n,"display","none"),b(d,"font-size","32px"),b(y,"font-size","16px"),a.disabled=e[0],g(a,"class","svelte-12cjody"),b(a,"background-color",e[0]?"lightgray":"white",!1)},m(t,i){l(t,n,i),e[6](n),l(t,o,i),l(t,a,i),r(a,c),r(a,d),r(a,p),r(a,m),r(a,$),r(a,y),r(y,w),e[7](a),x||(k=[h(n,"change",e[4]),h(a,"click",e[8])],x=!0)},p(t,[e]){5&e&&C!==(C=(t[0]?"N/A":t[2])+"")&&v(w,C),1&e&&(a.disabled=t[0]),1&e&&b(a,"background-color",t[0]?"lightgray":"white",!1)},i:t,o:t,d(t){t&&s(n),e[6](null),t&&s(o),t&&s(a),e[7](null),x=!1,i(k)}}}function se(t,e,n){let i,o,{image_id:a}=e,c=null,{disabled:r=!1}=e,l="Choose Image";S((async()=>{if(0!=a){const t=await ht(a);n(3,o.style["background-image"]="url("+t+")",o)}}));return t.$$set=t=>{"image_id"in t&&n(5,a=t.image_id),"disabled"in t&&n(0,r=t.disabled)},[r,i,l,o,function(){let t=i.files[0];n(2,l=t.name);const e=new FileReader;e.readAsDataURL(t),e.onload=async()=>{let t=await _t(e.result);n(5,a=await t),c="url("+e.result+")",n(3,o.style["background-image"]=c,o)}},a,function(t){O[t?"unshift":"push"]((()=>{i=t,n(1,i)}))},function(t){O[t?"unshift":"push"]((()=>{o=t,n(3,o)}))},()=>{i.click()}]}class de extends et{constructor(t){super(),tt(this,t,se,le,a,{image_id:5,disabled:0})}}function ue(t){let e,n,i,o,a,c,d,f,p,h,m;function v(e){t[7](e)}function $(e){t[8](e)}let b={};function y(e){t[9](e)}void 0!==t[0]&&(b.value=t[0]),void 0!==t[2]&&(b.placeholder=t[2]),n=new oe({props:b}),O.push((()=>W(n,"value",v))),O.push((()=>W(n,"placeholder",$))),d=new re({});let w={disabled:t[3]};return void 0!==t[1]&&(w.image_id=t[1]),p=new de({props:w}),O.push((()=>W(p,"image_id",y))),{c(){e=u("div"),Q(n.$$.fragment),a=_(),c=u("div"),Q(d.$$.fragment),f=_(),Q(p.$$.fragment),g(c,"id","media"),g(c,"class","svelte-uhg411"),g(e,"id","main"),g(e,"class","svelte-uhg411")},m(t,i){l(t,e,i),V(n,e,null),r(e,a),r(e,c),V(d,c,null),r(c,f),V(p,c,null),m=!0},p(t,[e]){const a={};!i&&1&e&&(i=!0,a.value=t[0],R((()=>i=!1))),!o&&4&e&&(o=!0,a.placeholder=t[2],R((()=>o=!1))),n.$set(a);const c={};8&e&&(c.disabled=t[3]),!h&&2&e&&(h=!0,c.image_id=t[1],R((()=>h=!1))),p.$set(c)},i(t){m||(F(n.$$.fragment,t),F(d.$$.fragment,t),F(p.$$.fragment,t),m=!0)},o(t){G(n.$$.fragment,t),G(d.$$.fragment,t),G(p.$$.fragment,t),m=!1},d(t){t&&s(e),K(n),K(d),K(p)}}}function fe(t,e,n){let{text:i}=e,{image_id:o}=e,{audio_id:a}=e,{audio_file:c}=e,{image_file:r}=e,{placeholder:l}=e,{image_picker_disabled:s}=e;return t.$$set=t=>{"text"in t&&n(0,i=t.text),"image_id"in t&&n(1,o=t.image_id),"audio_id"in t&&n(4,a=t.audio_id),"audio_file"in t&&n(5,c=t.audio_file),"image_file"in t&&n(6,r=t.image_file),"placeholder"in t&&n(2,l=t.placeholder),"image_picker_disabled"in t&&n(3,s=t.image_picker_disabled)},[i,o,l,s,a,c,r,function(t){i=t,n(0,i)},function(t){l=t,n(2,l)},function(t){o=t,n(1,o)}]}class _e extends et{constructor(t){super(),tt(this,t,fe,ue,a,{text:0,image_id:1,audio_id:4,audio_file:5,image_file:6,placeholder:2,image_picker_disabled:3})}}function pe(t,e,n){const i=t.slice();return i[10]=e[n],i[11]=e,i[12]=n,i}function he(t){let e,n,i,o,a,c,d,p=t[10]+"";function m(){t[8].call(n,t[10])}return{c(){e=u("label"),n=u("input"),i=_(),o=f(p),a=_(),g(n,"type","checkbox"),g(e,"class","svelte-f8t21t")},m(s,u){l(s,e,u),r(e,n),n.checked=t[1][t[10]],r(e,i),r(e,o),r(e,a),c||(d=h(n,"change",m),c=!0)},p(e,i){t=e,2&i&&(n.checked=t[1][t[10]]),2&i&&p!==(p=t[10]+"")&&v(o,p)},d(t){t&&s(e),c=!1,d()}}}function ge(t){let e,n=t[10].includes(t[2]),i=n&&he(t);return{c(){i&&i.c(),e=p()},m(t,n){i&&i.m(t,n),l(t,e,n)},p(t,o){6&o&&(n=t[10].includes(t[2])),n?i?i.p(t,o):(i=he(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},d(t){i&&i.d(t),t&&s(e)}}}function me(e){let n,o,a,c,p,m,b,y,w,x,k,C=e[0].tags+"",M=Object.keys(e[1]).reverse(),S=[];for(let t=0;t<M.length;t+=1)S[t]=ge(pe(e,M,t));return{c(){n=u("div"),o=u("p"),a=u("b"),c=f(C),p=_(),m=u("button"),m.textContent="+ new tag",b=f("¬†\n  "),y=u("input"),w=_();for(let t=0;t<S.length;t+=1)S[t].c();g(o,"id","tags_list"),g(o,"class","svelte-f8t21t"),g(m,"type","button"),g(y,"type","search"),g(y,"placeholder","search"),g(n,"id","tags_bar"),g(n,"class","svelte-f8t21t")},m(t,i){l(t,n,i),r(n,o),r(o,a),r(a,c),r(n,p),r(n,m),r(n,b),r(n,y),$(y,e[2]),r(n,w);for(let t=0;t<S.length;t+=1)S[t].m(n,null);x||(k=[h(m,"click",e[6]),h(y,"input",e[7])],x=!0)},p(t,[e]){if(1&e&&C!==(C=t[0].tags+"")&&v(c,C),4&e&&$(y,t[2]),6&e){let i;for(M=Object.keys(t[1]).reverse(),i=0;i<M.length;i+=1){const o=pe(t,M,i);S[i]?S[i].p(o,e):(S[i]=ge(o),S[i].c(),S[i].m(n,null))}for(;i<S.length;i+=1)S[i].d(1);S.length=M.length}},i:t,o:t,d(t){t&&s(n),d(S,t),x=!1,i(k)}}}function ve(t,e,n){let i,{card:o}=e,{collection_tags:a}=e;function c(t){n(4,a=[t,...a]),n(1,r[t]=!0,r)}let r=a.reduce(((t,e)=>(t[e]=!1,t)),new Map);const l=""===o.tags?[]:o.tags.split(",");for(tag in l)r[tag]=!0;let s="";return t.$$set=t=>{"card"in t&&n(0,o=t.card),"collection_tags"in t&&n(4,a=t.collection_tags)},t.$$.update=()=>{2&t.$$.dirty&&n(5,i=Object.entries(r).filter((t=>t[1])).map((t=>t[0]))),32&t.$$.dirty&&n(0,o.tags=i.join(", "),o)},[o,r,s,c,a,i,()=>{c(prompt("new tag"))},function(){s=this.value,n(2,s)},function(t){r[t]=this.checked,n(1,r)}]}class $e extends et{constructor(t){super(),tt(this,t,ve,me,a,{card:0,collection_tags:4})}}function be(t,e,n){const i=t.slice();return i[9]=e[n],i}function ye(t){let e,n,i,o,a,c,d,p,m=t[9]+"";return{c(){e=u("label"),n=u("input"),a=_(),c=f(m),g(n,"type","radio"),g(n,"name","card_type"),n.__value=i=t[9],n.value=n.__value,n.checked=o=t[0].card_type===t[9],g(n,"class","svelte-aj94bp"),t[6][0].push(n),g(e,"class","svelte-aj94bp")},m(i,o){l(i,e,o),r(e,n),n.checked=n.__value===t[0].card_type,r(e,a),r(e,c),d||(p=h(n,"change",t[5]),d=!0)},p(t,e){1&e&&o!==(o=t[0].card_type===t[9])&&(n.checked=o),1&e&&(n.checked=n.__value===t[0].card_type)},d(i){i&&s(e),t[6][0].splice(t[6][0].indexOf(n),1),d=!1,p()}}}function we(t){let e,n,o,a,c,p,v,y,w,x,k,C,M,S,q,L;n=new Tt({props:{text:"<b>Basic</b>:  class question and answer card <br><br>\n                <b>Verses</b>: tests you line by line (useful for poetry and oratory) <br><br>\n                <b>Occlusion</b>: generate several cards by covering up parts of a map or diagram (useful for geography or anatomy)"}});let O=t[4],T=[];for(let e=0;e<O.length;e+=1)T[e]=ye(be(t,O,e));return k=new Tt({props:{text:"Quantify in minutes the worth of remembering this knowledge.<br><br>\n        This is difficult.<br><br>\n        This lets you see if the time spent studying a card has been worthwhile. <br><br>\n        It also lets you sort your cards to find the best ones."}}),{c(){e=u("center"),Q(n.$$.fragment),o=_();for(let t=0;t<T.length;t+=1)T[t].c();a=_(),c=u("button"),c.textContent="cancel",p=_(),v=u("button"),v.textContent="preview",y=_(),w=u("button"),w.textContent="save",x=_(),Q(k.$$.fragment),C=f("\nMerit\n"),M=u("input"),g(c,"class","submit_button svelte-aj94bp"),g(v,"class","submit_button svelte-aj94bp"),g(w,"class","submit_button svelte-aj94bp"),g(M,"type","number"),g(M,"min","1"),g(M,"max","60"),b(M,"width","50px",!1)},m(i,s){l(i,e,s),V(n,e,null),r(e,o);for(let t=0;t<T.length;t+=1)T[t].m(e,null);r(e,a),r(e,c),r(e,p),r(e,v),r(e,y),r(e,w),r(e,x),V(k,e,null),r(e,C),r(e,M),$(M,t[0].merit),S=!0,q||(L=[h(c,"click",t[2]),h(v,"click",t[3]),h(w,"click",t[1]),h(M,"input",t[7])],q=!0)},p(t,[n]){if(17&n){let i;for(O=t[4],i=0;i<O.length;i+=1){const o=be(t,O,i);T[i]?T[i].p(o,n):(T[i]=ye(o),T[i].c(),T[i].m(e,a))}for(;i<T.length;i+=1)T[i].d(1);T.length=O.length}1&n&&m(M.value)!==t[0].merit&&$(M,t[0].merit)},i(t){S||(F(n.$$.fragment,t),F(k.$$.fragment,t),S=!0)},o(t){G(n.$$.fragment,t),G(k.$$.fragment,t),S=!1},d(t){t&&s(e),K(n),d(T,t),K(k),q=!1,i(L)}}}function xe(t,e,n){let{card:i}=e;const o=q();return t.$$set=t=>{"card"in t&&n(0,i=t.card)},[i,()=>{o("save")},()=>{o("cancel")},()=>{o("preview")},["basic","verses","occlusion"],function(){i.card_type=this.__value,n(0,i)},[[]],function(){i.merit=m(this.value),n(0,i)}]}class ke extends et{constructor(t){super(),tt(this,t,xe,we,a,{card:0})}}function Ce(t){let e,n,o,a,c,d,p,m,$,y=t[0].width>45&&t[0].height>20?"‚ú£ Move":"";return{c(){e=u("div"),n=u("button"),o=f(y),a=_(),c=u("button"),c.textContent="‚úó Del",d=_(),p=u("button"),p.textContent="‚§°",g(n,"id","moveButton"),g(n,"type","button"),g(n,"class","svelte-xqaxsl"),g(c,"id","deleteButton"),g(c,"type","button"),g(c,"class","svelte-xqaxsl"),g(p,"id","resizeButton"),g(p,"type","button"),g(p,"class","svelte-xqaxsl"),b(e,"position","absolute",!1),b(e,"top",t[0].top+"px",!1),b(e,"left",t[0].left+"px",!1),b(e,"width",t[0].width+"px",!1),b(e,"height",t[0].height+"px",!1)},m(i,s){l(i,e,s),r(e,n),r(n,o),r(e,a),r(e,c),r(e,d),r(e,p),m||($=[h(n,"mousedown",t[2]),h(n,"click",Se),h(c,"click",t[3]),h(p,"mousedown",t[1]),h(p,"click",Se)],m=!0)},p(t,n){1&n&&y!==(y=t[0].width>45&&t[0].height>20?"‚ú£ Move":"")&&v(o,y),1&n&&b(e,"top",t[0].top+"px",!1),1&n&&b(e,"left",t[0].left+"px",!1),1&n&&b(e,"width",t[0].width+"px",!1),1&n&&b(e,"height",t[0].height+"px",!1)},d(t){t&&s(e),m=!1,i($)}}}function Me(e){let n,i=!e[0].deleted&&Ce(e);return{c(){i&&i.c(),n=p()},m(t,e){i&&i.m(t,e),l(t,n,e)},p(t,[e]){t[0].deleted?i&&(i.d(1),i=null):i?i.p(t,e):(i=Ce(t),i.c(),i.m(n.parentNode,n))},i:t,o:t,d(t){i&&i.d(t),t&&s(n)}}}function Se(t){t.stopPropagation()}function qe(t,e,n){let i,o,{self:a={deleted:!1,id:0,left:100,top:100,width:200,height:100}}=e;return t.$$set=t=>{"self"in t&&n(0,a=t.self)},[a,function(t){i={x:t.clientX,y:t.clientY},o={...a},document.onmousemove=t=>{n(0,a.width=o.width+(t.clientX-i.x),a),n(0,a.height=o.height+(t.clientY-i.y),a)},document.onmouseup=t=>{document.onmousemove=null}},function(t){i={x:t.clientX,y:t.clientY},o={...a},document.onmousemove=t=>{n(0,a.left=o.left+(t.clientX-i.x),a),n(0,a.top=o.top+(t.clientY-i.y),a)},document.onmouseup=t=>{document.onmousemove=null}},function(t){(0==a.id||confirm("This will trigger a card to be deleted on save."))&&(n(0,a.deleted=!0,a),Se(t))}]}class Le extends et{constructor(t){super(),tt(this,t,qe,Me,a,{self:0})}}function Oe(t,e,n){const i=t.slice();return i[19]=e[n],i[20]=e,i[21]=n,i}function Te(t){let e,n,i;function o(e){t[12](e,t[19],t[20],t[21])}let a={};return void 0!==t[19]&&(a.self=t[19]),e=new Le({props:a}),O.push((()=>W(e,"self",o))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),i=!0},p(i,o){t=i;const a={};!n&&1&o&&(n=!0,a.self=t[19],R((()=>n=!1))),e.$set(a)},i(t){i||(F(e.$$.fragment,t),i=!0)},o(t){G(e.$$.fragment,t),i=!1},d(t){K(e,t)}}}function ze(t){let e;return{c(){e=f("Click to Upload an Image")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function Ne(t){let e,n,a,c,p,m,v,$,y,w,x,k,C,M,S,q,L,O,T,z,N=t[0].rectangles,j=[];for(let e=0;e<N.length;e+=1)j[e]=Te(Oe(t,N,e));const E=t=>G(j[t],1,1,(()=>{j[t]=null}));let R=!t[1]&&ze();return{c(){e=u("input"),n=_(),a=u("center"),c=u("button"),c.textContent="+ new rectangle",p=_(),m=u("label"),v=u("input"),$=f(" Hide All"),y=_(),w=u("label"),x=u("input"),k=f(" Hide One"),C=_(),M=u("button");for(let t=0;t<j.length;t+=1)j[t].c();S=_(),q=u("button"),q.textContent="‚§° Resize",L=_(),R&&R.c(),g(e,"type","file"),g(e,"accept","image/*"),b(e,"display","none"),g(c,"type","button"),g(v,"type","radio"),v.__value=!0,v.value=v.__value,g(v,"name","hide"),t[10][0].push(v),b(m,"display","inline",!1),g(x,"type","radio"),x.__value=!1,x.value=x.__value,g(x,"name","hide"),t[10][0].push(x),b(w,"display","inline",!1),g(q,"class","imageSizer svelte-o9mhat"),g(M,"class","occlusionImage svelte-o9mhat"),b(M,"width",t[0].box.width+"px",!1),b(M,"height",t[0].box.height+"px",!1)},m(i,s){l(i,e,s),t[8](e),l(i,n,s),l(i,a,s),r(a,c),r(a,p),r(a,m),r(m,v),v.checked=v.__value===t[0].hide_all,r(m,$),r(a,y),r(a,w),r(w,x),x.checked=x.__value===t[0].hide_all,r(w,k),l(i,C,s),l(i,M,s);for(let t=0;t<j.length;t+=1)j[t].m(M,null);r(M,S),r(M,q),t[13](q),r(M,L),R&&R.m(M,null),t[14](M),O=!0,T||(z=[h(e,"change",t[6]),h(c,"click",t[7]),h(v,"change",t[9]),h(x,"change",t[11]),h(q,"mousedown",t[5]),h(q,"click",je),h(M,"click",(function(){o(t[3].click())&&t[3].click().apply(this,arguments)}))],T=!0)},p(e,[n]){if(t=e,1&n&&(v.checked=v.__value===t[0].hide_all),1&n&&(x.checked=x.__value===t[0].hide_all),1&n){let e;for(N=t[0].rectangles,e=0;e<N.length;e+=1){const i=Oe(t,N,e);j[e]?(j[e].p(i,n),F(j[e],1)):(j[e]=Te(i),j[e].c(),F(j[e],1),j[e].m(M,S))}for(J(),e=N.length;e<j.length;e+=1)E(e);D()}t[1]?R&&(R.d(1),R=null):R||(R=ze(),R.c(),R.m(M,null)),1&n&&b(M,"width",t[0].box.width+"px",!1),1&n&&b(M,"height",t[0].box.height+"px",!1)},i(t){if(!O){for(let t=0;t<N.length;t+=1)F(j[t]);O=!0}},o(t){j=j.filter(Boolean);for(let t=0;t<j.length;t+=1)G(j[t]);O=!1},d(o){o&&s(e),t[8](null),o&&s(n),o&&s(a),t[10][0].splice(t[10][0].indexOf(v),1),t[10][0].splice(t[10][0].indexOf(x),1),o&&s(C),o&&s(M),d(j,o),t[13](null),R&&R.d(),t[14](null),T=!1,i(z)}}}const je=t=>{t.stopPropagation()};function Ee(t,e,n){let i,o,a,c,r,{data:l}=e,{image_id:s}=e,d=null;S((async()=>{0!=s&&(d=await ht(s),n(2,i.style["background-image"]="url("+d+")",i))}));const u={id:0,top:50,left:50,height:100,width:200,deleted:!1};return t.$$set=t=>{"data"in t&&n(0,l=t.data),"image_id"in t&&n(1,s=t.image_id)},[l,s,i,o,a,function(t){c={x:t.clientX,y:t.clientY},r={width:l.box.width,height:l.box.height},document.onmousemove=t=>{n(0,l.box.width=r.width+(t.clientX-c.x),l),n(0,l.box.height=r.height+(t.clientY-c.y),l)},document.onmouseup=t=>{document.onmousemove=null}},function(){let t=o.files[0];const e=new FileReader;e.readAsDataURL(t),e.onload=async()=>{let t=await _t(e.result);n(1,s=await t),d="url("+e.result+")",n(2,i.style["background-image"]=d,i)}},function(){var t={...u};l.rectangles.push(t),n(0,l)},function(t){O[t?"unshift":"push"]((()=>{o=t,n(3,o)}))},function(){l.hide_all=this.__value,n(0,l)},[[]],function(){l.hide_all=this.__value,n(0,l)},function(t,e,i,o){i[o]=t,n(0,l)},function(t){O[t?"unshift":"push"]((()=>{a=t,n(4,a)}))},function(t){O[t?"unshift":"push"]((()=>{i=t,n(2,i)}))}]}class Re extends et{constructor(t){super(),tt(this,t,Ee,Ne,a,{data:0,image_id:1})}}function Ie(t){let e,n,i,o,a,c;function r(e){t[12](e)}function d(e){t[13](e)}let f={};return void 0!==t[2]&&(f.data=t[2]),void 0!==t[1].front_image_id&&(f.image_id=t[1].front_image_id),e=new Re({props:f}),O.push((()=>W(e,"data",r))),O.push((()=>W(e,"image_id",d))),{c(){Q(e.$$.fragment),o=_(),a=u("hr")},m(t,n){V(e,t,n),l(t,o,n),l(t,a,n),c=!0},p(t,o){const a={};!n&&4&o&&(n=!0,a.data=t[2],R((()=>n=!1))),!i&&2&o&&(i=!0,a.image_id=t[1].front_image_id,R((()=>i=!1))),e.$set(a)},i(t){c||(F(e.$$.fragment,t),c=!0)},o(t){G(e.$$.fragment,t),c=!1},d(t){K(e,t),t&&s(o),t&&s(a)}}}function Ae(t){let e,n,i,o,a,c;function r(e){t[16](e)}function d(e){t[17](e)}let f={image_picker_disabled:"occlusion"===t[1].card_type,placeholder:t[3].back};return void 0!==t[1].back_text&&(f.text=t[1].back_text),void 0!==t[1].back_image_id&&(f.image_id=t[1].back_image_id),e=new _e({props:f}),O.push((()=>W(e,"text",r))),O.push((()=>W(e,"image_id",d))),{c(){Q(e.$$.fragment),o=_(),a=u("hr")},m(t,n){V(e,t,n),l(t,o,n),l(t,a,n),c=!0},p(t,o){const a={};2&o&&(a.image_picker_disabled="occlusion"===t[1].card_type),8&o&&(a.placeholder=t[3].back),!n&&2&o&&(n=!0,a.text=t[1].back_text,R((()=>n=!1))),!i&&2&o&&(i=!0,a.image_id=t[1].back_image_id,R((()=>i=!1))),e.$set(a)},i(t){c||(F(e.$$.fragment,t),c=!0)},o(t){G(e.$$.fragment,t),c=!1},d(t){K(e,t),t&&s(o),t&&s(a)}}}function Ue(t){let e,n,i,o,a,c,d,f,p,h,g,m,v,$,b,y,w,x;function k(e){t[11](e)}let C={};void 0!==t[1]&&(C.card=t[1]),n=new ke({props:C}),O.push((()=>W(n,"card",k))),n.$on("preview",t[4]),n.$on("cancel",t[5]),n.$on("save",t[6]);let M="occlusion"===t[1].card_type&&Ie(t);function S(e){t[14](e)}function q(e){t[15](e)}let L={image_picker_disabled:"occlusion"===t[1].card_type,placeholder:t[3].front};void 0!==t[1].front_text&&(L.text=t[1].front_text),void 0!==t[1].front_image_id&&(L.image_id=t[1].front_image_id),f=new _e({props:L}),O.push((()=>W(f,"text",S))),O.push((()=>W(f,"image_id",q)));let T="verses"!=t[1].card_type&&Ae(t);function z(e){t[18](e)}function N(e){t[19](e)}let j={};return void 0!==t[0]&&(j.collection_tags=t[0]),void 0!==t[1]&&(j.card=t[1]),b=new $e({props:j}),O.push((()=>W(b,"collection_tags",z))),O.push((()=>W(b,"card",N))),{c(){e=u("body"),Q(n.$$.fragment),o=_(),a=u("hr"),c=_(),M&&M.c(),d=_(),Q(f.$$.fragment),g=_(),m=u("hr"),v=_(),T&&T.c(),$=_(),Q(b.$$.fragment)},m(t,i){l(t,e,i),V(n,e,null),r(e,o),r(e,a),r(e,c),M&&M.m(e,null),r(e,d),V(f,e,null),r(e,g),r(e,m),r(e,v),T&&T.m(e,null),r(e,$),V(b,e,null),x=!0},p(t,[o]){const a={};!i&&2&o&&(i=!0,a.card=t[1],R((()=>i=!1))),n.$set(a),"occlusion"===t[1].card_type?M?(M.p(t,o),2&o&&F(M,1)):(M=Ie(t),M.c(),F(M,1),M.m(e,d)):M&&(J(),G(M,1,1,(()=>{M=null})),D());const c={};2&o&&(c.image_picker_disabled="occlusion"===t[1].card_type),8&o&&(c.placeholder=t[3].front),!p&&2&o&&(p=!0,c.text=t[1].front_text,R((()=>p=!1))),!h&&2&o&&(h=!0,c.image_id=t[1].front_image_id,R((()=>h=!1))),f.$set(c),"verses"!=t[1].card_type?T?(T.p(t,o),2&o&&F(T,1)):(T=Ae(t),T.c(),F(T,1),T.m(e,$)):T&&(J(),G(T,1,1,(()=>{T=null})),D());const r={};!y&&1&o&&(y=!0,r.collection_tags=t[0],R((()=>y=!1))),!w&&2&o&&(w=!0,r.card=t[1],R((()=>w=!1))),b.$set(r)},i(t){x||(F(n.$$.fragment,t),F(M),F(f.$$.fragment,t),F(T),F(b.$$.fragment,t),x=!0)},o(t){G(n.$$.fragment,t),G(M),G(f.$$.fragment,t),G(T),G(b.$$.fragment,t),x=!1},d(t){t&&s(e),K(n),M&&M.d(),K(f),T&&T.d(),K(b)}}}function Pe(t,e,n){let i,{collection_tags:o}=e,{card:a}=e,{card_edited_alert:c}=e,{state:r}=e,{cached_cards:l}=e,s={box:{width:500,height:500},hide_all:!0,rectangles:[]};S((async()=>{0!=a.id&&"occlusion"===a.card_type&&n(2,s=await gt(a.back_image_id))}));let d={...a};const u=nt();function f(){n(9,r.edit_mode=!1,r),n(9,r.card_to_edit=null,r),n(8,c=!0)}return t.$$set=t=>{"collection_tags"in t&&n(0,o=t.collection_tags),"card"in t&&n(7,a=t.card),"card_edited_alert"in t&&n(8,c=t.card_edited_alert),"state"in t&&n(9,r=t.state),"cached_cards"in t&&n(10,l=t.cached_cards)},t.$$.update=()=>{var e;2&t.$$.dirty&&n(3,(e=d.card_type,i="basic"===e?{front:"Question",back:"Answer"}:"verses"===e?{front:"To be or not to be, that is the question:  \nWhether 'tis nobler in the mind to suffer  \nThe slings and arrows of outrageous fortune\nOr to take arms against a sea of troubles  \nAnd by opposing, end them.",back:""}:{front:"- Text entered when the cards are created will be shared between all cards. \n- Afterwards each card's front and back text can be edited individually.",back:""}))},[o,d,s,i,function(){n(9,r.preview_mode=!0,r),n(9,r.card_to_preview=d,r)},function(){0===a.id&&n(7,a.visibility="purged",a),n(9,r.edit_mode=!1,r)},async function(){var t=nt()-u;for(var e in n(9,r.review_start=r.review_start+t,r),d)n(7,a[e]=d[e],a);if("occlusion"===a.card_type){t/=s.rectangles.length;for(let e of s.rectangles){if(e.deleted&&0!=e.id){dt({id:e.id,visibility:"purged"});l.find((t=>t.id===e.id)).visibility="purged"}if(0===e.id&&!e.deleted){let n={...a};n.id=lt(),e.id=n.id,l.push(n),dt(n,t)}}const e=await _t(JSON.stringify(s),!1);for(let t of s.rectangles){dt({id:t.id,back_image_id:e});l.find((e=>e.id===t.id)).back_image_id=e}f()}else"basic"!==a.card_type&&"verses"!==a.card_type||(0===a.id&&(n(7,a.id=lt(),a),l.push(a),n(10,l)),dt(a,t),f())},a,c,r,l,function(t){d=t,n(1,d)},function(t){s=t,n(2,s)},function(e){t.$$.not_equal(d.front_image_id,e)&&(d.front_image_id=e,n(1,d))},function(e){t.$$.not_equal(d.front_text,e)&&(d.front_text=e,n(1,d))},function(e){t.$$.not_equal(d.front_image_id,e)&&(d.front_image_id=e,n(1,d))},function(e){t.$$.not_equal(d.back_text,e)&&(d.back_text=e,n(1,d))},function(e){t.$$.not_equal(d.back_image_id,e)&&(d.back_image_id=e,n(1,d))},function(t){o=t,n(0,o)},function(t){d=t,n(1,d)}]}class He extends et{constructor(t){super(),tt(this,t,Pe,Ue,a,{collection_tags:0,card:7,card_edited_alert:8,state:9,cached_cards:10})}}function Be(t,e,n){const i=t.slice();return i[5]=e[n],i}function Je(e){let n;return{c(){n=f("Loading...")},m(t,e){l(t,n,e)},p:t,d(t){t&&s(n)}}}function De(t){let e,n=t[2].rectangles,i=[];for(let e=0;e<n.length;e+=1)i[e]=Ge(Be(t,n,e));return{c(){e=u("div");for(let t=0;t<i.length;t+=1)i[t].c();g(e,"id","occludedImage"),g(e,"class","svelte-1i7whgz"),b(e,"width",t[2].box.width+"px",!1),b(e,"height",t[2].box.height+"px",!1)},m(n,o){l(n,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);t[4](e)},p(t,o){if(7&o){let a;for(n=t[2].rectangles,a=0;a<n.length;a+=1){const c=Be(t,n,a);i[a]?i[a].p(c,o):(i[a]=Ge(c),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}4&o&&b(e,"width",t[2].box.width+"px",!1),4&o&&b(e,"height",t[2].box.height+"px",!1)},d(n){n&&s(e),d(i,n),t[4](null)}}}function Fe(t){let e;return{c(){e=u("div"),b(e,"position","absolute"),b(e,"top",t[5].top+"px"),b(e,"left",t[5].left+"px"),b(e,"width",t[5].width+"px"),b(e,"height",t[5].height+"px"),b(e,"background-color",t[0].id===t[5].id?"transparent":t[2].hide_all?"rgba(70,70,70,1)":"rgba(70,70,70,0.2)"),b(e,"border","5px solid "+(t[0].id!==t[5].id?"black":t[1]?"green":"red"))},m(t,n){l(t,e,n)},p(t,n){4&n&&b(e,"top",t[5].top+"px"),4&n&&b(e,"left",t[5].left+"px"),4&n&&b(e,"width",t[5].width+"px"),4&n&&b(e,"height",t[5].height+"px"),5&n&&b(e,"background-color",t[0].id===t[5].id?"transparent":t[2].hide_all?"rgba(70,70,70,1)":"rgba(70,70,70,0.2)"),7&n&&b(e,"border","5px solid "+(t[0].id!==t[5].id?"black":t[1]?"green":"red"))},d(t){t&&s(e)}}}function Ge(t){let e,n=!t[5].deleted&&Fe(t);return{c(){n&&n.c(),e=p()},m(t,i){n&&n.m(t,i),l(t,e,i)},p(t,i){t[5].deleted?n&&(n.d(1),n=null):n?n.p(t,i):(n=Fe(t),n.c(),n.m(e.parentNode,e))},d(t){n&&n.d(t),t&&s(e)}}}function Xe(e){let n;function i(t,e){return t[2]?De:Je}let o=i(e),a=o(e);return{c(){a.c(),n=p()},m(t,e){a.m(t,e),l(t,n,e)},p(t,[e]){o===(o=i(t))&&a?a.p(t,e):(a.d(1),a=o(t),a&&(a.c(),a.m(n.parentNode,n)))},i:t,o:t,d(t){a.d(t),t&&s(n)}}}function Ye(t,e,n){let i,o,{card:a}=e,{flipped:c}=e;return S((async()=>{n(2,i=await gt(a.back_image_id));const t=await ht(a.front_image_id);n(3,o.style["background-image"]="url("+t+")",o)})),t.$$set=t=>{"card"in t&&n(0,a=t.card),"flipped"in t&&n(1,c=t.flipped)},[a,c,i,o,function(t){O[t?"unshift":"push"]((()=>{o=t,n(3,o)}))}]}class We extends et{constructor(t){super(),tt(this,t,Ye,Xe,a,{card:0,flipped:1})}}function Qe(t,e,n){const i=t.slice();return i[28]=e[n],i}function Ve(t,e,n){const i=t.slice();return i[31]=e[n][0],i[32]=e[n][1],i}function Ke(t){let e,n=[["again",1],["hard",2],["good",3],["easy",4]],i=[];for(let e=0;e<4;e+=1)i[e]=Ze(Ve(t,n,e));return{c(){for(let t=0;t<4;t+=1)i[t].c();e=p()},m(t,n){for(let e=0;e<4;e+=1)i[e].m(t,n);l(t,e,n)},p(t,o){if(67648&o[0]){let a;for(n=[["again",1],["hard",2],["good",3],["easy",4]],a=0;a<4;a+=1){const c=Ve(t,n,a);i[a]?i[a].p(c,o):(i[a]=Ze(c),i[a].c(),i[a].m(e.parentNode,e))}for(;a<4;a+=1)i[a].d(1)}},d(t){d(i,t),t&&s(e)}}}function Ze(t){let e,n,i,o,a,c,d,p,m,$,y,w,x,k,C=Math.floor(t[6][t[31]])-Math.floor(t[11])+"";function M(){return t[22](t[31])}return{c(){e=u("button"),n=f(t[31]),i=f(" ("),o=f(t[32]),a=f(")"),c=u("br"),d=_(),p=u("span"),m=f("+"),$=f(C),y=f(" days"),w=_(),b(p,"font-size","12px"),g(e,"class","grade_button svelte-wypxki")},m(t,s){var u;l(t,e,s),r(e,n),r(e,i),r(e,o),r(e,a),r(e,c),r(e,d),r(e,p),r(p,m),r(p,$),r(p,y),r(e,w),x||(k=h(e,"click",(u=M,function(t){return t.stopPropagation(),u.call(this,t)})),x=!0)},p(e,n){t=e,64&n[0]&&C!==(C=Math.floor(t[6][t[31]])-Math.floor(t[11])+"")&&v($,C)},d(t){t&&s(e),x=!1,k()}}}function tn(t){let e,n=t[12].slice(0,t[5]),i=[];for(let e=0;e<n.length;e+=1)i[e]=nn(Qe(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=p()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);l(t,e,n)},p(t,o){if(4128&o[0]){let a;for(n=t[12].slice(0,t[5]),a=0;a<n.length;a+=1){const c=Qe(t,n,a);i[a]?i[a].p(c,o):(i[a]=nn(c),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(t){d(i,t),t&&s(e)}}}function en(t){let e,n,i=t[0].front_text.replace(/\n/g,"<br>")+"";return{c(){e=new x(!1),n=p(),e.a=n},m(t,o){e.m(i,t,o),l(t,n,o)},p(t,n){1&n[0]&&i!==(i=t[0].front_text.replace(/\n/g,"<br>")+"")&&e.p(i)},d(t){t&&s(n),t&&e.d()}}}function nn(t){let e,n,i=t[28]+"";return{c(){e=f(i),n=u("br")},m(t,i){l(t,e,i),l(t,n,i)},p(t,n){32&n[0]&&i!==(i=t[28]+"")&&v(e,i)},d(t){t&&s(e),t&&s(n)}}}function on(e){let n,i;return{c(){n=u("center"),i=u("img"),g(i,"class","svelte-wypxki")},m(t,o){l(t,n,o),r(n,i),e[23](i)},p:t,d(t){t&&s(n),e[23](null)}}}function an(e){let n,i;return{c(){n=u("center"),i=u("img"),g(i,"class","svelte-wypxki")},m(t,o){l(t,n,o),r(n,i),e[24](i)},p:t,d(t){t&&s(n),e[24](null)}}}function cn(t){let e,n,i,o;function a(e){t[25](e)}function c(e){t[26](e)}let r={};return void 0!==t[0]&&(r.card=t[0]),void 0!==t[2]&&(r.flipped=t[2]),e=new We({props:r}),O.push((()=>W(e,"card",a))),O.push((()=>W(e,"flipped",c))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),o=!0},p(t,o){const a={};!n&&1&o[0]&&(n=!0,a.card=t[0],R((()=>n=!1))),!i&&4&o[0]&&(i=!0,a.flipped=t[2],R((()=>i=!1))),e.$set(a)},i(t){o||(F(e.$$.fragment,t),o=!0)},o(t){G(e.$$.fragment,t),o=!1},d(t){K(e,t)}}}function rn(t){let e,n,o,a,c,d,p,m,$,y,w,k,C,M,S,q,L,O,T,z,N,j,E,R,I,A,U,P,H,B,X,Y,W,Q,V,K,Z,tt=t[1]?"<u>b</u>ack":"<u>q</u>uit",et="verses"===t[0].card_type?"Next Line":"Flip",nt=t[0].back_text.replace("\n","<br>")+"",it=t[0].tags+"",ot=t[6]&&Ke(t);function at(t,e){return"basic"===t[0].card_type||t[1]?en:"verses"===t[0].card_type?tn:void 0}let ct=at(t),rt=ct&&ct(t),lt=0!=t[0].back_image_id&&t[2]&&"occlusion"===!t[0].card_type&&on(t),st=0!=t[0].front_image_id&&(0===t[0].back_image_id||t[1]||!t[2])&&"occlusion"===!t[0].card_type&&an(t),dt="occlusion"===t[0].card_type&&t[0].front_image_id&&cn(t);return{c(){e=u("body"),n=u("div"),o=u("div"),a=u("button"),a.innerHTML="‚úç <u>e</u>dit",c=_(),d=u("button"),p=f("‚èé "),m=new x(!1),$=_(),y=u("button"),y.innerHTML="‚úï <u>d</u>elete",w=_(),k=u("div"),ot&&ot.c(),C=_(),rt&&rt.c(),M=_(),S=u("br"),q=u("br"),L=_(),O=u("button"),T=f(et),z=u("br"),N=_(),j=u("span"),j.textContent="(click anywhere)",E=_(),R=u("div"),I=u("br"),A=_(),U=new x(!1),P=_(),H=f(it),B=_(),X=u("hr"),Y=_(),lt&&lt.c(),W=_(),st&&st.c(),Q=_(),dt&&dt.c(),g(a,"class","manage_button svelte-wypxki"),m.a=null,g(d,"class","manage_button svelte-wypxki"),g(y,"class","manage_button svelte-wypxki"),b(o,"display",t[7]),g(o,"id","manage_buttons_bar"),g(o,"class","svelte-wypxki"),b(k,"display",t[8]),g(k,"id","grade_buttons_bar"),g(k,"class","svelte-wypxki"),g(n,"id","buttons_bar"),g(n,"class","svelte-wypxki"),b(j,"font-size","14px"),g(O,"id","flipper"),g(O,"type","button"),b(O,"display",t[9]),O.autofocus=!0,g(O,"class","svelte-wypxki"),U.a=null,g(R,"id","backside"),b(R,"display",t[10]),g(e,"class","svelte-wypxki")},m(i,s){l(i,e,s),r(e,n),r(n,o),r(o,a),r(o,c),r(o,d),r(d,p),m.m(tt,d),r(o,$),r(o,y),r(n,w),r(n,k),ot&&ot.m(k,null),r(e,C),rt&&rt.m(e,null),r(e,M),r(e,S),r(e,q),r(e,L),r(e,O),r(O,T),r(O,z),r(O,N),r(O,j),r(e,E),r(e,R),r(R,I),r(R,A),U.m(nt,R),r(e,P),r(e,H),r(e,B),r(e,X),r(e,Y),lt&&lt.m(e,null),r(e,W),st&&st.m(e,null),r(e,Q),dt&&dt.m(e,null),V=!0,O.focus(),K||(Z=[h(window,"keydown",t[19]),h(a,"click",t[15]),h(d,"click",t[14]),h(y,"click",t[13]),h(O,"click",t[17]),h(e,"click",t[18])],K=!0)},p(t,n){(!V||2&n[0])&&tt!==(tt=t[1]?"<u>b</u>ack":"<u>q</u>uit")&&m.p(tt),(!V||128&n[0])&&b(o,"display",t[7]),t[6]?ot?ot.p(t,n):(ot=Ke(t),ot.c(),ot.m(k,null)):ot&&(ot.d(1),ot=null),(!V||256&n[0])&&b(k,"display",t[8]),ct===(ct=at(t))&&rt?rt.p(t,n):(rt&&rt.d(1),rt=ct&&ct(t),rt&&(rt.c(),rt.m(e,M))),(!V||1&n[0])&&et!==(et="verses"===t[0].card_type?"Next Line":"Flip")&&v(T,et),(!V||512&n[0])&&b(O,"display",t[9]),(!V||1&n[0])&&nt!==(nt=t[0].back_text.replace("\n","<br>")+"")&&U.p(nt),(!V||1024&n[0])&&b(R,"display",t[10]),(!V||1&n[0])&&it!==(it=t[0].tags+"")&&v(H,it),0!=t[0].back_image_id&&t[2]&&"occlusion"===!t[0].card_type?lt?lt.p(t,n):(lt=on(t),lt.c(),lt.m(e,W)):lt&&(lt.d(1),lt=null),0==t[0].front_image_id||0!==t[0].back_image_id&&!t[1]&&t[2]||"occlusion"!==!t[0].card_type?st&&(st.d(1),st=null):st?st.p(t,n):(st=an(t),st.c(),st.m(e,Q)),"occlusion"===t[0].card_type&&t[0].front_image_id?dt?(dt.p(t,n),1&n[0]&&F(dt,1)):(dt=cn(t),dt.c(),F(dt,1),dt.m(e,null)):dt&&(J(),G(dt,1,1,(()=>{dt=null})),D())},i(t){V||(F(dt),V=!0)},o(t){G(dt),V=!1},d(t){t&&s(e),ot&&ot.d(),rt&&rt.d(),lt&&lt.d(),st&&st.d(),dt&&dt.d(),K=!1,i(Z)}}}function ln(t,e,n){let i,o,a,c,r,l,s,{card:d}=e,{preview:u=!1}=e,{state:f}=e,{card_edited_alert:_}=e,p=ot(),h=u,g=1,m=d.front_text.split("\n"),v={again:0,hard:10,good:15,easy:25};function $(){n(0,d.visibility="deleted",d),dt(d),n(21,_=!0),b()}function b(){f.preview_mode?(n(20,f.preview_mode=!1,f),n(20,f.card_to_preview=null,f)):(n(20,f.reviewing=!1,f),n(20,f.card_to_review=null,f))}function y(){n(20,f.edit_mode=!0,f),n(20,f.card_to_edit=d,f),f.preview_mode&&b()}async function w(t){n(0,d.due_date=p+1,d),r=nt();var e=r-f.review_start;await async function(t,e,n){const i={review:{card_id:t,grade:e},metadata:{seconds:n,date:ot()}};let o=st();o.body=JSON.stringify(i);var a=new URL(rt+"review");fetch(a,o).then(ft).catch(ut)}(d.id,t,e),n(0,d.due_date=v[t],d),await dt(d),n(20,f.card_to_review=null,f),n(2,h=!1)}function x(){"basic"===d.card_type||"occlusion"===d.card_type?n(2,h=!0):"verses"===d.card_type&&(n(5,g++,g),n(2,h=g===m.length))}function k(){h||x()}S((async()=>{if(n(6,v=await async function(t,e){const n=new URL(rt+"hypothetical_due_dates");n.search=new URLSearchParams({card_id:t,date:e});var i=st();i.method="GET";const o=await fetch(n,i);return await o.json()}(d.id,p)),n(20,f.review_start=nt(),f),0!=d.front_image_id){const t=await ht(d.front_image_id);n(4,s.src=t,s)}0!=d.back_image_id&&"occlusion"!=d.card_type&&n(3,l.src=await ht(d.back_image_id),l)}));return t.$$set=t=>{"card"in t&&n(0,d=t.card),"preview"in t&&n(1,u=t.preview),"state"in t&&n(20,f=t.state),"card_edited_alert"in t&&n(21,_=t.card_edited_alert)},t.$$.update=()=>{5&t.$$.dirty[0]&&n(10,i="verses"!=d.card_type&&h?"block":"none"),4&t.$$.dirty[0]&&n(9,o=h?"none":"block"),6&t.$$.dirty[0]&&n(8,a=h&&!u?"grid":"none"),4&t.$$.dirty[0]&&n(7,c=h?"grid":"none")},[d,u,h,l,s,g,v,c,a,o,i,p,m,$,b,y,w,x,k,function(t){const e=t.key;"e"===e?y():"b"===e||"q"==e?b():"d"===e?$():" "===e?k():"1"===e?w("again"):"2"===e?w("hard"):"3"===e?w("good"):"4"===e&&w("easy")},f,_,t=>w(t),function(t){O[t?"unshift":"push"]((()=>{l=t,n(3,l)}))},function(t){O[t?"unshift":"push"]((()=>{s=t,n(4,s)}))},function(t){d=t,n(0,d)},function(t){h=t,n(2,h)}]}class sn extends et{constructor(t){super(),tt(this,t,ln,rn,a,{card:0,preview:1,state:20,card_edited_alert:21},null,[-1,-1])}}function dn(t){let e;return{c(){e=u("center"),e.textContent="Incorrect Password",b(e,"color","darkred")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function un(e){let n,o,a,c,d,p,m,y,w,x,k,C,M,S,q,L,O,T,z,N,j,E,R,I,A,U="login"===e[3]&&fn&&dn();return{c(){n=u("body"),o=f(e[6]),a=_(),c=u("input"),d=_(),p=u("input"),m=_(),U&&U.c(),y=_(),w=u("div"),x=u("label"),k=u("input"),C=f(" LOGIN"),M=_(),S=u("label"),q=u("input"),L=f(" REGISTER"),O=_(),T=u("input"),N=_(),j=u("br"),E=u("center"),R=u("button"),R.textContent="continue as guest",g(c,"class","entry svelte-1dlq1ng"),g(c,"type","text"),g(c,"placeholder","Username"),g(p,"class","entry svelte-1dlq1ng"),g(p,"type","password"),g(p,"placeholder","Password"),g(k,"type","radio"),g(k,"name","rol"),k.__value="login",k.value=k.__value,e[18][0].push(k),g(x,"class","svelte-1dlq1ng"),g(q,"type","radio"),g(q,"name","rol"),q.__value="register",q.value=q.__value,e[18][0].push(q),g(S,"class","svelte-1dlq1ng"),g(T,"type","submit"),T.value=e[3],T.disabled=z=!e[7],b(T,"border",e[7]?"1px solid black":"",!1),g(w,"id","bottom_row"),g(w,"class","svelte-1dlq1ng"),g(R,"type","button"),g(n,"class","svelte-1dlq1ng")},m(t,i){l(t,n,i),r(n,o),r(n,a),r(n,c),e[13](c),$(c,e[1]),r(n,d),r(n,p),e[15](p),$(p,e[2]),r(n,m),U&&U.m(n,null),r(n,y),r(n,w),r(w,x),r(x,k),k.checked=k.__value===e[3],r(x,C),r(w,M),r(w,S),r(S,q),q.checked=q.__value===e[3],r(S,L),r(w,O),r(w,T),r(n,N),r(n,j),r(n,E),r(E,R),I||(A=[h(c,"input",e[14]),h(p,"input",e[16]),h(k,"change",e[17]),h(q,"change",e[19]),h(T,"click",e[8]),h(R,"click",e[20])],I=!0)},p(t,[e]){64&e&&v(o,t[6]),2&e&&c.value!==t[1]&&$(c,t[1]),4&e&&p.value!==t[2]&&$(p,t[2]),"login"===t[3]&&fn?U||(U=dn(),U.c(),U.m(n,y)):U&&(U.d(1),U=null),8&e&&(k.checked=k.__value===t[3]),8&e&&(q.checked=q.__value===t[3]),8&e&&(T.value=t[3]),128&e&&z!==(z=!t[7])&&(T.disabled=z),128&e&&b(T,"border",t[7]?"1px solid black":"",!1)},i:t,o:t,d(t){t&&s(n),e[13](null),e[15](null),U&&U.d(),e[18][0].splice(e[18][0].indexOf(k),1),e[18][0].splice(e[18][0].indexOf(q),1),I=!1,i(A)}}}let fn=!1;function _n(t,e,n){let i,o,a,c,r,l,s,{username:d}=e,u=[],f="",_="",p="login";async function h(){const t=await async function(t,e){var n=new URL(rt+"auth/token"),i=new FormData;i.append("username",t),i.append("password",e);const o={method:"POST",mode:"cors",body:i};var a=null;const c=await fetch(n,o).then((t=>(a=t.ok,t))).then(ft).catch(ut);if(a){var r=await c.json();return window.localStorage.setItem("access_token",r.access_token),window.localStorage.setItem("username",t),!0}return!1}(f,_);t?n(0,d=f):(n(2,_=""),l.focus())}async function g(){const t=await async function(t,e){var n=new URL(rt+"auth/register"),i=st();i.body=JSON.stringify({username:t,password:e});var o=null;const a=await fetch(n,i).then((t=>(o=t.ok,t))).then(ft).catch(ut);if(o){var c=await a.json();return window.localStorage.setItem("access_token",c.access_token),window.localStorage.setItem("username",t),!0}return!1}(f,_);t?n(0,d=f):alert("registration failed")}S((async()=>{n(9,u=await async function(){var t=new URL(rt+"auth/users_list"),e=st();return e.method="GET",(await fetch(t,e)).json()}()),s.focus()}));return t.$$set=t=>{"username"in t&&n(0,d=t.username)},t.$$.update=()=>{514&t.$$.dirty&&n(10,i=u.includes(f)),1028&t.$$.dirty&&n(12,o=i&&_.length>2),1030&t.$$.dirty&&n(11,a=!i&&f.length>2&&_.length>2),6152&t.$$.dirty&&n(7,c="login"===p&&o||"register"===p&&a),1034&t.$$.dirty&&n(6,r="user does not exist!".repeat("login"===p&&!i&&f.length>2)+"username is already taken!".repeat("register"===p&&i&&f.length>2))},[d,f,_,p,l,s,r,c,function(){"login"===p?h():g()},u,i,a,o,function(t){O[t?"unshift":"push"]((()=>{s=t,n(5,s)}))},function(){f=this.value,n(1,f)},function(t){O[t?"unshift":"push"]((()=>{l=t,n(4,l)}))},function(){_=this.value,n(2,_)},function(){p=this.__value,n(3,p)},[[]],function(){p=this.__value,n(3,p)},()=>{n(0,d="guest")}]}class pn extends et{constructor(t){super(),tt(this,t,_n,un,a,{username:0})}}function hn(t){let e,n,i,o,a,c,r,d,f,p,h,g,m,v,$,y,w,x,k,C=t[4].preview_mode&&t[4].card_to_preview&&mn(t),M=t[4].edit_mode&&t[4].card_to_edit&&vn(t),S=t[4].reviewing&&null!=t[4].card_to_review&&$n(t);function q(e){t[25](e)}function L(e){t[26](e)}function T(e){t[27](e)}function z(e){t[28](e)}function N(e){t[29](e)}function j(e){t[30](e)}function E(e){t[31](e)}function I(e){t[32](e)}function A(e){t[33](e)}function U(e){t[34](e)}function P(e){t[35](e)}let H={};return void 0!==t[6]&&(H.sort=t[6]),void 0!==t[7]&&(H.collection_tags=t[7]),void 0!==t[2]&&(H.card_edited_alert=t[2]),void 0!==t[9]&&(H.due_count=t[9]),void 0!==t[10]&&(H.created_count=t[10]),void 0!==t[3]&&(H.username=t[3]),void 0!==t[5]&&(H.filters=t[5]),void 0!==t[4]&&(H.state=t[4]),void 0!==t[1]&&(H.filtered_cards=t[1]),void 0!==t[0]&&(H.cached_cards=t[0]),void 0!==t[8]&&(H.info=t[8]),r=new ee({props:H}),O.push((()=>W(r,"sort",q))),O.push((()=>W(r,"collection_tags",L))),O.push((()=>W(r,"card_edited_alert",T))),O.push((()=>W(r,"due_count",z))),O.push((()=>W(r,"created_count",N))),O.push((()=>W(r,"username",j))),O.push((()=>W(r,"filters",E))),O.push((()=>W(r,"state",I))),O.push((()=>W(r,"filtered_cards",A))),O.push((()=>W(r,"cached_cards",U))),O.push((()=>W(r,"info",P))),{c(){C&&C.c(),e=_(),n=u("div"),M&&M.c(),i=_(),o=u("div"),S&&S.c(),a=_(),c=u("div"),Q(r.$$.fragment),b(n,"display",t[4].preview_mode?"none":"block",!1),b(o,"display",t[4].preview_mode||t[4].edit_mode?"none":"block",!1),b(c,"display",t[4].preview_mode||t[4].edit_mode||t[4].reviewing?"none":"block",!1)},m(t,s){C&&C.m(t,s),l(t,e,s),l(t,n,s),M&&M.m(n,null),l(t,i,s),l(t,o,s),S&&S.m(o,null),l(t,a,s),l(t,c,s),V(r,c,null),k=!0},p(t,i){t[4].preview_mode&&t[4].card_to_preview?C?(C.p(t,i),16&i[0]&&F(C,1)):(C=mn(t),C.c(),F(C,1),C.m(e.parentNode,e)):C&&(J(),G(C,1,1,(()=>{C=null})),D()),t[4].edit_mode&&t[4].card_to_edit?M?(M.p(t,i),16&i[0]&&F(M,1)):(M=vn(t),M.c(),F(M,1),M.m(n,null)):M&&(J(),G(M,1,1,(()=>{M=null})),D()),16&i[0]&&b(n,"display",t[4].preview_mode?"none":"block",!1),t[4].reviewing&&null!=t[4].card_to_review?S?(S.p(t,i),16&i[0]&&F(S,1)):(S=$n(t),S.c(),F(S,1),S.m(o,null)):S&&(J(),G(S,1,1,(()=>{S=null})),D()),16&i[0]&&b(o,"display",t[4].preview_mode||t[4].edit_mode?"none":"block",!1);const a={};!d&&64&i[0]&&(d=!0,a.sort=t[6],R((()=>d=!1))),!f&&128&i[0]&&(f=!0,a.collection_tags=t[7],R((()=>f=!1))),!p&&4&i[0]&&(p=!0,a.card_edited_alert=t[2],R((()=>p=!1))),!h&&512&i[0]&&(h=!0,a.due_count=t[9],R((()=>h=!1))),!g&&1024&i[0]&&(g=!0,a.created_count=t[10],R((()=>g=!1))),!m&&8&i[0]&&(m=!0,a.username=t[3],R((()=>m=!1))),!v&&32&i[0]&&(v=!0,a.filters=t[5],R((()=>v=!1))),!$&&16&i[0]&&($=!0,a.state=t[4],R((()=>$=!1))),!y&&2&i[0]&&(y=!0,a.filtered_cards=t[1],R((()=>y=!1))),!w&&1&i[0]&&(w=!0,a.cached_cards=t[0],R((()=>w=!1))),!x&&256&i[0]&&(x=!0,a.info=t[8],R((()=>x=!1))),r.$set(a),16&i[0]&&b(c,"display",t[4].preview_mode||t[4].edit_mode||t[4].reviewing?"none":"block",!1)},i(t){k||(F(C),F(M),F(S),F(r.$$.fragment,t),k=!0)},o(t){G(C),G(M),G(S),G(r.$$.fragment,t),k=!1},d(t){C&&C.d(t),t&&s(e),t&&s(n),M&&M.d(),t&&s(i),t&&s(o),S&&S.d(),t&&s(a),t&&s(c),K(r)}}}function gn(t){let e,n,i;function o(e){t[14](e)}let a={};return void 0!==t[3]&&(a.username=t[3]),e=new pn({props:a}),O.push((()=>W(e,"username",o))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),i=!0},p(t,i){const o={};!n&&8&i[0]&&(n=!0,o.username=t[3],R((()=>n=!1))),e.$set(o)},i(t){i||(F(e.$$.fragment,t),i=!0)},o(t){G(e.$$.fragment,t),i=!1},d(t){K(e,t)}}}function mn(t){let e,n,i,o;function a(e){t[15](e)}function c(e){t[16](e)}let r={preview:"true"};return void 0!==t[4].card_to_preview&&(r.card=t[4].card_to_preview),void 0!==t[4]&&(r.state=t[4]),e=new sn({props:r}),O.push((()=>W(e,"card",a))),O.push((()=>W(e,"state",c))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),o=!0},p(t,o){const a={};!n&&16&o[0]&&(n=!0,a.card=t[4].card_to_preview,R((()=>n=!1))),!i&&16&o[0]&&(i=!0,a.state=t[4],R((()=>i=!1))),e.$set(a)},i(t){o||(F(e.$$.fragment,t),o=!0)},o(t){G(e.$$.fragment,t),o=!1},d(t){K(e,t)}}}function vn(t){let e,n,i,o,a,c,r;function l(e){t[17](e)}function s(e){t[18](e)}function d(e){t[19](e)}function u(e){t[20](e)}function f(e){t[21](e)}let _={};return void 0!==t[4].card_to_edit&&(_.card=t[4].card_to_edit),void 0!==t[0]&&(_.cached_cards=t[0]),void 0!==t[2]&&(_.card_edited_alert=t[2]),void 0!==t[7]&&(_.collection_tags=t[7]),void 0!==t[4]&&(_.state=t[4]),e=new He({props:_}),O.push((()=>W(e,"card",l))),O.push((()=>W(e,"cached_cards",s))),O.push((()=>W(e,"card_edited_alert",d))),O.push((()=>W(e,"collection_tags",u))),O.push((()=>W(e,"state",f))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),r=!0},p(t,r){const l={};!n&&16&r[0]&&(n=!0,l.card=t[4].card_to_edit,R((()=>n=!1))),!i&&1&r[0]&&(i=!0,l.cached_cards=t[0],R((()=>i=!1))),!o&&4&r[0]&&(o=!0,l.card_edited_alert=t[2],R((()=>o=!1))),!a&&128&r[0]&&(a=!0,l.collection_tags=t[7],R((()=>a=!1))),!c&&16&r[0]&&(c=!0,l.state=t[4],R((()=>c=!1))),e.$set(l)},i(t){r||(F(e.$$.fragment,t),r=!0)},o(t){G(e.$$.fragment,t),r=!1},d(t){K(e,t)}}}function $n(t){let e,n,i,o,a;function c(e){t[22](e)}function r(e){t[23](e)}function l(e){t[24](e)}let s={};return void 0!==t[2]&&(s.card_edited_alert=t[2]),void 0!==t[4]&&(s.state=t[4]),void 0!==t[4].card_to_review&&(s.card=t[4].card_to_review),e=new sn({props:s}),O.push((()=>W(e,"card_edited_alert",c))),O.push((()=>W(e,"state",r))),O.push((()=>W(e,"card",l))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),a=!0},p(t,a){const c={};!n&&4&a[0]&&(n=!0,c.card_edited_alert=t[2],R((()=>n=!1))),!i&&16&a[0]&&(i=!0,c.state=t[4],R((()=>i=!1))),!o&&16&a[0]&&(o=!0,c.card=t[4].card_to_review,R((()=>o=!1))),e.$set(c)},i(t){a||(F(e.$$.fragment,t),a=!0)},o(t){G(e.$$.fragment,t),a=!1},d(t){K(e,t)}}}function bn(t){let e,n,i,o;const a=[gn,hn],c=[];function r(t,e){return"none"===t[3]?0:1}return n=r(t),i=c[n]=a[n](t),{c(){e=u("body"),i.c(),g(e,"class","svelte-hdfi12")},m(t,i){l(t,e,i),c[n].m(e,null),o=!0},p(t,o){let l=n;n=r(t),n===l?c[n].p(t,o):(J(),G(c[l],1,1,(()=>{c[l]=null})),D(),i=c[n],i?i.p(t,o):(i=c[n]=a[n](t),i.c()),F(i,1),i.m(e,null))},i(t){o||(F(i),o=!0)},o(t){G(i),o=!1},d(t){t&&s(e),c[n].d()}}}function yn(t,e,n){let i,o,a,c,r,l,s=new Array(1).fill(ct),d=s,u=!1,f=!0,_=[],p={card_to_edit:null,edit_mode:!1,card_to_preview:null,preview_mode:!1,card_to_review:null,reviewing:!1,review_start:null},h={deleted:!1,search:"",due:null,new:null,images:null,audio:null,tag:null,card_type:"",created_after:null,created_before:null,due_after:null,due_before:null},g="recent",m=null,v=ot();async function $(){f||(n(0,s=await async function(t,e){var n=st();const i=new URL(rt+"cardlist"),o={crit:{sort:e},filters:t};return n.body=JSON.stringify(o),(await fetch(i,n).then(ft).catch(ut)).json()}(h,g)),n(7,_=await async function(){const t=new URL(rt+"collection_tags");var e=st();return e.method="GET",(await fetch(t,e)).json()}()))}async function b(){if(!f)switch(n(1,d=s),n(2,u=!1),g){case"recent":d.sort(((t,e)=>Math.max(e.last_edit_date,e.last_review_date)-Math.max(t.last_edit_date,t.last_review_date)));break;case"old":d.sort(((t,e)=>t.create_date-e.create_date));break;case"meritorious":d.sort(((t,e)=>e.merit-t.merit));break;case"edited":d.sort(((t,e)=>t.last_edit_date-e.last_edit_date));break;case"reviewed":d.sort(((t,e)=>t.last_review_date-e.last_review_date));break;case"random":d.sort((()=>Math.random()-.5));break;case"overdue":d.sort(((t,e)=>t.due_date-e.due_date));break;case"total time":d.sort(((t,e)=>e.total_seconds-t.total_seconds))}}return S((async()=>{!async function(){window.localStorage.getItem("username")||(window.localStorage.setItem("username","guest"),window.localStorage.setItem("access_token","guest123"))}(),n(3,r=window.localStorage.getItem("username")),f=!1})),t.$$.update=()=>{1&t.$$.dirty[0]&&n(13,i=s.filter((t=>t.create_date>Math.floor(v)))),1&t.$$.dirty[0]&&n(12,o=s.filter((t=>t.due_date<v))),8192&t.$$.dirty[0]&&n(10,a=i.length),4096&t.$$.dirty[0]&&n(9,c=o.length),2066&t.$$.dirty[0]&&p.reviewing&&null===p.card_to_review&&(n(4,p.review_start=nt(),p),n(11,l=function(t){if(0===t.length)return null;t.sort(((t,e)=>t.due_date-e.due_date));var e=t[0];return e.due_date<ot()?e:(alert("Congratulations Student. There are no more due cards."),null)}(d)),null===l&&n(4,p.reviewing=!1,p),n(4,p.card_to_review=l,p)),96&t.$$.dirty[0]&&$(),8&t.$$.dirty[0]&&$(),1&t.$$.dirty[0]&&b(),4&t.$$.dirty[0]&&b()},[s,d,u,r,p,h,g,_,m,c,a,l,o,i,function(t){r=t,n(3,r)},function(e){t.$$.not_equal(p.card_to_preview,e)&&(p.card_to_preview=e,n(4,p),n(1,d),n(11,l))},function(t){p=t,n(4,p),n(1,d),n(11,l)},function(e){t.$$.not_equal(p.card_to_edit,e)&&(p.card_to_edit=e,n(4,p),n(1,d),n(11,l))},function(t){s=t,n(0,s)},function(t){u=t,n(2,u)},function(t){_=t,n(7,_)},function(t){p=t,n(4,p),n(1,d),n(11,l)},function(t){u=t,n(2,u)},function(t){p=t,n(4,p),n(1,d),n(11,l)},function(e){t.$$.not_equal(p.card_to_review,e)&&(p.card_to_review=e,n(4,p),n(1,d),n(11,l))},function(t){g=t,n(6,g)},function(t){_=t,n(7,_)},function(t){u=t,n(2,u)},function(t){c=t,n(9,c),n(12,o),n(0,s),n(37,v)},function(t){a=t,n(10,a),n(13,i),n(0,s),n(37,v)},function(t){r=t,n(3,r)},function(t){h=t,n(5,h)},function(t){p=t,n(4,p),n(1,d),n(11,l)},function(t){d=t,n(1,d)},function(t){s=t,n(0,s)},function(t){m=t,n(8,m)}]}return new class extends et{constructor(t){super(),tt(this,t,yn,bn,a,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
