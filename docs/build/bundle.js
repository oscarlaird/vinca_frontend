var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e,n,i){return t[1]&&i?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](i(e))):n.ctx}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function p(){return f(" ")}function _(){return f("")}function h(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t){return""===t?null:+t}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function y(t,e,n,i){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function b(t,e){for(let n=0;n<t.options.length;n+=1){const i=t.options[n];if(i.__value===e)return void(i.selected=!0)}t.selectedIndex=-1}function w(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}class k{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){var i;this.e||(this.is_svg?this.e=(i=e.nodeName,document.createElementNS("http://www.w3.org/2000/svg",i)):this.e=u(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)l(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(s)}}let x;function C(t){x=t}function L(){if(!x)throw new Error("Function called outside component initialization");return x}function M(t){L().$$.on_mount.push(t)}function S(){const t=L();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,i,e),o}(e,n,{cancelable:i});return o.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}const j=[],q=[],O=[],T=[],N=Promise.resolve();let z=!1;function E(t){O.push(t)}function R(t){T.push(t)}const I=new Set;let A=0;function U(){const t=x;do{for(;A<j.length;){const t=j[A];A++,C(t),P(t.$$)}for(C(null),j.length=0,A=0;q.length;)q.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];I.has(e)||(I.add(e),e())}O.length=0}while(j.length);for(;T.length;)T.pop()();z=!1,I.clear(),C(t)}function P(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const H=new Set;let B;function J(){B={r:0,c:[],p:B}}function D(){B.r||i(B.c),B=B.p}function F(t,e){t&&t.i&&(H.delete(t),t.i(e))}function G(t,e,n,i){if(t&&t.o){if(H.has(t))return;H.add(t),B.c.push((()=>{H.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}const X="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Y(t,e){G(t,1,1,(()=>{e.delete(t.key)}))}function W(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function Q(t){t&&t.c()}function V(t,n,r,a){const{fragment:c,on_mount:l,on_destroy:s,after_update:d}=t.$$;c&&c.m(n,r),a||E((()=>{const n=l.map(e).filter(o);s?s.push(...n):i(n),t.$$.on_mount=[]})),d.forEach(E)}function Z(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function K(t,e){-1===t.$$.dirty[0]&&(j.push(t),z||(z=!0,N.then(U)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function tt(e,o,r,a,c,l,d,u=[-1]){const f=x;C(e);const p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:o.target||f.$$.root};d&&d(p.root);let _=!1;if(p.ctx=r?r(e,o.props||{},((t,n,...i)=>{const o=i.length?i[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),_&&K(e,t)),n})):[],p.update(),_=!0,i(p.before_update),p.fragment=!!a&&a(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(s)}else p.fragment&&p.fragment.c();o.intro&&F(e.$$.fragment),V(e,o.target,o.anchor,o.customElement),U()}C(f)}class et{$destroy(){Z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let nt=()=>Math.floor(Date.now()/1e3);const it=60*(new Date).getTimezoneOffset();let ot=()=>(nt()-it)/86400;function rt(){const t=ot();return{id:0,front_text:"",back_text:"",visibility:"visible",card_type:"basic",scheduler:"basic",tags:"",merit:6,create_date:t,due_date:t,last_review_date:t,last_edit_date:t,review_seconds:0,edit_seconds:0,total_seconds:0,front_image_id:0,back_image_id:0,front_audio_id:0,back_audio_id:0}}function at(){return at={...rt(),front_text:"loading..."}}let ct="https://api.vinca.study/";function lt(){return String(Math.floor(1e15*Math.random()))}function st(){return{method:"POST",mode:"cors",headers:{"content-type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("access_token")}}}async function dt(t,e=0){const n=new URL(ct+"commit_card"),i={seconds:e,date:ot()},o={card:t,metadata:i};let r=st();r.body=JSON.stringify(o),fetch(n,r).then(ft).then((e=>{const n=e.json();for(var i in n)t[i]=n[i]})).catch(ut)}function ut(t){alert("Internet Problem: "+t.message)}function ft(t){if(t.ok)return t;throw new Error(t.status+":  "+t.statusText)}async function pt(t,e=!0){let n=st();n.body=JSON.stringify({content:t,base64:e});var i=new URL(ct+"upload_media");const o=await fetch(i,n).then(ft).catch(ut),r=await o.json();return await r.media_id}async function _t(t){new Headers;var e=st();e.method="GET";return await fetch(t,e)}async function ht(t){const e=ct+"get_media?media_id="+t,n=await _t(e),i=await n.blob();return URL.createObjectURL(i)}async function gt(t){const e=ct+"get_occlusion_data?media_id="+t,n=await _t(e),i=await n.json();return JSON.parse(i)}function mt(t){let e,n,i,o,r,d,_,m,$,b,w;const k=t[6].default,x=function(t,e,n,i){if(t){const o=a(t,e,n,i);return t[0](o)}}(k,t,t[5],null);return{c(){e=u("label"),x&&x.c(),n=u("br"),i=p(),o=u("input"),_=p(),m=f(t[1]),g(o,"type","checkbox"),o.indeterminate=r=!1===t[0],o.checked=d=null!=t[0],g(e,"class","svelte-1ad6k3b"),y(e,"color",t[2],!1),y(e,"display","inline",!1)},m(r,a){l(r,e,a),x&&x.m(e,null),c(e,n),c(e,i),c(e,o),c(e,_),c(e,m),$=!0,b||(w=h(o,"click",t[3]),b=!0)},p(t,[n]){x&&x.p&&(!$||32&n)&&function(t,e,n,i,o,r){if(o){const c=a(e,n,i,r);t.p(c,o)}}(x,k,t,t[5],$?function(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|o[i];return t}return e.dirty|o}return e.dirty}(k,t[5],n,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[5]),null),(!$||1&n&&r!==(r=!1===t[0]))&&(o.indeterminate=r),(!$||1&n&&d!==(d=null!=t[0]))&&(o.checked=d),(!$||2&n)&&v(m,t[1]),4&n&&y(e,"color",t[2],!1)},i(t){$||(F(x,t),$=!0)},o(t){G(x,t),$=!1},d(t){t&&s(e),x&&x.d(t),b=!1,w()}}}function vt(t,e,n){let i,o,{$$slots:r={},$$scope:a}=e,{state:c=null}=e,l=[null,!0,!1],s=l.indexOf(c);return t.$$set=t=>{"state"in t&&n(0,c=t.state),"$$scope"in t&&n(5,a=t.$$scope)},t.$$.update=()=>{16&t.$$.dirty&&n(0,c=l[s]),1&t.$$.dirty&&n(2,i={null:"black",true:"darkgreen",false:"red"}[c]),1&t.$$.dirty&&n(1,o={null:"any",true:"yes",false:"no"}[c])},[c,o,i,function(){n(4,s=(s+1)%l.length)},s,a,r]}class $t extends et{constructor(t){super(),tt(this,t,vt,mt,r,{state:0})}}function yt(e){let n,i,o,r,a,d,_,m;return{c(){n=u("button"),i=u("div"),i.innerHTML='Review\n    <svg id="svg_lamp" viewBox="10 30 300 330" class="svelte-1joag2w"><path style="fill:none;stroke:#008000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" d="m 168.08981,266.41346 0,-196.733878"></path><path style="fill:none;stroke:#008000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 113.40393,266.41346 H 222.7757"></path><rect style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1.07730699;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" width="15.23763" height="15.23763" x="70.657272" y="252.84714" rx="0" ry="6.2100134" transform="matrix(0.49621774,-0.86819811,0.49621774,0.86819811,0,0)"></rect><path style="fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 113.40393,266.41346 54.68588,-15.63159 54.68589,15.63159"></path><circle style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" cx="247.97658" cy="142.35379" r="4.0321393"></circle><circle r="4.0321393" cy="151.99362" cx="247.97658" style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></circle><circle style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" cx="247.97658" cy="161.63345" r="4.0321393"></circle><circle r="4.0321393" cy="171.27328" cx="247.97658" style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></circle><circle style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" cx="247.97658" cy="180.91312" r="4.0321393"></circle><circle r="4.0321393" cy="190.55295" cx="247.97658" style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></circle><path style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1.75496578;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" r="7.0762668" cy="203.25423" cx="247.97658"></path><path style="fill:#008000;stroke:#008000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1" d="m 39.769243,134.97217 c 4.692467,4.30517 252.308817,3.945 256.641117,0 4.3323,-3.945 -13.34213,-49.792447 -33.81729,-58.573276 -20.47516,-8.780829 -171.052555,-9.140997 -189.006528,0 C 55.632569,85.539891 35.076776,130.667 39.769243,134.97217 Z"></path><rect transform="matrix(0.49621774,-0.86819811,0.49621774,0.86819811,0,0)" ry="6.2100134" rx="0" y="267.24478" x="56.259636" height="15.23763" width="15.23763" style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1.07730699;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect><rect style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1.07730699;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" width="15.23763" height="15.23763" x="41.862" y="281.64243" rx="0" ry="6.2100134" transform="matrix(0.49621774,-0.86819811,0.49621774,0.86819811,0,0)"></rect><rect transform="matrix(0.49621774,-0.86819811,0.49621774,0.86819811,0,0)" ry="6.2100134" rx="0" y="296.04007" x="27.464363" height="15.23763" width="15.23763" style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1.07730699;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect></svg>',o=p(),r=u("div"),a=f(e[0]),d=f(" cards due"),g(i,"id","review_text"),g(i,"class","svelte-1joag2w"),g(r,"id","due_count"),g(r,"class","svelte-1joag2w"),g(n,"type","button"),g(n,"class","svelte-1joag2w")},m(t,s){l(t,n,s),c(n,i),c(n,o),c(n,r),c(r,a),c(r,d),_||(m=h(n,"click",e[1]),_=!0)},p(t,[e]){1&e&&v(a,t[0])},i:t,o:t,d(t){t&&s(n),_=!1,m()}}}function bt(t,e,n){let i;const o=S();let{due_count:r=0}=e;return t.$$set=t=>{"due_count"in t&&n(2,r=t.due_count)},t.$$.update=()=>{4&t.$$.dirty&&n(0,i=r+(r>=50?"+":""))},[i,function(){o("click")},r]}class wt extends et{constructor(t){super(),tt(this,t,bt,yt,r,{due_count:2})}}function kt(e){let n,i,o,r,a,d,_,m;return{c(){n=u("button"),i=u("div"),i.innerHTML='Create\n  <svg id="svg_inkwell" viewBox="0 5 150 205" version="1.0" class="svelte-1ihc5pi"><path id="path1910" d="M 20.382927,148.85388 C 15.003029,148.16236 14.991336,148.14842 15.375994,142.88543 C 15.813941,136.89333 17.052355,127.55395 17.666511,125.61171 C 18.305239,123.59175 20.350833,121.89374 24.794224,119.69508 C 26.752539,118.72608 28.354799,117.66442 28.354799,117.33583 C 28.354799,116.98214 27.507949,116.67713 26.279055,116.58822 L 24.203311,116.43803 L 24.203311,113.01916 L 24.203311,109.60029 L 30.064235,109.46249 C 35.570572,109.33302 35.956118,109.25915 36.4369,108.24146 C 36.718361,107.64569 37.625642,105.83953 38.453082,104.22777 C 39.280517,102.61602 40.856261,99.429148 41.954725,97.14583 C 43.053194,94.862511 44.719601,91.675634 45.657847,90.06388 C 46.596097,88.452126 47.519437,86.803742 47.709712,86.400803 C 47.899987,85.997865 48.623069,84.785425 49.316567,83.706488 C 50.706988,81.543285 50.694583,81.563251 54.318904,75.655777 C 58.801182,68.349867 61.534175,64.940177 73.10987,52.212083 C 80.455986,44.134634 86.176135,38.478062 91.115521,34.406551 C 92.9959,32.856567 97.236723,29.059064 100.53957,25.967657 C 103.84242,22.876249 106.65476,20.456928 106.78922,20.591388 C 106.92368,20.725847 106.24607,22.454263 105.28341,24.43231 C 104.32075,26.410352 103.60236,28.469905 103.68698,29.009085 C 103.78676,29.644864 104.83183,28.00443 106.66047,24.341641 C 109.31491,19.024743 109.67775,18.545955 112.85377,16.169199 C 114.70929,14.780629 118.26972,12.575733 120.76584,11.269429 C 125.88481,8.5904968 129.50678,6.4897841 133.20157,4.0568016 C 137.51721,1.2149961 137.67943,1.9571883 134.11919,8.2551567 C 132.98028,10.269849 131.50101,13.127047 130.83191,14.604489 C 130.16282,16.08193 127.89704,20.477622 125.79685,24.372694 C 121.15259,32.986049 119.95628,35.216419 117.28278,40.246029 C 115.15812,44.243115 113.76355,46.079963 112.22319,46.910201 C 111.74425,47.168346 108.33759,48.432601 104.65283,49.719662 C 100.96807,51.006726 97.034091,52.530473 95.91066,53.105771 C 92.287676,54.961056 92.764926,55.946317 96.443754,54.206316 C 99.724572,52.654568 110.8196,49.042286 111.18442,49.407104 C 111.70937,49.932052 107.20784,55.743998 95.204355,70.039059 C 93.399845,72.188064 90.186349,76.034295 88.063254,78.586239 C 84.049635,83.41058 81.681412,85.408476 79.93196,85.44601 C 79.367275,85.458127 78.245909,85.769953 77.440033,86.138962 L 75.974802,86.809876 L 78.294751,86.849545 C 79.570722,86.871362 80.614699,87.07373 80.614699,87.299254 C 80.614699,87.672707 78.036948,89.863915 72.628185,94.088157 C 67.964922,97.730164 59.857116,101.7988 50.931418,104.97597 C 49.514339,105.48039 46.991788,106.61733 45.325752,107.50249 L 42.296592,109.11188 L 45.704417,109.35608 L 49.112236,109.60029 L 49.112236,113.01916 L 49.112236,116.43803 L 47.280697,116.58962 C 45.41941,116.74366 44.875198,117.59154 46.059672,118.49197 C 46.395454,118.74724 47.769108,119.35421 49.112236,119.8408 C 50.628867,120.39025 52.387168,121.5789 53.752134,122.97747 C 55.854359,125.13144 55.987255,125.44191 56.806725,130.11352 C 57.277933,132.79978 57.805563,137.79273 57.979232,141.20897 L 58.294999,147.42031 L 57.022055,147.90428 C 53.410422,149.27742 28.667093,149.9187 20.382927,148.85388 z " style="fill:purple"></path></svg>',o=p(),r=u("div"),a=f(e[0]),d=f(" created today"),g(i,"id","create_text"),g(i,"class","svelte-1ihc5pi"),g(r,"id","due_count"),g(r,"class","svelte-1ihc5pi"),g(n,"type","button"),g(n,"class","svelte-1ihc5pi")},m(t,s){l(t,n,s),c(n,i),c(n,o),c(n,r),c(r,a),c(r,d),_||(m=h(n,"click",e[1]),_=!0)},p(t,[e]){1&e&&v(a,t[0])},i:t,o:t,d(t){t&&s(n),_=!1,m()}}}function xt(t,e,n){const i=S();let{created_count:o}=e;return t.$$set=t=>{"created_count"in t&&n(0,o=t.created_count)},[o,function(){i("click")}]}class Ct extends et{constructor(t){super(),tt(this,t,xt,kt,r,{created_count:0})}}function Lt(e){let n,o,r,a,d,_,m,$,b,w,x,C,L,M,S,j,q=(e[0].front_text?e[0].front_text:"(blank)")+"";return{c(){n=u("div"),o=u("button"),o.textContent="✕",r=f(" \n    "),a=u("button"),a.textContent="👁",d=f(" \n    "),_=u("button"),_.textContent="✍",m=f(" \n    "),$=new k(!1),b=p(),w=u("span"),x=f("due "),C=p(),L=u("span"),M=f(q),g(o,"type","button"),g(o,"class","button svelte-1kgg240"),y(o,"color","darkred",!1),g(a,"type","button"),g(a,"class","button svelte-1kgg240"),g(_,"type","button"),g(_,"class","button svelte-1kgg240"),$.a=b,g(w,"class","front_text svelte-1kgg240"),y(w,"color","purple"),y(w,"display",e[2]),y(w,"font-size","14px",!1),g(L,"class","front_text svelte-1kgg240"),y(L,"text-decoration",e[3]),g(n,"class","card_container svelte-1kgg240")},m(t,i){l(t,n,i),c(n,o),c(n,r),c(n,a),c(n,d),c(n,_),c(n,m),$.m(e[1],n),c(n,b),c(n,w),c(w,x),c(n,C),c(n,L),c(L,M),S||(j=[h(o,"click",e[4]),h(a,"click",e[5]),h(_,"click",e[6])],S=!0)},p(t,[e]){2&e&&$.p(t[1]),4&e&&y(w,"display",t[2]),1&e&&q!==(q=(t[0].front_text?t[0].front_text:"(blank)")+"")&&v(M,q),8&e&&y(L,"text-decoration",t[3])},i:t,o:t,d(t){t&&s(n),S=!1,i(j)}}}function Mt(t,e,n){let i,o,r,a;let{card:c}=e,{card_edited_alert:l}=e,{state:s}=e,{info:d}=e,u=ot();return t.$$set=t=>{"card"in t&&n(0,c=t.card),"card_edited_alert"in t&&n(7,l=t.card_edited_alert),"state"in t&&n(8,s=t.state),"info"in t&&n(9,d=t.info)},t.$$.update=()=>{1&t.$$.dirty&&n(3,i="deleted"===c.visibility?"line-through":""),1&t.$$.dirty&&n(10,o=c.due_date<u),1025&t.$$.dirty&&n(2,r=o&&"visible"===c.visibility?"inline":"none"),512&t.$$.dirty&&n(1,a=function(t){switch(t){case"":default:return"";case"create_date":return"Created <b><mark>"+Math.trunc(u-c[t])+"</mark></b> days ago";case"due_date":return"Due in <b><mark>"+Math.trunc(c[t]-u)+"</mark></b> days";case"last_review_date":return"Last reviewed <b><mark>"+Math.trunc(u-c[t])+"</mark></b> days ago";case"last_edit_date":return"Last edited <b><mark>"+Math.trunc(u-c[t])+"</mark></b> days ago";case"review_seconds":return"Spent <b><mark>"+Math.floor(c[t])+"</mark></b> seconds reviewing";case"edit_seconds":return"Spent <b><mark>"+Math.floor(c[t])+"</mark></b> seconds editing";case"total_seconds":return"Spent <b><mark>"+Math.floor(c[t])+"</mark></b> seconds";case"card_type":case"merit":return"<b><mark>"+c[t]+"</mark></b>";case"tags":return"tags: <b><mark>"+c[t]+"</mark></b>"}}(d))},[c,a,r,i,async function(){n(0,c.visibility="visible"===c.visibility?"deleted":"visible",c),dt(c),n(7,l=!0)},function(){n(8,s.card_to_preview=c,s),n(8,s.preview_mode=!0,s)},function(){n(8,s.card_to_edit=c,s),n(8,s.edit_mode=!0,s)},l,s,d,o]}class St extends et{constructor(t){super(),tt(this,t,Mt,Lt,r,{card:0,card_edited_alert:7,state:8,info:9})}}function jt(e){let n,i,o,r,a,d;return E(e[4]),{c(){n=u("div"),i=u("span"),i.textContent="?",o=p(),r=u("span"),g(i,"class","question_mark svelte-1d9etfy"),g(r,"class","tooltiptext svelte-1d9etfy"),g(n,"class","tooltip svelte-1d9etfy")},m(t,s){l(t,n,s),c(n,i),c(n,o),c(n,r),r.innerHTML=e[0],e[5](r),e[6](n),a||(d=h(window,"resize",e[4]),a=!0)},p(t,[e]){1&e&&(r.innerHTML=t[0])},i:t,o:t,d(t){t&&s(n),e[5](null),e[6](null),a=!1,d()}}}function qt(t,e,n){let i,o,r,{text:a}=e;return M((()=>{const t=i.getBoundingClientRect(),e=t.left,a=r-t.right;n(2,o.style["margin-left"]=e<120?"-"+e+"px":a<120?"-"+(240-a)+"px":"-120px",o)})),t.$$set=t=>{"text"in t&&n(0,a=t.text)},[a,i,o,r,function(){n(3,r=window.innerWidth)},function(t){q[t?"unshift":"push"]((()=>{o=t,n(2,o)}))},function(t){q[t?"unshift":"push"]((()=>{i=t,n(1,i)}))}]}class Ot extends et{constructor(t){super(),tt(this,t,qt,jt,r,{text:0})}}function Tt(t,e,n){const i=t.slice();return i[18]=e[n],i}function Nt(t){let e;return{c(){e=f("due:")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function zt(t){let e;return{c(){e=f("new:")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function Et(t){let e;return{c(){e=f("deleted:")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function Rt(e){let n,i,o,r,a,d;return o=new Ot({props:{text:"Purged cards will never be seen again.<br><br>(However, vinca never destroys data and it is possible to manually recover purged cards from the database)."}}),{c(){n=u("button"),i=f("purge\n                "),Q(o.$$.fragment),g(n,"type","button"),g(n,"class","svelte-zgasv9"),y(n,"border-radius","4px",!1),y(n,"color","red",!1)},m(t,s){l(t,n,s),c(n,i),V(o,n,null),e[11](n),r=!0,a||(d=h(n,"click",e[5]),a=!0)},p:t,i(t){r||(F(o.$$.fragment,t),r=!0)},o(t){G(o.$$.fragment,t),r=!1},d(t){t&&s(n),Z(o),e[11](null),a=!1,d()}}}function It(t){let e;return{c(){e=f("images:")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function At(t){let e;return{c(){e=f("audio:")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function Ut(t){let e,n,i,o=t[18]+"";return{c(){e=u("option"),n=f(o),e.__value=i=t[18],e.value=e.__value},m(t,i){l(t,e,i),c(e,n)},p(t,r){8&r&&o!==(o=t[18]+"")&&v(n,o),8&r&&i!==(i=t[18])&&(e.__value=i,e.value=e.__value)},d(t){t&&s(e)}}}function Pt(t){let e,n,o,r,a,_,m,v,$,y,w,k,x,C,L,M,S,j,O,T,N,z,I,A,U,P,H,B,X,Y,K,tt,et,nt,it,ot,rt,at,ct,lt,st,dt,ut,ft,pt,_t,ht,gt,mt,vt,yt,bt,wt,kt,xt,Ct,Lt,Mt,St;function jt(e){t[8](e)}let qt={$$slots:{default:[Nt]},$$scope:{ctx:t}};function Ot(e){t[9](e)}void 0!==t[1].due&&(qt.state=t[1].due),o=new $t({props:qt}),q.push((()=>W(o,"state",jt)));let Pt={$$slots:{default:[zt]},$$scope:{ctx:t}};function Ht(e){t[10](e)}void 0!==t[1].new&&(Pt.state=t[1].new),_=new $t({props:Pt}),q.push((()=>W(_,"state",Ot)));let Bt={$$slots:{default:[Et]},$$scope:{ctx:t}};void 0!==t[1].deleted&&(Bt.state=t[1].deleted),$=new $t({props:Bt}),q.push((()=>W($,"state",Ht)));let Jt=t[1].deleted&&Rt(t);function Dt(e){t[12](e)}let Ft={$$slots:{default:[It]},$$scope:{ctx:t}};function Gt(e){t[13](e)}void 0!==t[1].images&&(Ft.state=t[1].images),x=new $t({props:Ft}),q.push((()=>W(x,"state",Dt)));let Xt={$$slots:{default:[At]},$$scope:{ctx:t}};void 0!==t[1].audio&&(Xt.state=t[1].audio),M=new $t({props:Xt}),q.push((()=>W(M,"state",Gt)));let Yt=t[3],Wt=[];for(let e=0;e<Yt.length;e+=1)Wt[e]=Ut(Tt(t,Yt,e));return{c(){e=u("div"),n=u("div"),Q(o.$$.fragment),a=p(),Q(_.$$.fragment),v=p(),Q($.$$.fragment),w=p(),Jt&&Jt.c(),k=p(),Q(x.$$.fragment),L=p(),Q(M.$$.fragment),j=p(),O=u("div"),T=u("span"),N=f("Card type:\n"),z=u("select"),I=u("option"),A=u("option"),A.textContent="basic",U=u("option"),U.textContent="verses",P=u("option"),P.textContent="occlusion",H=p(),B=u("span"),X=f("Info: \n"),Y=u("select"),K=u("option"),tt=u("option"),tt.textContent="created",et=u("option"),et.textContent="due date",nt=u("option"),nt.textContent="last review",it=u("option"),it.textContent="editing time",ot=u("option"),ot.textContent="review time",rt=u("option"),rt.textContent="total time",at=u("option"),at.textContent="card type",ct=u("option"),ct.textContent="tags",lt=u("option"),lt.textContent="merit",st=p(),dt=u("div"),ut=u("span"),ft=f("Sort: \n"),pt=u("select"),_t=u("option"),_t.textContent="recent",ht=u("option"),ht.textContent="old",gt=u("option"),gt.textContent="overdue",mt=u("option"),mt.textContent="total time",vt=u("option"),vt.textContent="random",yt=u("option"),yt.textContent="meritorious",bt=p(),wt=u("span"),kt=f("Tag: \n"),xt=u("select"),Ct=u("option");for(let t=0;t<Wt.length;t+=1)Wt[t].c();g(n,"class","tristates svelte-zgasv9"),I.__value="",I.value=I.__value,A.__value="basic",A.value=A.__value,U.__value="verses",U.value=U.__value,P.__value="occlusion",P.value=P.__value,g(z,"class","svelte-zgasv9"),void 0===t[1].card_type&&E((()=>t[14].call(z))),K.__value="",K.value=K.__value,tt.__value="create_date",tt.value=tt.__value,et.__value="due_date",et.value=et.__value,nt.__value="last_review_date",nt.value=nt.__value,it.__value="edit_seconds",it.value=it.__value,ot.__value="review_seconds",ot.value=ot.__value,rt.__value="total_seconds",rt.value=rt.__value,at.__value="card_type",at.value=at.__value,ct.__value="tags",ct.value=ct.__value,lt.__value="merit",lt.value=lt.__value,g(Y,"class","svelte-zgasv9"),void 0===t[2]&&E((()=>t[15].call(Y))),g(O,"class","selectors svelte-zgasv9"),_t.__value="recent",_t.value=_t.__value,ht.__value="old",ht.value=ht.__value,gt.__value="overdue",gt.value=gt.__value,mt.__value="total time",mt.value=mt.__value,vt.__value="random",vt.value=vt.__value,yt.__value="meritorious",yt.value=yt.__value,g(pt,"class","svelte-zgasv9"),void 0===t[0]&&E((()=>t[16].call(pt))),Ct.__value="",Ct.value=Ct.__value,g(xt,"class","svelte-zgasv9"),void 0===t[1].tag&&E((()=>t[17].call(xt))),g(dt,"class","selectors svelte-zgasv9"),g(e,"class","master svelte-zgasv9")},m(i,r){l(i,e,r),c(e,n),V(o,n,null),c(n,a),V(_,n,null),c(n,v),V($,n,null),c(n,w),Jt&&Jt.m(n,null),c(n,k),V(x,n,null),c(n,L),V(M,n,null),c(e,j),c(e,O),c(O,T),c(T,N),c(T,z),c(z,I),c(z,A),c(z,U),c(z,P),b(z,t[1].card_type),c(O,H),c(O,B),c(B,X),c(B,Y),c(Y,K),c(Y,tt),c(Y,et),c(Y,nt),c(Y,it),c(Y,ot),c(Y,rt),c(Y,at),c(Y,ct),c(Y,lt),b(Y,t[2]),c(e,st),c(e,dt),c(dt,ut),c(ut,ft),c(ut,pt),c(pt,_t),c(pt,ht),c(pt,gt),c(pt,mt),c(pt,vt),c(pt,yt),b(pt,t[0]),c(dt,bt),c(dt,wt),c(wt,kt),c(wt,xt),c(xt,Ct);for(let t=0;t<Wt.length;t+=1)Wt[t].m(xt,null);b(xt,t[1].tag),Lt=!0,Mt||(St=[h(z,"change",t[14]),h(Y,"change",t[15]),h(pt,"change",t[16]),h(xt,"change",t[17])],Mt=!0)},p(t,[e]){const i={};2097152&e&&(i.$$scope={dirty:e,ctx:t}),!r&&2&e&&(r=!0,i.state=t[1].due,R((()=>r=!1))),o.$set(i);const a={};2097152&e&&(a.$$scope={dirty:e,ctx:t}),!m&&2&e&&(m=!0,a.state=t[1].new,R((()=>m=!1))),_.$set(a);const c={};2097152&e&&(c.$$scope={dirty:e,ctx:t}),!y&&2&e&&(y=!0,c.state=t[1].deleted,R((()=>y=!1))),$.$set(c),t[1].deleted?Jt?(Jt.p(t,e),2&e&&F(Jt,1)):(Jt=Rt(t),Jt.c(),F(Jt,1),Jt.m(n,k)):Jt&&(J(),G(Jt,1,1,(()=>{Jt=null})),D());const l={};2097152&e&&(l.$$scope={dirty:e,ctx:t}),!C&&2&e&&(C=!0,l.state=t[1].images,R((()=>C=!1))),x.$set(l);const s={};if(2097152&e&&(s.$$scope={dirty:e,ctx:t}),!S&&2&e&&(S=!0,s.state=t[1].audio,R((()=>S=!1))),M.$set(s),2&e&&b(z,t[1].card_type),4&e&&b(Y,t[2]),1&e&&b(pt,t[0]),8&e){let n;for(Yt=t[3],n=0;n<Yt.length;n+=1){const i=Tt(t,Yt,n);Wt[n]?Wt[n].p(i,e):(Wt[n]=Ut(i),Wt[n].c(),Wt[n].m(xt,null))}for(;n<Wt.length;n+=1)Wt[n].d(1);Wt.length=Yt.length}2&e&&b(xt,t[1].tag)},i(t){Lt||(F(o.$$.fragment,t),F(_.$$.fragment,t),F($.$$.fragment,t),F(Jt),F(x.$$.fragment,t),F(M.$$.fragment,t),Lt=!0)},o(t){G(o.$$.fragment,t),G(_.$$.fragment,t),G($.$$.fragment,t),G(Jt),G(x.$$.fragment,t),G(M.$$.fragment,t),Lt=!1},d(t){t&&s(e),Z(o),Z(_),Z($),Jt&&Jt.d(),Z(x),Z(M),d(Wt,t),Mt=!1,i(St)}}}function Ht(t,e,n){let i,{filters:o}=e,{info:r}=e,{collection_tags:a}=e,{sort:c}=e,{card_edited_alert:l}=e,{filtered_cards:s}=e;return t.$$set=t=>{"filters"in t&&n(1,o=t.filters),"info"in t&&n(2,r=t.info),"collection_tags"in t&&n(3,a=t.collection_tags),"sort"in t&&n(0,c=t.sort),"card_edited_alert"in t&&n(7,l=t.card_edited_alert),"filtered_cards"in t&&n(6,s=t.filtered_cards)},t.$$.update=()=>{if(1&t.$$.dirty)switch(c){case"old":n(2,r="create_date");break;case"overdue":n(2,r="due_date");break;case"total time":n(2,r="total_seconds");break;case"meritorious":n(2,r="merit");break;default:n(2,r=null)}},[c,o,r,a,i,function(){confirm("Purge deleted cards?")&&(!async function(t){const e=new URL(ct+"purge");var n=st();n.body=JSON.stringify(t),await fetch(e,n)}(o),n(4,i.style.display="none",i),n(6,s=[]))},s,l,function(e){t.$$.not_equal(o.due,e)&&(o.due=e,n(1,o))},function(e){t.$$.not_equal(o.new,e)&&(o.new=e,n(1,o))},function(e){t.$$.not_equal(o.deleted,e)&&(o.deleted=e,n(1,o))},function(t){q[t?"unshift":"push"]((()=>{i=t,n(4,i)}))},function(e){t.$$.not_equal(o.images,e)&&(o.images=e,n(1,o))},function(e){t.$$.not_equal(o.audio,e)&&(o.audio=e,n(1,o))},function(){o.card_type=w(this),n(1,o)},function(){r=w(this),n(2,r),n(0,c)},function(){c=w(this),n(0,c)},function(){o.tag=w(this),n(1,o)}]}class Bt extends et{constructor(t){super(),tt(this,t,Ht,Pt,r,{filters:1,info:2,collection_tags:3,sort:0,card_edited_alert:7,filtered_cards:6})}}function Jt(t){let e,n,o,r,a,d,_,m,b,w,k,x,C,L,M,S,j,O,T,N;function z(e){t[11](e)}function E(e){t[12](e)}function I(e){t[13](e)}function A(e){t[14](e)}function U(e){t[15](e)}let P={};return void 0!==t[4]&&(P.filtered_cards=t[4]),void 0!==t[2]&&(P.sort=t[2]),void 0!==t[3]&&(P.collection_tags=t[3]),void 0!==t[1]&&(P.info=t[1]),void 0!==t[0]&&(P.filters=t[0]),x=new Bt({props:P}),q.push((()=>W(x,"filtered_cards",z))),q.push((()=>W(x,"sort",E))),q.push((()=>W(x,"collection_tags",I))),q.push((()=>W(x,"info",A))),q.push((()=>W(x,"filters",U))),{c(){e=u("center"),n=f("Search: "),o=u("input"),r=p(),a=u("button"),d=f(t[5]),_=f(" Filters "),m=u("b"),b=f(t[6]),w=p(),k=u("div"),Q(x.$$.fragment),g(o,"type","search"),g(a,"type","button"),y(k,"display",t[7],!1)},m(i,s){l(i,e,s),c(e,n),c(e,o),$(o,t[0].search),c(e,r),c(e,a),c(a,d),c(a,_),c(a,m),c(m,b),l(i,w,s),l(i,k,s),V(x,k,null),O=!0,T||(N=[h(o,"input",t[10]),h(a,"click",t[8])],T=!0)},p(t,[e]){1&e&&$(o,t[0].search),(!O||32&e)&&v(d,t[5]),(!O||64&e)&&v(b,t[6]);const n={};!C&&16&e&&(C=!0,n.filtered_cards=t[4],R((()=>C=!1))),!L&&4&e&&(L=!0,n.sort=t[2],R((()=>L=!1))),!M&&8&e&&(M=!0,n.collection_tags=t[3],R((()=>M=!1))),!S&&2&e&&(S=!0,n.info=t[1],R((()=>S=!1))),!j&&1&e&&(j=!0,n.filters=t[0],R((()=>j=!1))),x.$set(n),128&e&&y(k,"display",t[7],!1)},i(t){O||(F(x.$$.fragment,t),O=!0)},o(t){G(x.$$.fragment,t),O=!1},d(t){t&&s(e),t&&s(w),t&&s(k),Z(x),T=!1,i(N)}}}function Dt(t,e,n){let i,o,r,{filters:a}=e,{info:c}=e,{sort:l}=e,{collection_tags:s}=e,{filtered_cards:d}=e,u=!1;return t.$$set=t=>{"filters"in t&&n(0,a=t.filters),"info"in t&&n(1,c=t.info),"sort"in t&&n(2,l=t.sort),"collection_tags"in t&&n(3,s=t.collection_tags),"filtered_cards"in t&&n(4,d=t.filtered_cards)},t.$$.update=()=>{512&t.$$.dirty&&n(7,i=u?"block":"none"),512&t.$$.dirty&&n(6,o=u?"-":"+"),512&t.$$.dirty&&n(5,r=u?"Less":"More")},[a,c,l,s,d,r,o,i,()=>{n(9,u=!u)},u,function(){a.search=this.value,n(0,a)},function(t){d=t,n(4,d)},function(t){l=t,n(2,l)},function(t){s=t,n(3,s)},function(t){c=t,n(1,c)},function(t){a=t,n(0,a)}]}class Ft extends et{constructor(t){super(),tt(this,t,Dt,Jt,r,{filters:0,info:1,sort:2,collection_tags:3,filtered_cards:4})}}const{window:Gt}=X;function Xt(t,e,n){const i=t.slice();return i[35]=e[n],i}function Yt(t,e,n){const i=t.slice();return i[38]=e[n],i}function Wt(t){let e,n,o,r,a,c,d,_;return{c(){e=f("Hello, "),n=f(t[0]),o=p(),r=u("a"),r.textContent="sign out",a=f(" or\n        "),c=u("a"),c.textContent="switch account",g(r,"class","login_button svelte-sxvern"),g(c,"class","login_button svelte-sxvern")},m(i,s){l(i,e,s),l(i,n,s),l(i,o,s),l(i,r,s),l(i,a,s),l(i,c,s),d||(_=[h(r,"click",t[17]),h(c,"click",t[18])],d=!0)},p(t,e){1&e[0]&&v(n,t[0])},d(t){t&&s(e),t&&s(n),t&&s(o),t&&s(r),t&&s(a),t&&s(c),d=!1,i(_)}}}function Qt(e){let n,i,o,r;return{c(){n=f("Welcome, guest\n        "),i=u("button"),i.textContent="login / register",g(i,"class","login_button svelte-sxvern"),g(i,"type","button")},m(t,a){l(t,n,a),l(t,i,a),o||(r=h(i,"click",e[16]),o=!0)},p:t,d(t){t&&s(n),t&&s(i),o=!1,r()}}}function Vt(t,e){let n,i,o,r,a,c;function d(t){e[29](t)}function u(t){e[30](t)}function f(t){e[31](t)}let p={card:e[38]};return void 0!==e[7]&&(p.card_edited_alert=e[7]),void 0!==e[5]&&(p.info=e[5]),void 0!==e[1]&&(p.state=e[1]),i=new St({props:p}),q.push((()=>W(i,"card_edited_alert",d))),q.push((()=>W(i,"info",u))),q.push((()=>W(i,"state",f))),{key:t,first:null,c(){n=_(),Q(i.$$.fragment),this.first=n},m(t,e){l(t,n,e),V(i,t,e),c=!0},p(t,n){e=t;const c={};4100&n[0]&&(c.card=e[38]),!o&&128&n[0]&&(o=!0,c.card_edited_alert=e[7],R((()=>o=!1))),!r&&32&n[0]&&(r=!0,c.info=e[5],R((()=>r=!1))),!a&&2&n[0]&&(a=!0,c.state=e[1],R((()=>a=!1))),i.$set(c)},i(t){c||(F(i.$$.fragment,t),c=!0)},o(t){G(i.$$.fragment,t),c=!1},d(t){t&&s(n),Z(i,t)}}}function Zt(t){let e,n,i,o=[],r=new Map;function a(...e){return t[28](t[35],...e)}let d=t[2].filter(a);const f=t=>t[38].id;for(let e=0;e<d.length;e+=1){let n=Yt(t,d,e),i=f(n);r.set(i,o[e]=Vt(i,n))}return{c(){e=u("div");for(let t=0;t<o.length;t+=1)o[t].c();n=p(),g(e,"class","column")},m(t,r){l(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);c(e,n),i=!0},p(i,c){t=i,4262&c[0]&&(d=t[2].filter(a),J(),o=function(t,e,n,i,o,r,a,c,l,s,d,u){let f=t.length,p=r.length,_=f;const h={};for(;_--;)h[t[_].key]=_;const g=[],m=new Map,v=new Map;for(_=p;_--;){const t=u(o,r,_),c=n(t);let l=a.get(c);l?i&&l.p(t,e):(l=s(c,t),l.c()),m.set(c,g[_]=l),c in h&&v.set(c,Math.abs(_-h[c]))}const $=new Set,y=new Set;function b(t){F(t,1),t.m(c,d),a.set(t.key,t),d=t.first,p--}for(;f&&p;){const e=g[p-1],n=t[f-1],i=e.key,o=n.key;e===n?(d=e.first,f--,p--):m.has(o)?!a.has(i)||$.has(i)?b(e):y.has(o)?f--:v.get(i)>v.get(o)?(y.add(i),b(e)):($.add(o),f--):(l(n,a),f--)}for(;f--;){const e=t[f];m.has(e.key)||l(e,a)}for(;p;)b(g[p-1]);return g}(o,c,f,1,t,d,r,e,Y,Vt,n,Yt),D())},i(t){if(!i){for(let t=0;t<d.length;t+=1)F(o[t]);i=!0}},o(t){for(let t=0;t<o.length;t+=1)G(o[t]);i=!1},d(t){t&&s(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Kt(t){let e,n,i,o,r,a,f,_,m,v,$,b,w,k,x,C,L,M,S,j,O,T,N,z,I;function A(t,e){return"guest"===t[0]?Qt:Wt}E(t[15]);let U=A(t),P=U(t);function H(e){t[19](e)}let B={};function X(e){t[21](e)}void 0!==t[4]&&(B.due_count=t[4]),f=new wt({props:B}),q.push((()=>W(f,"due_count",H))),f.$on("click",t[20]);let Y={};function K(e){t[22](e)}function tt(e){t[23](e)}function et(e){t[24](e)}function nt(e){t[25](e)}function it(e){t[26](e)}function ot(e){t[27](e)}void 0!==t[6]&&(Y.created_count=t[6]),v=new Ct({props:Y}),q.push((()=>W(v,"created_count",X))),v.$on("click",t[13]);let rt={};void 0!==t[2]&&(rt.filtered_cards=t[2]),void 0!==t[10]&&(rt.search=t[10]),void 0!==t[9]&&(rt.sort=t[9]),void 0!==t[3]&&(rt.filters=t[3]),void 0!==t[5]&&(rt.info=t[5]),void 0!==t[8]&&(rt.collection_tags=t[8]),k=new Ft({props:rt}),q.push((()=>W(k,"filtered_cards",K))),q.push((()=>W(k,"search",tt))),q.push((()=>W(k,"sort",et))),q.push((()=>W(k,"filters",nt))),q.push((()=>W(k,"info",it))),q.push((()=>W(k,"collection_tags",ot)));let at=[...Array(t[12]).keys()],ct=[];for(let e=0;e<at.length;e+=1)ct[e]=Zt(Xt(t,at,e));const lt=t=>G(ct[t],1,1,(()=>{ct[t]=null}));return{c(){e=u("body"),n=u("div"),P.c(),i=p(),o=u("a"),o.textContent="Links",r=p(),a=u("div"),Q(f.$$.fragment),m=p(),Q(v.$$.fragment),b=p(),w=u("div"),Q(k.$$.fragment),O=p(),T=u("div");for(let t=0;t<ct.length;t+=1)ct[t].c();y(o,"float","right"),y(o,"position","relative"),g(o,"href","http://docs.vinca.study/links.html"),g(a,"id","major_buttons"),g(a,"class","svelte-sxvern"),g(n,"class","top svelte-sxvern"),y(w,"margin","20px",!1),g(T,"class","columns svelte-sxvern")},m(s,d){l(s,e,d),c(e,n),P.m(n,null),c(n,i),c(n,o),c(n,r),c(n,a),V(f,a,null),c(a,m),V(v,a,null),c(e,b),c(e,w),V(k,w,null),c(e,O),c(e,T);for(let t=0;t<ct.length;t+=1)ct[t].m(T,null);N=!0,z||(I=h(Gt,"resize",t[15]),z=!0)},p(t,e){U===(U=A(t))&&P?P.p(t,e):(P.d(1),P=U(t),P&&(P.c(),P.m(n,i)));const o={};!_&&16&e[0]&&(_=!0,o.due_count=t[4],R((()=>_=!1))),f.$set(o);const r={};!$&&64&e[0]&&($=!0,r.created_count=t[6],R((()=>$=!1))),v.$set(r);const a={};if(!x&&4&e[0]&&(x=!0,a.filtered_cards=t[2],R((()=>x=!1))),!C&&1024&e[0]&&(C=!0,a.search=t[10],R((()=>C=!1))),!L&&512&e[0]&&(L=!0,a.sort=t[9],R((()=>L=!1))),!M&&8&e[0]&&(M=!0,a.filters=t[3],R((()=>M=!1))),!S&&32&e[0]&&(S=!0,a.info=t[5],R((()=>S=!1))),!j&&256&e[0]&&(j=!0,a.collection_tags=t[8],R((()=>j=!1))),k.$set(a),4262&e[0]){let n;for(at=[...Array(t[12]).keys()],n=0;n<at.length;n+=1){const i=Xt(t,at,n);ct[n]?(ct[n].p(i,e),F(ct[n],1)):(ct[n]=Zt(i),ct[n].c(),F(ct[n],1),ct[n].m(T,null))}for(J(),n=at.length;n<ct.length;n+=1)lt(n);D()}},i(t){if(!N){F(f.$$.fragment,t),F(v.$$.fragment,t),F(k.$$.fragment,t);for(let t=0;t<at.length;t+=1)F(ct[t]);N=!0}},o(t){G(f.$$.fragment,t),G(v.$$.fragment,t),G(k.$$.fragment,t),ct=ct.filter(Boolean);for(let t=0;t<ct.length;t+=1)G(ct[t]);N=!1},d(t){t&&s(e),P.d(),Z(f),Z(v),Z(k),d(ct,t),z=!1,I()}}}function te(t,e,n){let i,o,{username:r}=e,{state:a}=e,{filtered_cards:c}=e,{cached_cards:l}=e,{filters:s}=e,{due_count:d}=e,{info:u}=e,{created_count:f}=e,{card_edited_alert:p}=e,{collection_tags:_}=e,{sort:h}=e,{search:g}=e;return t.$$set=t=>{"username"in t&&n(0,r=t.username),"state"in t&&n(1,a=t.state),"filtered_cards"in t&&n(2,c=t.filtered_cards),"cached_cards"in t&&n(14,l=t.cached_cards),"filters"in t&&n(3,s=t.filters),"due_count"in t&&n(4,d=t.due_count),"info"in t&&n(5,u=t.info),"created_count"in t&&n(6,f=t.created_count),"card_edited_alert"in t&&n(7,p=t.card_edited_alert),"collection_tags"in t&&n(8,_=t.collection_tags),"sort"in t&&n(9,h=t.sort),"search"in t&&n(10,g=t.search)},t.$$.update=()=>{2048&t.$$.dirty[0]&&n(12,i=Math.floor(o/450)||1)},[r,a,c,s,d,u,f,p,_,h,g,o,i,function(){let t={...rt()};n(1,a.card_to_edit=t,a),n(1,a.edit_mode=!0,a)},l,function(){n(11,o=Gt.innerWidth)},()=>{n(0,r="none")},()=>{n(0,r="guest"),window.localStorage.clear()},()=>{n(0,r="none")},function(t){d=t,n(4,d)},()=>{n(1,a.reviewing=!0,a)},function(t){f=t,n(6,f)},function(t){c=t,n(2,c)},function(t){g=t,n(10,g)},function(t){h=t,n(9,h)},function(t){s=t,n(3,s)},function(t){u=t,n(5,u)},function(t){_=t,n(8,_)},(t,e,n,o)=>n%i===t,function(t){p=t,n(7,p)},function(t){u=t,n(5,u)},function(t){a=t,n(1,a)}]}class ee extends et{constructor(t){super(),tt(this,t,te,Kt,r,{username:0,state:1,filtered_cards:2,cached_cards:14,filters:3,due_count:4,info:5,created_count:6,card_edited_alert:7,collection_tags:8,sort:9,search:10},null,[-1,-1])}}function ne(e){let n,i,o;return{c(){n=u("textarea"),g(n,"class","svelte-o80sq3")},m(t,r){l(t,n,r),$(n,e[0]),e[4](n),i||(o=h(n,"input",e[3]),i=!0)},p(t,[e]){1&e&&$(n,t[0])},i:t,o:t,d(t){t&&s(n),e[4](null),i=!1,o()}}}function ie(t,e,n){let i,{value:o=null}=e,{placeholder:r}=e;return t.$$set=t=>{"value"in t&&n(0,o=t.value),"placeholder"in t&&n(2,r=t.placeholder)},t.$$.update=()=>{6&t.$$.dirty&&i&&n(1,i.placeholder=r,i)},[o,i,r,function(){o=this.value,n(0,o)},function(t){q[t?"unshift":"push"]((()=>{i=t,n(1,i),n(2,r)}))}]}class oe extends et{constructor(t){super(),tt(this,t,ie,ne,r,{value:0,placeholder:2})}}function re(e){let n,o,r,a,d,_,m,$,b,w,k,x;return{c(){n=u("input"),o=p(),r=u("button"),a=f(" \n\t♬\n\t \n\t"),d=u("span"),d.textContent="↑",_=f("\n\t \n\t🕪\n\t"),m=u("br"),$=p(),b=u("span"),w=f(e[1]),g(n,"type","file"),g(n,"accept",".mp3,.wav,.ogg"),y(n,"display","none"),y(d,"font-size","32px"),y(b,"font-size","16px"),g(r,"class","svelte-1ur4qxs")},m(t,i){l(t,n,i),e[2](n),l(t,o,i),l(t,r,i),c(r,a),c(r,d),c(r,_),c(r,m),c(r,$),c(r,b),c(b,w),k||(x=[h(n,"change",e[3]),h(r,"click",e[4])],k=!0)},p(t,[e]){2&e&&v(w,t[1])},i:t,o:t,d(t){t&&s(n),e[2](null),t&&s(o),t&&s(r),k=!1,i(x)}}}function ae(t,e,n){let i,o="Choose audio";return[i,o,function(t){q[t?"unshift":"push"]((()=>{i=t,n(0,i)}))},function(){o=this.value,n(1,o)},()=>{i.click()}]}class ce extends et{constructor(t){super(),tt(this,t,ae,re,r,{})}}function le(e){let n,o,r,a,d,_,m,$,b,w,k,x,C=(e[0]?"N/A":e[2])+"";return{c(){n=u("input"),o=p(),r=u("button"),a=f(" \n\t🖼\n\t \n\t"),d=u("span"),d.textContent="↑",_=f("\n\t \n\t📷\n\t"),m=u("br"),$=p(),b=u("span"),w=f(C),g(n,"type","file"),g(n,"accept","image/*"),y(n,"display","none"),y(d,"font-size","32px"),y(b,"font-size","16px"),r.disabled=e[0],g(r,"class","svelte-12cjody"),y(r,"background-color",e[0]?"lightgray":"white",!1)},m(t,i){l(t,n,i),e[6](n),l(t,o,i),l(t,r,i),c(r,a),c(r,d),c(r,_),c(r,m),c(r,$),c(r,b),c(b,w),e[7](r),k||(x=[h(n,"change",e[4]),h(r,"click",e[8])],k=!0)},p(t,[e]){5&e&&C!==(C=(t[0]?"N/A":t[2])+"")&&v(w,C),1&e&&(r.disabled=t[0]),1&e&&y(r,"background-color",t[0]?"lightgray":"white",!1)},i:t,o:t,d(t){t&&s(n),e[6](null),t&&s(o),t&&s(r),e[7](null),k=!1,i(x)}}}function se(t,e,n){let i,o,{image_id:r}=e,a=null,{disabled:c=!1}=e,l="Choose Image";M((async()=>{if(0!=r){const t=await ht(r);n(3,o.style["background-image"]="url("+t+")",o)}}));return t.$$set=t=>{"image_id"in t&&n(5,r=t.image_id),"disabled"in t&&n(0,c=t.disabled)},[c,i,l,o,function(){let t=i.files[0];n(2,l=t.name);const e=new FileReader;e.readAsDataURL(t),e.onload=async()=>{let t=await pt(e.result);n(5,r=await t),a="url("+e.result+")",n(3,o.style["background-image"]=a,o)}},r,function(t){q[t?"unshift":"push"]((()=>{i=t,n(1,i)}))},function(t){q[t?"unshift":"push"]((()=>{o=t,n(3,o)}))},()=>{i.click()}]}class de extends et{constructor(t){super(),tt(this,t,se,le,r,{image_id:5,disabled:0})}}function ue(t){let e,n,i,o,r,a,d,f,_,h,m;function v(e){t[7](e)}function $(e){t[8](e)}let y={};function b(e){t[9](e)}void 0!==t[0]&&(y.value=t[0]),void 0!==t[2]&&(y.placeholder=t[2]),n=new oe({props:y}),q.push((()=>W(n,"value",v))),q.push((()=>W(n,"placeholder",$))),d=new ce({});let w={disabled:t[3]};return void 0!==t[1]&&(w.image_id=t[1]),_=new de({props:w}),q.push((()=>W(_,"image_id",b))),{c(){e=u("div"),Q(n.$$.fragment),r=p(),a=u("div"),Q(d.$$.fragment),f=p(),Q(_.$$.fragment),g(a,"id","media"),g(a,"class","svelte-uhg411"),g(e,"id","main"),g(e,"class","svelte-uhg411")},m(t,i){l(t,e,i),V(n,e,null),c(e,r),c(e,a),V(d,a,null),c(a,f),V(_,a,null),m=!0},p(t,[e]){const r={};!i&&1&e&&(i=!0,r.value=t[0],R((()=>i=!1))),!o&&4&e&&(o=!0,r.placeholder=t[2],R((()=>o=!1))),n.$set(r);const a={};8&e&&(a.disabled=t[3]),!h&&2&e&&(h=!0,a.image_id=t[1],R((()=>h=!1))),_.$set(a)},i(t){m||(F(n.$$.fragment,t),F(d.$$.fragment,t),F(_.$$.fragment,t),m=!0)},o(t){G(n.$$.fragment,t),G(d.$$.fragment,t),G(_.$$.fragment,t),m=!1},d(t){t&&s(e),Z(n),Z(d),Z(_)}}}function fe(t,e,n){let{text:i}=e,{image_id:o}=e,{audio_id:r}=e,{audio_file:a}=e,{image_file:c}=e,{placeholder:l}=e,{image_picker_disabled:s}=e;return t.$$set=t=>{"text"in t&&n(0,i=t.text),"image_id"in t&&n(1,o=t.image_id),"audio_id"in t&&n(4,r=t.audio_id),"audio_file"in t&&n(5,a=t.audio_file),"image_file"in t&&n(6,c=t.image_file),"placeholder"in t&&n(2,l=t.placeholder),"image_picker_disabled"in t&&n(3,s=t.image_picker_disabled)},[i,o,l,s,r,a,c,function(t){i=t,n(0,i)},function(t){l=t,n(2,l)},function(t){o=t,n(1,o)}]}class pe extends et{constructor(t){super(),tt(this,t,fe,ue,r,{text:0,image_id:1,audio_id:4,audio_file:5,image_file:6,placeholder:2,image_picker_disabled:3})}}function _e(t,e,n){const i=t.slice();return i[10]=e[n],i[11]=e,i[12]=n,i}function he(t){let e,n,i,o,r,a,d,_=t[10]+"";function m(){t[8].call(n,t[10])}return{c(){e=u("label"),n=u("input"),i=p(),o=f(_),r=p(),g(n,"type","checkbox"),g(e,"class","svelte-f8t21t")},m(s,u){l(s,e,u),c(e,n),n.checked=t[1][t[10]],c(e,i),c(e,o),c(e,r),a||(d=h(n,"change",m),a=!0)},p(e,i){t=e,2&i&&(n.checked=t[1][t[10]]),2&i&&_!==(_=t[10]+"")&&v(o,_)},d(t){t&&s(e),a=!1,d()}}}function ge(t){let e,n=t[10].includes(t[2]),i=n&&he(t);return{c(){i&&i.c(),e=_()},m(t,n){i&&i.m(t,n),l(t,e,n)},p(t,o){6&o&&(n=t[10].includes(t[2])),n?i?i.p(t,o):(i=he(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},d(t){i&&i.d(t),t&&s(e)}}}function me(e){let n,o,r,a,_,m,y,b,w,k,x,C=e[0].tags+"",L=Object.keys(e[1]).reverse(),M=[];for(let t=0;t<L.length;t+=1)M[t]=ge(_e(e,L,t));return{c(){n=u("div"),o=u("p"),r=u("b"),a=f(C),_=p(),m=u("button"),m.textContent="+ new tag",y=f(" \n  "),b=u("input"),w=p();for(let t=0;t<M.length;t+=1)M[t].c();g(o,"id","tags_list"),g(o,"class","svelte-f8t21t"),g(m,"type","button"),g(b,"type","search"),g(b,"placeholder","search"),g(n,"id","tags_bar"),g(n,"class","svelte-f8t21t")},m(t,i){l(t,n,i),c(n,o),c(o,r),c(r,a),c(n,_),c(n,m),c(n,y),c(n,b),$(b,e[2]),c(n,w);for(let t=0;t<M.length;t+=1)M[t].m(n,null);k||(x=[h(m,"click",e[6]),h(b,"input",e[7])],k=!0)},p(t,[e]){if(1&e&&C!==(C=t[0].tags+"")&&v(a,C),4&e&&$(b,t[2]),6&e){let i;for(L=Object.keys(t[1]).reverse(),i=0;i<L.length;i+=1){const o=_e(t,L,i);M[i]?M[i].p(o,e):(M[i]=ge(o),M[i].c(),M[i].m(n,null))}for(;i<M.length;i+=1)M[i].d(1);M.length=L.length}},i:t,o:t,d(t){t&&s(n),d(M,t),k=!1,i(x)}}}function ve(t,e,n){let i,{card:o}=e,{collection_tags:r}=e;function a(t){n(4,r=[t,...r]),n(1,c[t]=!0,c)}let c=r.reduce(((t,e)=>(t[e]=!1,t)),new Map);const l=""===o.tags?[]:o.tags.split(",");for(tag in l)c[tag]=!0;let s="";return t.$$set=t=>{"card"in t&&n(0,o=t.card),"collection_tags"in t&&n(4,r=t.collection_tags)},t.$$.update=()=>{2&t.$$.dirty&&n(5,i=Object.entries(c).filter((t=>t[1])).map((t=>t[0]))),32&t.$$.dirty&&n(0,o.tags=i.join(", "),o)},[o,c,s,a,r,i,()=>{a(prompt("new tag"))},function(){s=this.value,n(2,s)},function(t){c[t]=this.checked,n(1,c)}]}class $e extends et{constructor(t){super(),tt(this,t,ve,me,r,{card:0,collection_tags:4})}}function ye(t,e,n){const i=t.slice();return i[9]=e[n],i}function be(t){let e,n,i,o,r,a,d,_,m=t[9]+"";return{c(){e=u("label"),n=u("input"),r=p(),a=f(m),g(n,"type","radio"),g(n,"name","card_type"),n.__value=i=t[9],n.value=n.__value,n.checked=o=t[0].card_type===t[9],g(n,"class","svelte-aj94bp"),t[6][0].push(n),g(e,"class","svelte-aj94bp")},m(i,o){l(i,e,o),c(e,n),n.checked=n.__value===t[0].card_type,c(e,r),c(e,a),d||(_=h(n,"change",t[5]),d=!0)},p(t,e){1&e&&o!==(o=t[0].card_type===t[9])&&(n.checked=o),1&e&&(n.checked=n.__value===t[0].card_type)},d(i){i&&s(e),t[6][0].splice(t[6][0].indexOf(n),1),d=!1,_()}}}function we(t){let e,n,o,r,a,_,v,b,w,k,x,C,L,M,S,j;n=new Ot({props:{text:"<b>Basic</b>:  class question and answer card <br><br>\n                <b>Verses</b>: tests you line by line (useful for poetry and oratory) <br><br>\n                <b>Occlusion</b>: generate several cards by covering up parts of a map or diagram (useful for geography or anatomy)"}});let q=t[4],O=[];for(let e=0;e<q.length;e+=1)O[e]=be(ye(t,q,e));return x=new Ot({props:{text:"Quantify in minutes the worth of remembering this knowledge.<br><br>\n        This is difficult.<br><br>\n        This lets you see if the time spent studying a card has been worthwhile. <br><br>\n        It also lets you sort your cards to find the best ones."}}),{c(){e=u("center"),Q(n.$$.fragment),o=p();for(let t=0;t<O.length;t+=1)O[t].c();r=p(),a=u("button"),a.textContent="cancel",_=p(),v=u("button"),v.textContent="preview",b=p(),w=u("button"),w.textContent="save",k=p(),Q(x.$$.fragment),C=f("\nMerit\n"),L=u("input"),g(a,"class","submit_button svelte-aj94bp"),g(v,"class","submit_button svelte-aj94bp"),g(w,"class","submit_button svelte-aj94bp"),g(L,"type","number"),g(L,"min","1"),g(L,"max","60"),y(L,"width","50px",!1)},m(i,s){l(i,e,s),V(n,e,null),c(e,o);for(let t=0;t<O.length;t+=1)O[t].m(e,null);c(e,r),c(e,a),c(e,_),c(e,v),c(e,b),c(e,w),c(e,k),V(x,e,null),c(e,C),c(e,L),$(L,t[0].merit),M=!0,S||(j=[h(a,"click",t[2]),h(v,"click",t[3]),h(w,"click",t[1]),h(L,"input",t[7])],S=!0)},p(t,[n]){if(17&n){let i;for(q=t[4],i=0;i<q.length;i+=1){const o=ye(t,q,i);O[i]?O[i].p(o,n):(O[i]=be(o),O[i].c(),O[i].m(e,r))}for(;i<O.length;i+=1)O[i].d(1);O.length=q.length}1&n&&m(L.value)!==t[0].merit&&$(L,t[0].merit)},i(t){M||(F(n.$$.fragment,t),F(x.$$.fragment,t),M=!0)},o(t){G(n.$$.fragment,t),G(x.$$.fragment,t),M=!1},d(t){t&&s(e),Z(n),d(O,t),Z(x),S=!1,i(j)}}}function ke(t,e,n){let{card:i}=e;const o=S();return t.$$set=t=>{"card"in t&&n(0,i=t.card)},[i,()=>{o("save")},()=>{o("cancel")},()=>{o("preview")},["basic","verses","occlusion"],function(){i.card_type=this.__value,n(0,i)},[[]],function(){i.merit=m(this.value),n(0,i)}]}class xe extends et{constructor(t){super(),tt(this,t,ke,we,r,{card:0})}}function Ce(t){let e,n,o,r,a,d,_,m,$,b=t[0].width>45&&t[0].height>20?"✣ Move":"";return{c(){e=u("div"),n=u("button"),o=f(b),r=p(),a=u("button"),a.textContent="✗ Del",d=p(),_=u("button"),_.textContent="⤡",g(n,"id","moveButton"),g(n,"type","button"),g(n,"class","svelte-xqaxsl"),g(a,"id","deleteButton"),g(a,"type","button"),g(a,"class","svelte-xqaxsl"),g(_,"id","resizeButton"),g(_,"type","button"),g(_,"class","svelte-xqaxsl"),y(e,"position","absolute",!1),y(e,"top",t[0].top+"px",!1),y(e,"left",t[0].left+"px",!1),y(e,"width",t[0].width+"px",!1),y(e,"height",t[0].height+"px",!1)},m(i,s){l(i,e,s),c(e,n),c(n,o),c(e,r),c(e,a),c(e,d),c(e,_),m||($=[h(n,"mousedown",t[2]),h(n,"click",Me),h(a,"click",t[3]),h(_,"mousedown",t[1]),h(_,"click",Me)],m=!0)},p(t,n){1&n&&b!==(b=t[0].width>45&&t[0].height>20?"✣ Move":"")&&v(o,b),1&n&&y(e,"top",t[0].top+"px",!1),1&n&&y(e,"left",t[0].left+"px",!1),1&n&&y(e,"width",t[0].width+"px",!1),1&n&&y(e,"height",t[0].height+"px",!1)},d(t){t&&s(e),m=!1,i($)}}}function Le(e){let n,i=!e[0].deleted&&Ce(e);return{c(){i&&i.c(),n=_()},m(t,e){i&&i.m(t,e),l(t,n,e)},p(t,[e]){t[0].deleted?i&&(i.d(1),i=null):i?i.p(t,e):(i=Ce(t),i.c(),i.m(n.parentNode,n))},i:t,o:t,d(t){i&&i.d(t),t&&s(n)}}}function Me(t){t.stopPropagation()}function Se(t,e,n){let i,o,{self:r={deleted:!1,id:0,left:100,top:100,width:200,height:100}}=e;return t.$$set=t=>{"self"in t&&n(0,r=t.self)},[r,function(t){i={x:t.clientX,y:t.clientY},o={...r},document.onmousemove=t=>{n(0,r.width=o.width+(t.clientX-i.x),r),n(0,r.height=o.height+(t.clientY-i.y),r)},document.onmouseup=t=>{document.onmousemove=null}},function(t){i={x:t.clientX,y:t.clientY},o={...r},document.onmousemove=t=>{n(0,r.left=o.left+(t.clientX-i.x),r),n(0,r.top=o.top+(t.clientY-i.y),r)},document.onmouseup=t=>{document.onmousemove=null}},function(t){(0==r.id||confirm("This will trigger a card to be deleted on save."))&&(n(0,r.deleted=!0,r),Me(t))}]}class je extends et{constructor(t){super(),tt(this,t,Se,Le,r,{self:0})}}function qe(t,e,n){const i=t.slice();return i[19]=e[n],i[20]=e,i[21]=n,i}function Oe(t){let e,n,i;function o(e){t[12](e,t[19],t[20],t[21])}let r={};return void 0!==t[19]&&(r.self=t[19]),e=new je({props:r}),q.push((()=>W(e,"self",o))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),i=!0},p(i,o){t=i;const r={};!n&&1&o&&(n=!0,r.self=t[19],R((()=>n=!1))),e.$set(r)},i(t){i||(F(e.$$.fragment,t),i=!0)},o(t){G(e.$$.fragment,t),i=!1},d(t){Z(e,t)}}}function Te(t){let e;return{c(){e=f("Click to Upload an Image")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function Ne(t){let e,n,r,a,_,m,v,$,b,w,k,x,C,L,M,S,j,q,O,T,N=t[0].rectangles,z=[];for(let e=0;e<N.length;e+=1)z[e]=Oe(qe(t,N,e));const E=t=>G(z[t],1,1,(()=>{z[t]=null}));let R=!t[1]&&Te();return{c(){e=u("input"),n=p(),r=u("center"),a=u("button"),a.textContent="+ new rectangle",_=p(),m=u("label"),v=u("input"),$=f(" Hide All"),b=p(),w=u("label"),k=u("input"),x=f(" Hide One"),C=p(),L=u("button");for(let t=0;t<z.length;t+=1)z[t].c();M=p(),S=u("button"),S.textContent="⤡ Resize",j=p(),R&&R.c(),g(e,"type","file"),g(e,"accept","image/*"),y(e,"display","none"),g(a,"type","button"),g(v,"type","radio"),v.__value=!0,v.value=v.__value,g(v,"name","hide"),t[10][0].push(v),y(m,"display","inline",!1),g(k,"type","radio"),k.__value=!1,k.value=k.__value,g(k,"name","hide"),t[10][0].push(k),y(w,"display","inline",!1),g(S,"class","imageSizer svelte-o9mhat"),g(L,"class","occlusionImage svelte-o9mhat"),y(L,"width",t[0].box.width+"px",!1),y(L,"height",t[0].box.height+"px",!1)},m(i,s){l(i,e,s),t[8](e),l(i,n,s),l(i,r,s),c(r,a),c(r,_),c(r,m),c(m,v),v.checked=v.__value===t[0].hide_all,c(m,$),c(r,b),c(r,w),c(w,k),k.checked=k.__value===t[0].hide_all,c(w,x),l(i,C,s),l(i,L,s);for(let t=0;t<z.length;t+=1)z[t].m(L,null);c(L,M),c(L,S),t[13](S),c(L,j),R&&R.m(L,null),t[14](L),q=!0,O||(T=[h(e,"change",t[6]),h(a,"click",t[7]),h(v,"change",t[9]),h(k,"change",t[11]),h(S,"mousedown",t[5]),h(S,"click",ze),h(L,"click",(function(){o(t[3].click())&&t[3].click().apply(this,arguments)}))],O=!0)},p(e,[n]){if(t=e,1&n&&(v.checked=v.__value===t[0].hide_all),1&n&&(k.checked=k.__value===t[0].hide_all),1&n){let e;for(N=t[0].rectangles,e=0;e<N.length;e+=1){const i=qe(t,N,e);z[e]?(z[e].p(i,n),F(z[e],1)):(z[e]=Oe(i),z[e].c(),F(z[e],1),z[e].m(L,M))}for(J(),e=N.length;e<z.length;e+=1)E(e);D()}t[1]?R&&(R.d(1),R=null):R||(R=Te(),R.c(),R.m(L,null)),1&n&&y(L,"width",t[0].box.width+"px",!1),1&n&&y(L,"height",t[0].box.height+"px",!1)},i(t){if(!q){for(let t=0;t<N.length;t+=1)F(z[t]);q=!0}},o(t){z=z.filter(Boolean);for(let t=0;t<z.length;t+=1)G(z[t]);q=!1},d(o){o&&s(e),t[8](null),o&&s(n),o&&s(r),t[10][0].splice(t[10][0].indexOf(v),1),t[10][0].splice(t[10][0].indexOf(k),1),o&&s(C),o&&s(L),d(z,o),t[13](null),R&&R.d(),t[14](null),O=!1,i(T)}}}const ze=t=>{t.stopPropagation()};function Ee(t,e,n){let i,o,r,a,c,{data:l}=e,{image_id:s}=e,d=null;M((async()=>{0!=s&&(d=await ht(s),n(2,i.style["background-image"]="url("+d+")",i))}));const u={id:0,top:50,left:50,height:100,width:200,deleted:!1};return t.$$set=t=>{"data"in t&&n(0,l=t.data),"image_id"in t&&n(1,s=t.image_id)},[l,s,i,o,r,function(t){a={x:t.clientX,y:t.clientY},c={width:l.box.width,height:l.box.height},document.onmousemove=t=>{n(0,l.box.width=c.width+(t.clientX-a.x),l),n(0,l.box.height=c.height+(t.clientY-a.y),l)},document.onmouseup=t=>{document.onmousemove=null}},function(){let t=o.files[0];const e=new FileReader;e.readAsDataURL(t),e.onload=async()=>{let t=await pt(e.result);n(1,s=await t),d="url("+e.result+")",n(2,i.style["background-image"]=d,i)}},function(){var t={...u};l.rectangles.push(t),n(0,l)},function(t){q[t?"unshift":"push"]((()=>{o=t,n(3,o)}))},function(){l.hide_all=this.__value,n(0,l)},[[]],function(){l.hide_all=this.__value,n(0,l)},function(t,e,i,o){i[o]=t,n(0,l)},function(t){q[t?"unshift":"push"]((()=>{r=t,n(4,r)}))},function(t){q[t?"unshift":"push"]((()=>{i=t,n(2,i)}))}]}class Re extends et{constructor(t){super(),tt(this,t,Ee,Ne,r,{data:0,image_id:1})}}function Ie(t){let e,n,i,o,r,a;function c(e){t[12](e)}function d(e){t[13](e)}let f={};return void 0!==t[2]&&(f.data=t[2]),void 0!==t[1].front_image_id&&(f.image_id=t[1].front_image_id),e=new Re({props:f}),q.push((()=>W(e,"data",c))),q.push((()=>W(e,"image_id",d))),{c(){Q(e.$$.fragment),o=p(),r=u("hr")},m(t,n){V(e,t,n),l(t,o,n),l(t,r,n),a=!0},p(t,o){const r={};!n&&4&o&&(n=!0,r.data=t[2],R((()=>n=!1))),!i&&2&o&&(i=!0,r.image_id=t[1].front_image_id,R((()=>i=!1))),e.$set(r)},i(t){a||(F(e.$$.fragment,t),a=!0)},o(t){G(e.$$.fragment,t),a=!1},d(t){Z(e,t),t&&s(o),t&&s(r)}}}function Ae(t){let e,n,i,o,r,a;function c(e){t[16](e)}function d(e){t[17](e)}let f={image_picker_disabled:"occlusion"===t[1].card_type,placeholder:t[3].back};return void 0!==t[1].back_text&&(f.text=t[1].back_text),void 0!==t[1].back_image_id&&(f.image_id=t[1].back_image_id),e=new pe({props:f}),q.push((()=>W(e,"text",c))),q.push((()=>W(e,"image_id",d))),{c(){Q(e.$$.fragment),o=p(),r=u("hr")},m(t,n){V(e,t,n),l(t,o,n),l(t,r,n),a=!0},p(t,o){const r={};2&o&&(r.image_picker_disabled="occlusion"===t[1].card_type),8&o&&(r.placeholder=t[3].back),!n&&2&o&&(n=!0,r.text=t[1].back_text,R((()=>n=!1))),!i&&2&o&&(i=!0,r.image_id=t[1].back_image_id,R((()=>i=!1))),e.$set(r)},i(t){a||(F(e.$$.fragment,t),a=!0)},o(t){G(e.$$.fragment,t),a=!1},d(t){Z(e,t),t&&s(o),t&&s(r)}}}function Ue(t){let e,n,i,o,r,a,d,f,_,h,g,m,v,$,y,b,w,k;function x(e){t[11](e)}let C={};void 0!==t[1]&&(C.card=t[1]),n=new xe({props:C}),q.push((()=>W(n,"card",x))),n.$on("preview",t[4]),n.$on("cancel",t[5]),n.$on("save",t[6]);let L="occlusion"===t[1].card_type&&Ie(t);function M(e){t[14](e)}function S(e){t[15](e)}let j={image_picker_disabled:"occlusion"===t[1].card_type,placeholder:t[3].front};void 0!==t[1].front_text&&(j.text=t[1].front_text),void 0!==t[1].front_image_id&&(j.image_id=t[1].front_image_id),f=new pe({props:j}),q.push((()=>W(f,"text",M))),q.push((()=>W(f,"image_id",S)));let O="verses"!=t[1].card_type&&Ae(t);function T(e){t[18](e)}function N(e){t[19](e)}let z={};return void 0!==t[0]&&(z.collection_tags=t[0]),void 0!==t[1]&&(z.card=t[1]),y=new $e({props:z}),q.push((()=>W(y,"collection_tags",T))),q.push((()=>W(y,"card",N))),{c(){e=u("body"),Q(n.$$.fragment),o=p(),r=u("hr"),a=p(),L&&L.c(),d=p(),Q(f.$$.fragment),g=p(),m=u("hr"),v=p(),O&&O.c(),$=p(),Q(y.$$.fragment)},m(t,i){l(t,e,i),V(n,e,null),c(e,o),c(e,r),c(e,a),L&&L.m(e,null),c(e,d),V(f,e,null),c(e,g),c(e,m),c(e,v),O&&O.m(e,null),c(e,$),V(y,e,null),k=!0},p(t,[o]){const r={};!i&&2&o&&(i=!0,r.card=t[1],R((()=>i=!1))),n.$set(r),"occlusion"===t[1].card_type?L?(L.p(t,o),2&o&&F(L,1)):(L=Ie(t),L.c(),F(L,1),L.m(e,d)):L&&(J(),G(L,1,1,(()=>{L=null})),D());const a={};2&o&&(a.image_picker_disabled="occlusion"===t[1].card_type),8&o&&(a.placeholder=t[3].front),!_&&2&o&&(_=!0,a.text=t[1].front_text,R((()=>_=!1))),!h&&2&o&&(h=!0,a.image_id=t[1].front_image_id,R((()=>h=!1))),f.$set(a),"verses"!=t[1].card_type?O?(O.p(t,o),2&o&&F(O,1)):(O=Ae(t),O.c(),F(O,1),O.m(e,$)):O&&(J(),G(O,1,1,(()=>{O=null})),D());const c={};!b&&1&o&&(b=!0,c.collection_tags=t[0],R((()=>b=!1))),!w&&2&o&&(w=!0,c.card=t[1],R((()=>w=!1))),y.$set(c)},i(t){k||(F(n.$$.fragment,t),F(L),F(f.$$.fragment,t),F(O),F(y.$$.fragment,t),k=!0)},o(t){G(n.$$.fragment,t),G(L),G(f.$$.fragment,t),G(O),G(y.$$.fragment,t),k=!1},d(t){t&&s(e),Z(n),L&&L.d(),Z(f),O&&O.d(),Z(y)}}}function Pe(t,e,n){let i,{collection_tags:o}=e,{card:r}=e,{card_edited_alert:a}=e,{state:c}=e,{cached_cards:l}=e,s={box:{width:500,height:500},hide_all:!0,rectangles:[]};M((async()=>{0!=r.id&&"occlusion"===r.card_type&&n(2,s=await gt(r.back_image_id))}));let d={...r};const u=nt();function f(){n(9,c.edit_mode=!1,c),n(9,c.card_to_edit=null,c),n(8,a=!0)}return t.$$set=t=>{"collection_tags"in t&&n(0,o=t.collection_tags),"card"in t&&n(7,r=t.card),"card_edited_alert"in t&&n(8,a=t.card_edited_alert),"state"in t&&n(9,c=t.state),"cached_cards"in t&&n(10,l=t.cached_cards)},t.$$.update=()=>{var e;2&t.$$.dirty&&n(3,(e=d.card_type,i="basic"===e?{front:"Question",back:"Answer"}:"verses"===e?{front:"To be or not to be, that is the question:  \nWhether 'tis nobler in the mind to suffer  \nThe slings and arrows of outrageous fortune\nOr to take arms against a sea of troubles  \nAnd by opposing, end them.",back:""}:{front:"- Text entered when the cards are created will be shared between all cards. \n- Afterwards each card's front and back text can be edited individually.",back:""}))},[o,d,s,i,function(){n(9,c.preview_mode=!0,c),n(9,c.card_to_preview=d,c)},function(){0===r.id&&n(7,r.visibility="purged",r),n(9,c.edit_mode=!1,c)},async function(){var t=nt()-u;for(var e in n(9,c.review_start=c.review_start+t,c),d)n(7,r[e]=d[e],r);if("occlusion"===r.card_type){t/=s.rectangles.length;for(let e of s.rectangles){if(e.deleted&&0!=e.id){dt({id:e.id,visibility:"purged"});l.find((t=>t.id===e.id)).visibility="purged"}if(0===e.id&&!e.deleted){let n={...r};n.id=lt(),e.id=n.id,l.push(n),dt(n,t)}}const e=await pt(JSON.stringify(s),!1);for(let t of s.rectangles){dt({id:t.id,back_image_id:e});l.find((e=>e.id===t.id)).back_image_id=e}f()}else"basic"!==r.card_type&&"verses"!==r.card_type||(0===r.id&&(n(7,r.id=lt(),r),l.push(r),n(10,l)),dt(r,t),f())},r,a,c,l,function(t){d=t,n(1,d)},function(t){s=t,n(2,s)},function(e){t.$$.not_equal(d.front_image_id,e)&&(d.front_image_id=e,n(1,d))},function(e){t.$$.not_equal(d.front_text,e)&&(d.front_text=e,n(1,d))},function(e){t.$$.not_equal(d.front_image_id,e)&&(d.front_image_id=e,n(1,d))},function(e){t.$$.not_equal(d.back_text,e)&&(d.back_text=e,n(1,d))},function(e){t.$$.not_equal(d.back_image_id,e)&&(d.back_image_id=e,n(1,d))},function(t){o=t,n(0,o)},function(t){d=t,n(1,d)}]}class He extends et{constructor(t){super(),tt(this,t,Pe,Ue,r,{collection_tags:0,card:7,card_edited_alert:8,state:9,cached_cards:10})}}function Be(t,e,n){const i=t.slice();return i[5]=e[n],i}function Je(e){let n;return{c(){n=f("Loading...")},m(t,e){l(t,n,e)},p:t,d(t){t&&s(n)}}}function De(t){let e,n=t[2].rectangles,i=[];for(let e=0;e<n.length;e+=1)i[e]=Ge(Be(t,n,e));return{c(){e=u("div");for(let t=0;t<i.length;t+=1)i[t].c();g(e,"id","occludedImage"),g(e,"class","svelte-1i7whgz"),y(e,"width",t[2].box.width+"px",!1),y(e,"height",t[2].box.height+"px",!1)},m(n,o){l(n,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);t[4](e)},p(t,o){if(7&o){let r;for(n=t[2].rectangles,r=0;r<n.length;r+=1){const a=Be(t,n,r);i[r]?i[r].p(a,o):(i[r]=Ge(a),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}4&o&&y(e,"width",t[2].box.width+"px",!1),4&o&&y(e,"height",t[2].box.height+"px",!1)},d(n){n&&s(e),d(i,n),t[4](null)}}}function Fe(t){let e;return{c(){e=u("div"),y(e,"position","absolute"),y(e,"top",t[5].top+"px"),y(e,"left",t[5].left+"px"),y(e,"width",t[5].width+"px"),y(e,"height",t[5].height+"px"),y(e,"background-color",t[0].id===t[5].id?"transparent":t[2].hide_all?"rgba(70,70,70,1)":"rgba(70,70,70,0.2)"),y(e,"border","5px solid "+(t[0].id!==t[5].id?"black":t[1]?"green":"red"))},m(t,n){l(t,e,n)},p(t,n){4&n&&y(e,"top",t[5].top+"px"),4&n&&y(e,"left",t[5].left+"px"),4&n&&y(e,"width",t[5].width+"px"),4&n&&y(e,"height",t[5].height+"px"),5&n&&y(e,"background-color",t[0].id===t[5].id?"transparent":t[2].hide_all?"rgba(70,70,70,1)":"rgba(70,70,70,0.2)"),7&n&&y(e,"border","5px solid "+(t[0].id!==t[5].id?"black":t[1]?"green":"red"))},d(t){t&&s(e)}}}function Ge(t){let e,n=!t[5].deleted&&Fe(t);return{c(){n&&n.c(),e=_()},m(t,i){n&&n.m(t,i),l(t,e,i)},p(t,i){t[5].deleted?n&&(n.d(1),n=null):n?n.p(t,i):(n=Fe(t),n.c(),n.m(e.parentNode,e))},d(t){n&&n.d(t),t&&s(e)}}}function Xe(e){let n;function i(t,e){return t[2]?De:Je}let o=i(e),r=o(e);return{c(){r.c(),n=_()},m(t,e){r.m(t,e),l(t,n,e)},p(t,[e]){o===(o=i(t))&&r?r.p(t,e):(r.d(1),r=o(t),r&&(r.c(),r.m(n.parentNode,n)))},i:t,o:t,d(t){r.d(t),t&&s(n)}}}function Ye(t,e,n){let i,o,{card:r}=e,{flipped:a}=e;return M((async()=>{n(2,i=await gt(r.back_image_id));const t=await ht(r.front_image_id);n(3,o.style["background-image"]="url("+t+")",o)})),t.$$set=t=>{"card"in t&&n(0,r=t.card),"flipped"in t&&n(1,a=t.flipped)},[r,a,i,o,function(t){q[t?"unshift":"push"]((()=>{o=t,n(3,o)}))}]}class We extends et{constructor(t){super(),tt(this,t,Ye,Xe,r,{card:0,flipped:1})}}function Qe(t,e,n){const i=t.slice();return i[28]=e[n],i}function Ve(t,e,n){const i=t.slice();return i[31]=e[n][0],i[32]=e[n][1],i}function Ze(t){let e,n=[["again",1],["hard",2],["good",3],["easy",4]],i=[];for(let e=0;e<4;e+=1)i[e]=Ke(Ve(t,n,e));return{c(){for(let t=0;t<4;t+=1)i[t].c();e=_()},m(t,n){for(let e=0;e<4;e+=1)i[e].m(t,n);l(t,e,n)},p(t,o){if(67648&o[0]){let r;for(n=[["again",1],["hard",2],["good",3],["easy",4]],r=0;r<4;r+=1){const a=Ve(t,n,r);i[r]?i[r].p(a,o):(i[r]=Ke(a),i[r].c(),i[r].m(e.parentNode,e))}for(;r<4;r+=1)i[r].d(1)}},d(t){d(i,t),t&&s(e)}}}function Ke(t){let e,n,i,o,r,a,d,_,m,$,b,w,k,x,C=Math.floor(t[6][t[31]])-Math.floor(t[11])+"";function L(){return t[22](t[31])}return{c(){e=u("button"),n=f(t[31]),i=f(" ("),o=f(t[32]),r=f(")"),a=u("br"),d=p(),_=u("span"),m=f("+"),$=f(C),b=f(" days"),w=p(),y(_,"font-size","12px"),g(e,"class","grade_button svelte-wypxki")},m(t,s){var u;l(t,e,s),c(e,n),c(e,i),c(e,o),c(e,r),c(e,a),c(e,d),c(e,_),c(_,m),c(_,$),c(_,b),c(e,w),k||(x=h(e,"click",(u=L,function(t){return t.stopPropagation(),u.call(this,t)})),k=!0)},p(e,n){t=e,64&n[0]&&C!==(C=Math.floor(t[6][t[31]])-Math.floor(t[11])+"")&&v($,C)},d(t){t&&s(e),k=!1,x()}}}function tn(t){let e,n=t[12].slice(0,t[5]),i=[];for(let e=0;e<n.length;e+=1)i[e]=nn(Qe(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=_()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);l(t,e,n)},p(t,o){if(4128&o[0]){let r;for(n=t[12].slice(0,t[5]),r=0;r<n.length;r+=1){const a=Qe(t,n,r);i[r]?i[r].p(a,o):(i[r]=nn(a),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(t){d(i,t),t&&s(e)}}}function en(t){let e,n,i=t[0].front_text.replace(/\n/g,"<br>")+"";return{c(){e=new k(!1),n=_(),e.a=n},m(t,o){e.m(i,t,o),l(t,n,o)},p(t,n){1&n[0]&&i!==(i=t[0].front_text.replace(/\n/g,"<br>")+"")&&e.p(i)},d(t){t&&s(n),t&&e.d()}}}function nn(t){let e,n,i=t[28]+"";return{c(){e=f(i),n=u("br")},m(t,i){l(t,e,i),l(t,n,i)},p(t,n){32&n[0]&&i!==(i=t[28]+"")&&v(e,i)},d(t){t&&s(e),t&&s(n)}}}function on(e){let n,i;return{c(){n=u("center"),i=u("img"),g(i,"class","svelte-wypxki")},m(t,o){l(t,n,o),c(n,i),e[23](i)},p:t,d(t){t&&s(n),e[23](null)}}}function rn(e){let n,i;return{c(){n=u("center"),i=u("img"),g(i,"class","svelte-wypxki")},m(t,o){l(t,n,o),c(n,i),e[24](i)},p:t,d(t){t&&s(n),e[24](null)}}}function an(t){let e,n,i,o;function r(e){t[25](e)}function a(e){t[26](e)}let c={};return void 0!==t[0]&&(c.card=t[0]),void 0!==t[2]&&(c.flipped=t[2]),e=new We({props:c}),q.push((()=>W(e,"card",r))),q.push((()=>W(e,"flipped",a))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),o=!0},p(t,o){const r={};!n&&1&o[0]&&(n=!0,r.card=t[0],R((()=>n=!1))),!i&&4&o[0]&&(i=!0,r.flipped=t[2],R((()=>i=!1))),e.$set(r)},i(t){o||(F(e.$$.fragment,t),o=!0)},o(t){G(e.$$.fragment,t),o=!1},d(t){Z(e,t)}}}function cn(t){let e,n,o,r,a,d,_,m,$,b,w,x,C,L,M,S,j,q,O,T,N,z,E,R,I,A,U,P,H,B,X,Y,W,Q,V,Z,K,tt=t[1]?"<u>b</u>ack":"<u>q</u>uit",et="verses"===t[0].card_type?"Next Line":"Flip",nt=t[0].back_text.replace("\n","<br>")+"",it=t[0].tags+"",ot=t[6]&&Ze(t);function rt(t,e){return"basic"===t[0].card_type||t[1]?en:"verses"===t[0].card_type?tn:void 0}let at=rt(t),ct=at&&at(t),lt=0!=t[0].back_image_id&&t[2]&&"occlusion"===!t[0].card_type&&on(t),st=0!=t[0].front_image_id&&(0===t[0].back_image_id||t[1]||!t[2])&&"occlusion"===!t[0].card_type&&rn(t),dt="occlusion"===t[0].card_type&&t[0].front_image_id&&an(t);return{c(){e=u("body"),n=u("div"),o=u("div"),r=u("button"),r.innerHTML="✍ <u>e</u>dit",a=p(),d=u("button"),_=f("⏎ "),m=new k(!1),$=p(),b=u("button"),b.innerHTML="✕ <u>d</u>elete",w=p(),x=u("div"),ot&&ot.c(),C=p(),ct&&ct.c(),L=p(),M=u("br"),S=u("br"),j=p(),q=u("button"),O=f(et),T=u("br"),N=p(),z=u("span"),z.textContent="(click anywhere)",E=p(),R=u("div"),I=u("br"),A=p(),U=new k(!1),P=p(),H=f(it),B=p(),X=u("hr"),Y=p(),lt&&lt.c(),W=p(),st&&st.c(),Q=p(),dt&&dt.c(),g(r,"class","manage_button svelte-wypxki"),m.a=null,g(d,"class","manage_button svelte-wypxki"),g(b,"class","manage_button svelte-wypxki"),y(o,"display",t[7]),g(o,"id","manage_buttons_bar"),g(o,"class","svelte-wypxki"),y(x,"display",t[8]),g(x,"id","grade_buttons_bar"),g(x,"class","svelte-wypxki"),g(n,"id","buttons_bar"),g(n,"class","svelte-wypxki"),y(z,"font-size","14px"),g(q,"id","flipper"),g(q,"type","button"),y(q,"display",t[9]),q.autofocus=!0,g(q,"class","svelte-wypxki"),U.a=null,g(R,"id","backside"),y(R,"display",t[10]),g(e,"class","svelte-wypxki")},m(i,s){l(i,e,s),c(e,n),c(n,o),c(o,r),c(o,a),c(o,d),c(d,_),m.m(tt,d),c(o,$),c(o,b),c(n,w),c(n,x),ot&&ot.m(x,null),c(e,C),ct&&ct.m(e,null),c(e,L),c(e,M),c(e,S),c(e,j),c(e,q),c(q,O),c(q,T),c(q,N),c(q,z),c(e,E),c(e,R),c(R,I),c(R,A),U.m(nt,R),c(e,P),c(e,H),c(e,B),c(e,X),c(e,Y),lt&&lt.m(e,null),c(e,W),st&&st.m(e,null),c(e,Q),dt&&dt.m(e,null),V=!0,q.focus(),Z||(K=[h(window,"keydown",t[19]),h(r,"click",t[15]),h(d,"click",t[14]),h(b,"click",t[13]),h(q,"click",t[17]),h(e,"click",t[18])],Z=!0)},p(t,n){(!V||2&n[0])&&tt!==(tt=t[1]?"<u>b</u>ack":"<u>q</u>uit")&&m.p(tt),(!V||128&n[0])&&y(o,"display",t[7]),t[6]?ot?ot.p(t,n):(ot=Ze(t),ot.c(),ot.m(x,null)):ot&&(ot.d(1),ot=null),(!V||256&n[0])&&y(x,"display",t[8]),at===(at=rt(t))&&ct?ct.p(t,n):(ct&&ct.d(1),ct=at&&at(t),ct&&(ct.c(),ct.m(e,L))),(!V||1&n[0])&&et!==(et="verses"===t[0].card_type?"Next Line":"Flip")&&v(O,et),(!V||512&n[0])&&y(q,"display",t[9]),(!V||1&n[0])&&nt!==(nt=t[0].back_text.replace("\n","<br>")+"")&&U.p(nt),(!V||1024&n[0])&&y(R,"display",t[10]),(!V||1&n[0])&&it!==(it=t[0].tags+"")&&v(H,it),0!=t[0].back_image_id&&t[2]&&"occlusion"===!t[0].card_type?lt?lt.p(t,n):(lt=on(t),lt.c(),lt.m(e,W)):lt&&(lt.d(1),lt=null),0==t[0].front_image_id||0!==t[0].back_image_id&&!t[1]&&t[2]||"occlusion"!==!t[0].card_type?st&&(st.d(1),st=null):st?st.p(t,n):(st=rn(t),st.c(),st.m(e,Q)),"occlusion"===t[0].card_type&&t[0].front_image_id?dt?(dt.p(t,n),1&n[0]&&F(dt,1)):(dt=an(t),dt.c(),F(dt,1),dt.m(e,null)):dt&&(J(),G(dt,1,1,(()=>{dt=null})),D())},i(t){V||(F(dt),V=!0)},o(t){G(dt),V=!1},d(t){t&&s(e),ot&&ot.d(),ct&&ct.d(),lt&&lt.d(),st&&st.d(),dt&&dt.d(),Z=!1,i(K)}}}function ln(t,e,n){let i,o,r,a,c,l,s,{card:d}=e,{preview:u=!1}=e,{state:f}=e,{card_edited_alert:p}=e,_=ot(),h=u,g=1,m=d.front_text.split("\n"),v={again:0,hard:10,good:15,easy:25};function $(){n(0,d.visibility="deleted",d),dt(d),n(21,p=!0),y()}function y(){f.preview_mode?(n(20,f.preview_mode=!1,f),n(20,f.card_to_preview=null,f)):(n(20,f.reviewing=!1,f),n(20,f.card_to_review=null,f))}function b(){n(20,f.edit_mode=!0,f),n(20,f.card_to_edit=d,f),f.preview_mode&&y()}async function w(t){n(0,d.due_date=_+1,d),c=nt();var e=c-f.review_start;await async function(t,e,n){const i={review:{card_id:t,grade:e},metadata:{seconds:n,date:ot()}};let o=st();o.body=JSON.stringify(i);var r=new URL(ct+"review");fetch(r,o).then(ft).catch(ut)}(d.id,t,e),n(0,d.due_date=v[t],d),await dt(d),n(20,f.card_to_review=null,f),n(2,h=!1)}function k(){"basic"===d.card_type||"occlusion"===d.card_type?n(2,h=!0):"verses"===d.card_type&&(n(5,g++,g),n(2,h=g===m.length))}function x(){h||k()}M((async()=>{if(n(6,v=await async function(t,e){const n=new URL(ct+"hypothetical_due_dates");n.search=new URLSearchParams({card_id:t,date:e});var i=st();i.method="GET";const o=await fetch(n,i);return await o.json()}(d.id,_)),n(20,f.review_start=nt(),f),0!=d.front_image_id){const t=await ht(d.front_image_id);n(4,s.src=t,s)}0!=d.back_image_id&&"occlusion"!=d.card_type&&n(3,l.src=await ht(d.back_image_id),l)}));return t.$$set=t=>{"card"in t&&n(0,d=t.card),"preview"in t&&n(1,u=t.preview),"state"in t&&n(20,f=t.state),"card_edited_alert"in t&&n(21,p=t.card_edited_alert)},t.$$.update=()=>{5&t.$$.dirty[0]&&n(10,i="verses"!=d.card_type&&h?"block":"none"),4&t.$$.dirty[0]&&n(9,o=h?"none":"block"),6&t.$$.dirty[0]&&n(8,r=h&&!u?"grid":"none"),4&t.$$.dirty[0]&&n(7,a=h?"grid":"none")},[d,u,h,l,s,g,v,a,r,o,i,_,m,$,y,b,w,k,x,function(t){const e=t.key;"e"===e?b():"b"===e||"q"==e?y():"d"===e?$():" "===e?x():"1"===e?w("again"):"2"===e?w("hard"):"3"===e?w("good"):"4"===e&&w("easy")},f,p,t=>w(t),function(t){q[t?"unshift":"push"]((()=>{l=t,n(3,l)}))},function(t){q[t?"unshift":"push"]((()=>{s=t,n(4,s)}))},function(t){d=t,n(0,d)},function(t){h=t,n(2,h)}]}class sn extends et{constructor(t){super(),tt(this,t,ln,cn,r,{card:0,preview:1,state:20,card_edited_alert:21},null,[-1,-1])}}function dn(t){let e;return{c(){e=u("center"),e.textContent="Incorrect Password",y(e,"color","darkred")},m(t,n){l(t,e,n)},d(t){t&&s(e)}}}function un(e){let n,o,r,a,d,_,m,b,w,k,x,C,L,M,S,j,q,O,T,N,z,E,R,I,A,U="login"===e[3]&&fn&&dn();return{c(){n=u("body"),o=f(e[6]),r=p(),a=u("input"),d=p(),_=u("input"),m=p(),U&&U.c(),b=p(),w=u("div"),k=u("label"),x=u("input"),C=f(" LOGIN"),L=p(),M=u("label"),S=u("input"),j=f(" REGISTER"),q=p(),O=u("input"),N=p(),z=u("br"),E=u("center"),R=u("button"),R.textContent="continue as guest",g(a,"class","entry svelte-1dlq1ng"),g(a,"type","text"),g(a,"placeholder","Username"),g(_,"class","entry svelte-1dlq1ng"),g(_,"type","password"),g(_,"placeholder","Password"),g(x,"type","radio"),g(x,"name","rol"),x.__value="login",x.value=x.__value,e[18][0].push(x),g(k,"class","svelte-1dlq1ng"),g(S,"type","radio"),g(S,"name","rol"),S.__value="register",S.value=S.__value,e[18][0].push(S),g(M,"class","svelte-1dlq1ng"),g(O,"type","submit"),O.value=e[3],O.disabled=T=!e[7],y(O,"border",e[7]?"1px solid black":"",!1),g(w,"id","bottom_row"),g(w,"class","svelte-1dlq1ng"),g(R,"type","button"),g(n,"class","svelte-1dlq1ng")},m(t,i){l(t,n,i),c(n,o),c(n,r),c(n,a),e[13](a),$(a,e[1]),c(n,d),c(n,_),e[15](_),$(_,e[2]),c(n,m),U&&U.m(n,null),c(n,b),c(n,w),c(w,k),c(k,x),x.checked=x.__value===e[3],c(k,C),c(w,L),c(w,M),c(M,S),S.checked=S.__value===e[3],c(M,j),c(w,q),c(w,O),c(n,N),c(n,z),c(n,E),c(E,R),I||(A=[h(a,"input",e[14]),h(_,"input",e[16]),h(x,"change",e[17]),h(S,"change",e[19]),h(O,"click",e[8]),h(R,"click",e[20])],I=!0)},p(t,[e]){64&e&&v(o,t[6]),2&e&&a.value!==t[1]&&$(a,t[1]),4&e&&_.value!==t[2]&&$(_,t[2]),"login"===t[3]&&fn?U||(U=dn(),U.c(),U.m(n,b)):U&&(U.d(1),U=null),8&e&&(x.checked=x.__value===t[3]),8&e&&(S.checked=S.__value===t[3]),8&e&&(O.value=t[3]),128&e&&T!==(T=!t[7])&&(O.disabled=T),128&e&&y(O,"border",t[7]?"1px solid black":"",!1)},i:t,o:t,d(t){t&&s(n),e[13](null),e[15](null),U&&U.d(),e[18][0].splice(e[18][0].indexOf(x),1),e[18][0].splice(e[18][0].indexOf(S),1),I=!1,i(A)}}}let fn=!1;function pn(t,e,n){let i,o,r,a,c,l,s,{username:d}=e,u=[],f="",p="",_="login";async function h(){const t=await async function(t,e){var n=new URL(ct+"auth/token"),i=new FormData;i.append("username",t),i.append("password",e);const o={method:"POST",mode:"cors",body:i};var r=null;const a=await fetch(n,o).then((t=>(r=t.ok,t))).then(ft).catch(ut);if(r){var c=await a.json();return window.localStorage.setItem("access_token",c.access_token),window.localStorage.setItem("username",t),!0}return!1}(f,p);t?n(0,d=f):(n(2,p=""),l.focus())}async function g(){const t=await async function(t,e){var n=new URL(ct+"auth/register"),i=st();i.body=JSON.stringify({username:t,password:e});var o=null;const r=await fetch(n,i).then((t=>(o=t.ok,t))).then(ft).catch(ut);if(o){var a=await r.json();return window.localStorage.setItem("access_token",a.access_token),window.localStorage.setItem("username",t),!0}return!1}(f,p);t?n(0,d=f):alert("registration failed")}M((async()=>{n(9,u=await async function(){var t=new URL(ct+"auth/users_list"),e=st();return e.method="GET",(await fetch(t,e)).json()}()),s.focus()}));return t.$$set=t=>{"username"in t&&n(0,d=t.username)},t.$$.update=()=>{514&t.$$.dirty&&n(10,i=u.includes(f)),1028&t.$$.dirty&&n(12,o=i&&p.length>2),1030&t.$$.dirty&&n(11,r=!i&&f.length>2&&p.length>2),6152&t.$$.dirty&&n(7,a="login"===_&&o||"register"===_&&r),1034&t.$$.dirty&&n(6,c="user does not exist!".repeat("login"===_&&!i&&f.length>2)+"username is already taken!".repeat("register"===_&&i&&f.length>2))},[d,f,p,_,l,s,c,a,function(){"login"===_?h():g()},u,i,r,o,function(t){q[t?"unshift":"push"]((()=>{s=t,n(5,s)}))},function(){f=this.value,n(1,f)},function(t){q[t?"unshift":"push"]((()=>{l=t,n(4,l)}))},function(){p=this.value,n(2,p)},function(){_=this.__value,n(3,_)},[[]],function(){_=this.__value,n(3,_)},()=>{n(0,d="guest")}]}class _n extends et{constructor(t){super(),tt(this,t,pn,un,r,{username:0})}}function hn(t){let e,n,i,o,r,a,c,d,f,_,h,g,m,v,$,b,w,k,x,C=t[4].preview_mode&&t[4].card_to_preview&&mn(t),L=t[4].edit_mode&&t[4].card_to_edit&&vn(t),M=t[4].reviewing&&null!=t[4].card_to_review&&$n(t);function S(e){t[25](e)}function j(e){t[26](e)}function O(e){t[27](e)}function T(e){t[28](e)}function N(e){t[29](e)}function z(e){t[30](e)}function E(e){t[31](e)}function I(e){t[32](e)}function A(e){t[33](e)}function U(e){t[34](e)}function P(e){t[35](e)}let H={};return void 0!==t[6]&&(H.sort=t[6]),void 0!==t[7]&&(H.collection_tags=t[7]),void 0!==t[2]&&(H.card_edited_alert=t[2]),void 0!==t[9]&&(H.due_count=t[9]),void 0!==t[10]&&(H.created_count=t[10]),void 0!==t[3]&&(H.username=t[3]),void 0!==t[5]&&(H.filters=t[5]),void 0!==t[4]&&(H.state=t[4]),void 0!==t[1]&&(H.filtered_cards=t[1]),void 0!==t[0]&&(H.cached_cards=t[0]),void 0!==t[8]&&(H.info=t[8]),c=new ee({props:H}),q.push((()=>W(c,"sort",S))),q.push((()=>W(c,"collection_tags",j))),q.push((()=>W(c,"card_edited_alert",O))),q.push((()=>W(c,"due_count",T))),q.push((()=>W(c,"created_count",N))),q.push((()=>W(c,"username",z))),q.push((()=>W(c,"filters",E))),q.push((()=>W(c,"state",I))),q.push((()=>W(c,"filtered_cards",A))),q.push((()=>W(c,"cached_cards",U))),q.push((()=>W(c,"info",P))),{c(){C&&C.c(),e=p(),n=u("div"),L&&L.c(),i=p(),o=u("div"),M&&M.c(),r=p(),a=u("div"),Q(c.$$.fragment),y(n,"display",t[4].preview_mode?"none":"block",!1),y(o,"display",t[4].preview_mode||t[4].edit_mode?"none":"block",!1),y(a,"display",t[4].preview_mode||t[4].edit_mode||t[4].reviewing?"none":"block",!1)},m(t,s){C&&C.m(t,s),l(t,e,s),l(t,n,s),L&&L.m(n,null),l(t,i,s),l(t,o,s),M&&M.m(o,null),l(t,r,s),l(t,a,s),V(c,a,null),x=!0},p(t,i){t[4].preview_mode&&t[4].card_to_preview?C?(C.p(t,i),16&i[0]&&F(C,1)):(C=mn(t),C.c(),F(C,1),C.m(e.parentNode,e)):C&&(J(),G(C,1,1,(()=>{C=null})),D()),t[4].edit_mode&&t[4].card_to_edit?L?(L.p(t,i),16&i[0]&&F(L,1)):(L=vn(t),L.c(),F(L,1),L.m(n,null)):L&&(J(),G(L,1,1,(()=>{L=null})),D()),16&i[0]&&y(n,"display",t[4].preview_mode?"none":"block",!1),t[4].reviewing&&null!=t[4].card_to_review?M?(M.p(t,i),16&i[0]&&F(M,1)):(M=$n(t),M.c(),F(M,1),M.m(o,null)):M&&(J(),G(M,1,1,(()=>{M=null})),D()),16&i[0]&&y(o,"display",t[4].preview_mode||t[4].edit_mode?"none":"block",!1);const r={};!d&&64&i[0]&&(d=!0,r.sort=t[6],R((()=>d=!1))),!f&&128&i[0]&&(f=!0,r.collection_tags=t[7],R((()=>f=!1))),!_&&4&i[0]&&(_=!0,r.card_edited_alert=t[2],R((()=>_=!1))),!h&&512&i[0]&&(h=!0,r.due_count=t[9],R((()=>h=!1))),!g&&1024&i[0]&&(g=!0,r.created_count=t[10],R((()=>g=!1))),!m&&8&i[0]&&(m=!0,r.username=t[3],R((()=>m=!1))),!v&&32&i[0]&&(v=!0,r.filters=t[5],R((()=>v=!1))),!$&&16&i[0]&&($=!0,r.state=t[4],R((()=>$=!1))),!b&&2&i[0]&&(b=!0,r.filtered_cards=t[1],R((()=>b=!1))),!w&&1&i[0]&&(w=!0,r.cached_cards=t[0],R((()=>w=!1))),!k&&256&i[0]&&(k=!0,r.info=t[8],R((()=>k=!1))),c.$set(r),16&i[0]&&y(a,"display",t[4].preview_mode||t[4].edit_mode||t[4].reviewing?"none":"block",!1)},i(t){x||(F(C),F(L),F(M),F(c.$$.fragment,t),x=!0)},o(t){G(C),G(L),G(M),G(c.$$.fragment,t),x=!1},d(t){C&&C.d(t),t&&s(e),t&&s(n),L&&L.d(),t&&s(i),t&&s(o),M&&M.d(),t&&s(r),t&&s(a),Z(c)}}}function gn(t){let e,n,i;function o(e){t[14](e)}let r={};return void 0!==t[3]&&(r.username=t[3]),e=new _n({props:r}),q.push((()=>W(e,"username",o))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),i=!0},p(t,i){const o={};!n&&8&i[0]&&(n=!0,o.username=t[3],R((()=>n=!1))),e.$set(o)},i(t){i||(F(e.$$.fragment,t),i=!0)},o(t){G(e.$$.fragment,t),i=!1},d(t){Z(e,t)}}}function mn(t){let e,n,i,o;function r(e){t[15](e)}function a(e){t[16](e)}let c={preview:"true"};return void 0!==t[4].card_to_preview&&(c.card=t[4].card_to_preview),void 0!==t[4]&&(c.state=t[4]),e=new sn({props:c}),q.push((()=>W(e,"card",r))),q.push((()=>W(e,"state",a))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),o=!0},p(t,o){const r={};!n&&16&o[0]&&(n=!0,r.card=t[4].card_to_preview,R((()=>n=!1))),!i&&16&o[0]&&(i=!0,r.state=t[4],R((()=>i=!1))),e.$set(r)},i(t){o||(F(e.$$.fragment,t),o=!0)},o(t){G(e.$$.fragment,t),o=!1},d(t){Z(e,t)}}}function vn(t){let e,n,i,o,r,a,c;function l(e){t[17](e)}function s(e){t[18](e)}function d(e){t[19](e)}function u(e){t[20](e)}function f(e){t[21](e)}let p={};return void 0!==t[4].card_to_edit&&(p.card=t[4].card_to_edit),void 0!==t[0]&&(p.cached_cards=t[0]),void 0!==t[2]&&(p.card_edited_alert=t[2]),void 0!==t[7]&&(p.collection_tags=t[7]),void 0!==t[4]&&(p.state=t[4]),e=new He({props:p}),q.push((()=>W(e,"card",l))),q.push((()=>W(e,"cached_cards",s))),q.push((()=>W(e,"card_edited_alert",d))),q.push((()=>W(e,"collection_tags",u))),q.push((()=>W(e,"state",f))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),c=!0},p(t,c){const l={};!n&&16&c[0]&&(n=!0,l.card=t[4].card_to_edit,R((()=>n=!1))),!i&&1&c[0]&&(i=!0,l.cached_cards=t[0],R((()=>i=!1))),!o&&4&c[0]&&(o=!0,l.card_edited_alert=t[2],R((()=>o=!1))),!r&&128&c[0]&&(r=!0,l.collection_tags=t[7],R((()=>r=!1))),!a&&16&c[0]&&(a=!0,l.state=t[4],R((()=>a=!1))),e.$set(l)},i(t){c||(F(e.$$.fragment,t),c=!0)},o(t){G(e.$$.fragment,t),c=!1},d(t){Z(e,t)}}}function $n(t){let e,n,i,o,r;function a(e){t[22](e)}function c(e){t[23](e)}function l(e){t[24](e)}let s={};return void 0!==t[2]&&(s.card_edited_alert=t[2]),void 0!==t[4]&&(s.state=t[4]),void 0!==t[4].card_to_review&&(s.card=t[4].card_to_review),e=new sn({props:s}),q.push((()=>W(e,"card_edited_alert",a))),q.push((()=>W(e,"state",c))),q.push((()=>W(e,"card",l))),{c(){Q(e.$$.fragment)},m(t,n){V(e,t,n),r=!0},p(t,r){const a={};!n&&4&r[0]&&(n=!0,a.card_edited_alert=t[2],R((()=>n=!1))),!i&&16&r[0]&&(i=!0,a.state=t[4],R((()=>i=!1))),!o&&16&r[0]&&(o=!0,a.card=t[4].card_to_review,R((()=>o=!1))),e.$set(a)},i(t){r||(F(e.$$.fragment,t),r=!0)},o(t){G(e.$$.fragment,t),r=!1},d(t){Z(e,t)}}}function yn(t){let e,n,i,o;const r=[gn,hn],a=[];function c(t,e){return"none"===t[3]?0:1}return n=c(t),i=a[n]=r[n](t),{c(){e=u("body"),i.c(),g(e,"class","svelte-hdfi12")},m(t,i){l(t,e,i),a[n].m(e,null),o=!0},p(t,o){let l=n;n=c(t),n===l?a[n].p(t,o):(J(),G(a[l],1,1,(()=>{a[l]=null})),D(),i=a[n],i?i.p(t,o):(i=a[n]=r[n](t),i.c()),F(i,1),i.m(e,null))},i(t){o||(F(i),o=!0)},o(t){G(i),o=!1},d(t){t&&s(e),a[n].d()}}}function bn(t,e,n){let i,o,r,a,c,l,s=new Array(1).fill(at),d=s,u=!1,f=!0,p=[],_={card_to_edit:null,edit_mode:!1,card_to_preview:null,preview_mode:!1,card_to_review:null,reviewing:!1,review_start:null},h={deleted:!1,search:"",due:null,new:null,images:null,audio:null,tag:null,card_type:"",created_after:null,created_before:null,due_after:null,due_before:null},g="recent",m=null,v=ot();async function $(){f||(n(0,s=await async function(t,e){var n=st();const i=new URL(ct+"cardlist"),o={crit:{sort:e},filters:t};return n.body=JSON.stringify(o),(await fetch(i,n).then(ft).catch(ut)).json()}(h,g)),n(7,p=await async function(){const t=new URL(ct+"collection_tags");var e=st();return e.method="GET",(await fetch(t,e)).json()}()))}async function y(){if(!f)switch(n(1,d=s),n(2,u=!1),g){case"recent":d.sort(((t,e)=>Math.max(e.last_edit_date,e.last_review_date)-Math.max(t.last_edit_date,t.last_review_date)));break;case"old":d.sort(((t,e)=>t.create_date-e.create_date));break;case"meritorious":d.sort(((t,e)=>e.merit-t.merit));break;case"edited":d.sort(((t,e)=>t.last_edit_date-e.last_edit_date));break;case"reviewed":d.sort(((t,e)=>t.last_review_date-e.last_review_date));break;case"random":d.sort((()=>Math.random()-.5));break;case"overdue":d.sort(((t,e)=>t.due_date-e.due_date));break;case"total time":d.sort(((t,e)=>e.total_seconds-t.total_seconds))}}return M((async()=>{!async function(){window.localStorage.getItem("username")||(window.localStorage.setItem("username","guest"),window.localStorage.setItem("access_token","guest123"))}(),n(3,c=window.localStorage.getItem("username")),f=!1})),t.$$.update=()=>{1&t.$$.dirty[0]&&n(13,i=s.filter((t=>t.create_date>Math.floor(v)))),1&t.$$.dirty[0]&&n(12,o=s.filter((t=>t.due_date<v))),8192&t.$$.dirty[0]&&n(10,r=i.length),4096&t.$$.dirty[0]&&n(9,a=o.length),2066&t.$$.dirty[0]&&_.reviewing&&null===_.card_to_review&&(n(4,_.review_start=nt(),_),n(11,l=function(t){if(0===t.length)return null;t.sort(((t,e)=>t.due_date-e.due_date));var e=t[0];return e.due_date<ot()?e:(alert("Congratulations Student. There are no more due cards."),null)}(d)),null===l&&n(4,_.reviewing=!1,_),n(4,_.card_to_review=l,_)),96&t.$$.dirty[0]&&$(),8&t.$$.dirty[0]&&$(),1&t.$$.dirty[0]&&y(),4&t.$$.dirty[0]&&y()},[s,d,u,c,_,h,g,p,m,a,r,l,o,i,function(t){c=t,n(3,c)},function(e){t.$$.not_equal(_.card_to_preview,e)&&(_.card_to_preview=e,n(4,_),n(1,d),n(11,l))},function(t){_=t,n(4,_),n(1,d),n(11,l)},function(e){t.$$.not_equal(_.card_to_edit,e)&&(_.card_to_edit=e,n(4,_),n(1,d),n(11,l))},function(t){s=t,n(0,s)},function(t){u=t,n(2,u)},function(t){p=t,n(7,p)},function(t){_=t,n(4,_),n(1,d),n(11,l)},function(t){u=t,n(2,u)},function(t){_=t,n(4,_),n(1,d),n(11,l)},function(e){t.$$.not_equal(_.card_to_review,e)&&(_.card_to_review=e,n(4,_),n(1,d),n(11,l))},function(t){g=t,n(6,g)},function(t){p=t,n(7,p)},function(t){u=t,n(2,u)},function(t){a=t,n(9,a),n(12,o),n(0,s),n(37,v)},function(t){r=t,n(10,r),n(13,i),n(0,s),n(37,v)},function(t){c=t,n(3,c)},function(t){h=t,n(5,h)},function(t){_=t,n(4,_),n(1,d),n(11,l)},function(t){d=t,n(1,d)},function(t){s=t,n(0,s)},function(t){m=t,n(8,m)}]}return new class extends et{constructor(t){super(),tt(this,t,bn,yn,r,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
