var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function c(t){let e;return l(t,(t=>e=t))(),e}function s(t,e,n){t.$$.on_destroy.push(l(e,n))}function a(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function u(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function _(){return m("")}function v(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t){return""===t?null:+t}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function k(t,e){t.value=null==e?"":e}function w(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function x(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}function C(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}class L{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){var o;this.e||(this.is_svg?this.e=(o=e.nodeName,document.createElementNS("http://www.w3.org/2000/svg",o)):this.e=h(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)d(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(f)}}let q;function S(t){q=t}function z(){if(!q)throw new Error("Function called outside component initialization");return q}function M(t){z().$$.on_mount.push(t)}function N(){const t=z();return(e,n,{cancelable:o=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,o,e),i}(e,n,{cancelable:o});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}const O=[],j=[],E=[],R=[],T=Promise.resolve();let I=!1;function A(){I||(I=!0,T.then(J))}function U(t){E.push(t)}function P(t){R.push(t)}const H=new Set;let B=0;function J(){const t=q;do{for(;B<O.length;){const t=O[B];B++,S(t),D(t.$$)}for(S(null),O.length=0,B=0;j.length;)j.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];H.has(e)||(H.add(e),e())}E.length=0}while(O.length);for(;R.length;)R.pop()();I=!1,H.clear(),S(t)}function D(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const F=new Set;let G;function X(){G={r:0,c:[],p:G}}function Y(){G.r||o(G.c),G=G.p}function W(t,e){t&&t.i&&(F.delete(t),t.i(e))}function Q(t,e,n,o){if(t&&t.o){if(F.has(t))return;F.add(t),G.c.push((()=>{F.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function V(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function Z(t){t&&t.c()}function K(t,n,r,l){const{fragment:c,on_mount:s,on_destroy:a,after_update:u}=t.$$;c&&c.m(n,r),l||U((()=>{const n=s.map(e).filter(i);a?a.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(U)}function tt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function et(e,i,r,l,c,s,a,u=[-1]){const d=q;S(e);const p=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||d.$$.root};a&&a(p.root);let h=!1;if(p.ctx=r?r(e,i.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),h&&function(t,e){-1===t.$$.dirty[0]&&(O.push(t),A(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],p.update(),h=!0,o(p.before_update),p.fragment=!!l&&l(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(f)}else p.fragment&&p.fragment.c();i.intro&&W(e.$$.fragment),K(e,i.target,i.anchor,i.customElement),J()}S(d)}class nt{$destroy(){tt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let ot=()=>Math.floor(Date.now()/1e3);const it=60*(new Date).getTimezoneOffset();let rt=()=>(ot()-it)/86400;const lt=[];function ct(e,n=t){let o;const i=new Set;function l(t){if(r(e,t)&&(e=t,o)){const t=!lt.length;for(const t of i)t[1](),lt.push(t,e);if(t){for(let t=0;t<lt.length;t+=2)lt[t][0](lt[t+1]);lt.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(r,c=t){const s=[r,c];return i.add(s),1===i.size&&(o=n(l)||t),r(e),()=>{i.delete(s),0===i.size&&(o(),o=null)}}}}function st(e,n,r){const c=!Array.isArray(e),s=c?[e]:e,a=n.length<2;return u=e=>{let r=!1;const u=[];let d=0,f=t;const p=()=>{if(d)return;f();const o=n(c?u[0]:u,e);a?e(o):f=i(o)?o:t},h=s.map(((t,e)=>l(t,(t=>{u[e]=t,d&=~(1<<e),r&&p()}),(()=>{d|=1<<e}))));return r=!0,p(),function(){o(h),f()}},{subscribe:ct(r,u).subscribe};var u}const at=ct(null),ut=ct(null),dt=ct(null),ft=ct(null),pt=ct(window.localStorage.getItem("username"));pt.subscribe((t=>{if(t!==window.localStorage.getItem("username")){if("guest"===t){const t=String(Math.floor(1e7*Math.random()));window.localStorage.setItem("access_token","guest"+t)}window.localStorage.setItem("username",t)}}));const ht=ct({deleted:!1,search:"",due:null,new:null,images:null,audio:null,tag:null,card_type:"",created_after:null,created_before:null,due_after:null,due_before:null}),mt=ct("recent");let gt="https://api.vinca.study/";function _t(){return String(Math.floor(1e15*Math.random()))}function vt(){return{method:"POST",mode:"cors",headers:{"content-type":"application/json",Authorization:"Bearer "+window.localStorage.getItem("access_token")}}}async function $t(t,e=0){const n=new URL(gt+"commit_card"),o={seconds:e,date:rt()},i={card:t,metadata:o};let r=vt();r.body=JSON.stringify(i),fetch(n,r).then(bt).then((e=>{const n=e.json();for(var o in n)t[o]=n[o]})).catch(yt)}function yt(t){alert("Internet Problem: "+t.message)}function bt(t){if(t.ok)return t;throw new Error(t.status+":  "+t.statusText)}async function kt(t,e=!0){let n=vt();n.body=JSON.stringify({content:t,base64:e});var o=new URL(gt+"upload_media");const i=await fetch(o,n).then(bt).catch(yt),r=await i.json();return await r.media_id}async function wt(){var t=vt();const e=new URL(gt+"due_count"),n={filters:c(ht)};t.body=JSON.stringify(n);return(await fetch(e,t)).json()}async function xt(){var t=vt();const e=new URL(gt+"created_count"),n={filters:c(ht)};t.body=JSON.stringify(n);return(await fetch(e,t)).json()}async function Ct(t){new Headers;var e=vt();e.method="GET";return await fetch(t,e)}async function Lt(t){const e=gt+"get_media?media_id="+t,n=await Ct(e),o=await n.blob();return URL.createObjectURL(o)}async function qt(t){const e=gt+"get_occlusion_data?media_id="+t,n=await Ct(e),o=await n.json();return JSON.parse(o)}const St=st(ht,(async(t,e)=>{e(await wt())}),"-"),zt=st(ht,(async(t,e)=>{e(await xt())}),"-"),Mt=st([ht,mt,dt],(async(t,e)=>{e(await async function(){var t=vt();const e=new URL(gt+"next_two_due"),n={crit:{sort:c(mt)},filters:c(ht)};return t.body=JSON.stringify(n),(await fetch(e,t)).json()}())}),[null,null]);function Nt(){const t=rt();return{id:0,front_text:"",back_text:"",visibility:"visible",card_type:"basic",scheduler:"basic",tags:"",merit:6,create_date:t,due_date:t,last_review_date:t,last_edit_date:t,review_seconds:0,edit_seconds:0,total_seconds:0,front_image_id:0,back_image_id:0,front_audio_id:0,back_audio_id:0}}function Ot(t){let e,n,o,i,r,l,c,s,p,_,y;const k=t[6].default,x=function(t,e,n,o){if(t){const i=a(t,e,n,o);return t[0](i)}}(k,t,t[5],null);return{c(){e=h("label"),x&&x.c(),n=h("br"),o=g(),i=h("input"),c=g(),s=m(t[1]),$(i,"type","checkbox"),i.indeterminate=r=!1===t[0],i.checked=l=null!=t[0],$(e,"class","svelte-1skhkuc"),w(e,"color",t[2],!1),w(e,"display","inline",!1)},m(r,l){d(r,e,l),x&&x.m(e,null),u(e,n),u(e,o),u(e,i),u(e,c),u(e,s),p=!0,_||(y=v(i,"click",t[3]),_=!0)},p(t,[n]){x&&x.p&&(!p||32&n)&&function(t,e,n,o,i,r){if(i){const l=a(e,n,o,r);t.p(l,i)}}(x,k,t,t[5],p?function(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}(k,t[5],n,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[5]),null),(!p||1&n&&r!==(r=!1===t[0]))&&(i.indeterminate=r),(!p||1&n&&l!==(l=null!=t[0]))&&(i.checked=l),(!p||2&n)&&b(s,t[1]),4&n&&w(e,"color",t[2],!1)},i(t){p||(W(x,t),p=!0)},o(t){Q(x,t),p=!1},d(t){t&&f(e),x&&x.d(t),_=!1,y()}}}function jt(t,e,n){let o,i,{$$slots:r={},$$scope:l}=e,{state:c=null}=e,s=[null,!0,!1],a=s.indexOf(c);return t.$$set=t=>{"state"in t&&n(0,c=t.state),"$$scope"in t&&n(5,l=t.$$scope)},t.$$.update=()=>{16&t.$$.dirty&&n(0,c=s[a]),1&t.$$.dirty&&n(2,o={null:"black",true:"darkgreen",false:"red"}[c]),1&t.$$.dirty&&n(1,i={null:"any",true:"yes",false:"no"}[c])},[c,i,o,function(){n(4,a=(a+1)%s.length)},a,l,r]}class Et extends nt{constructor(t){super(),et(this,t,jt,Ot,r,{state:0})}}function Rt(e){let n,o,i,r,l,c,s,a;return{c(){n=h("button"),o=h("div"),o.innerHTML='Review\n    <svg id="svg_lamp" viewBox="10 30 300 330" class="svelte-1a4uwcd"><path style="fill:none;stroke:#008000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" d="m 168.08981,266.41346 0,-196.733878"></path><path style="fill:none;stroke:#008000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 113.40393,266.41346 H 222.7757"></path><rect style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1.07730699;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" width="15.23763" height="15.23763" x="70.657272" y="252.84714" rx="0" ry="6.2100134" transform="matrix(0.49621774,-0.86819811,0.49621774,0.86819811,0,0)"></rect><path style="fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 113.40393,266.41346 54.68588,-15.63159 54.68589,15.63159"></path><circle style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" cx="247.97658" cy="142.35379" r="4.0321393"></circle><circle r="4.0321393" cy="151.99362" cx="247.97658" style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></circle><circle style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" cx="247.97658" cy="161.63345" r="4.0321393"></circle><circle r="4.0321393" cy="171.27328" cx="247.97658" style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></circle><circle style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" cx="247.97658" cy="180.91312" r="4.0321393"></circle><circle r="4.0321393" cy="190.55295" cx="247.97658" style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></circle><path style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1.75496578;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" r="7.0762668" cy="203.25423" cx="247.97658"></path><path style="fill:#008000;stroke:#008000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1" d="m 39.769243,134.97217 c 4.692467,4.30517 252.308817,3.945 256.641117,0 4.3323,-3.945 -13.34213,-49.792447 -33.81729,-58.573276 -20.47516,-8.780829 -171.052555,-9.140997 -189.006528,0 C 55.632569,85.539891 35.076776,130.667 39.769243,134.97217 Z"></path><rect transform="matrix(0.49621774,-0.86819811,0.49621774,0.86819811,0,0)" ry="6.2100134" rx="0" y="267.24478" x="56.259636" height="15.23763" width="15.23763" style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1.07730699;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect><rect style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1.07730699;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" width="15.23763" height="15.23763" x="41.862" y="281.64243" rx="0" ry="6.2100134" transform="matrix(0.49621774,-0.86819811,0.49621774,0.86819811,0,0)"></rect><rect transform="matrix(0.49621774,-0.86819811,0.49621774,0.86819811,0,0)" ry="6.2100134" rx="0" y="296.04007" x="27.464363" height="15.23763" width="15.23763" style="opacity:1;fill:#008000;fill-opacity:1;stroke:#008000;stroke-width:1.07730699;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect></svg>',i=g(),r=h("div"),l=m(e[0]),c=m(" cards due"),$(o,"id","review_text"),$(o,"class","svelte-1a4uwcd"),$(r,"id","due_count"),$(r,"class","svelte-1a4uwcd"),$(n,"type","button"),$(n,"class","svelte-1a4uwcd")},m(t,f){d(t,n,f),u(n,o),u(n,i),u(n,r),u(r,l),u(r,c),s||(a=v(n,"click",e[1]),s=!0)},p(t,[e]){1&e&&b(l,t[0])},i:t,o:t,d(t){t&&f(n),s=!1,a()}}}function Tt(t,e,n){let o,i;s(t,St,(t=>n(2,i=t)));const r=N();return t.$$.update=()=>{4&t.$$.dirty&&n(0,o=i+(St>=50?"+":""))},[o,function(){r("click")},i]}class It extends nt{constructor(t){super(),et(this,t,Tt,Rt,r,{})}}function At(e){let n,o,i,r,l,c,s,a;return{c(){n=h("button"),o=h("div"),o.innerHTML='Create\n  <svg id="svg_inkwell" viewBox="0 5 150 205" version="1.0" class="svelte-4e9y69"><path id="path1910" d="M 20.382927,148.85388 C 15.003029,148.16236 14.991336,148.14842 15.375994,142.88543 C 15.813941,136.89333 17.052355,127.55395 17.666511,125.61171 C 18.305239,123.59175 20.350833,121.89374 24.794224,119.69508 C 26.752539,118.72608 28.354799,117.66442 28.354799,117.33583 C 28.354799,116.98214 27.507949,116.67713 26.279055,116.58822 L 24.203311,116.43803 L 24.203311,113.01916 L 24.203311,109.60029 L 30.064235,109.46249 C 35.570572,109.33302 35.956118,109.25915 36.4369,108.24146 C 36.718361,107.64569 37.625642,105.83953 38.453082,104.22777 C 39.280517,102.61602 40.856261,99.429148 41.954725,97.14583 C 43.053194,94.862511 44.719601,91.675634 45.657847,90.06388 C 46.596097,88.452126 47.519437,86.803742 47.709712,86.400803 C 47.899987,85.997865 48.623069,84.785425 49.316567,83.706488 C 50.706988,81.543285 50.694583,81.563251 54.318904,75.655777 C 58.801182,68.349867 61.534175,64.940177 73.10987,52.212083 C 80.455986,44.134634 86.176135,38.478062 91.115521,34.406551 C 92.9959,32.856567 97.236723,29.059064 100.53957,25.967657 C 103.84242,22.876249 106.65476,20.456928 106.78922,20.591388 C 106.92368,20.725847 106.24607,22.454263 105.28341,24.43231 C 104.32075,26.410352 103.60236,28.469905 103.68698,29.009085 C 103.78676,29.644864 104.83183,28.00443 106.66047,24.341641 C 109.31491,19.024743 109.67775,18.545955 112.85377,16.169199 C 114.70929,14.780629 118.26972,12.575733 120.76584,11.269429 C 125.88481,8.5904968 129.50678,6.4897841 133.20157,4.0568016 C 137.51721,1.2149961 137.67943,1.9571883 134.11919,8.2551567 C 132.98028,10.269849 131.50101,13.127047 130.83191,14.604489 C 130.16282,16.08193 127.89704,20.477622 125.79685,24.372694 C 121.15259,32.986049 119.95628,35.216419 117.28278,40.246029 C 115.15812,44.243115 113.76355,46.079963 112.22319,46.910201 C 111.74425,47.168346 108.33759,48.432601 104.65283,49.719662 C 100.96807,51.006726 97.034091,52.530473 95.91066,53.105771 C 92.287676,54.961056 92.764926,55.946317 96.443754,54.206316 C 99.724572,52.654568 110.8196,49.042286 111.18442,49.407104 C 111.70937,49.932052 107.20784,55.743998 95.204355,70.039059 C 93.399845,72.188064 90.186349,76.034295 88.063254,78.586239 C 84.049635,83.41058 81.681412,85.408476 79.93196,85.44601 C 79.367275,85.458127 78.245909,85.769953 77.440033,86.138962 L 75.974802,86.809876 L 78.294751,86.849545 C 79.570722,86.871362 80.614699,87.07373 80.614699,87.299254 C 80.614699,87.672707 78.036948,89.863915 72.628185,94.088157 C 67.964922,97.730164 59.857116,101.7988 50.931418,104.97597 C 49.514339,105.48039 46.991788,106.61733 45.325752,107.50249 L 42.296592,109.11188 L 45.704417,109.35608 L 49.112236,109.60029 L 49.112236,113.01916 L 49.112236,116.43803 L 47.280697,116.58962 C 45.41941,116.74366 44.875198,117.59154 46.059672,118.49197 C 46.395454,118.74724 47.769108,119.35421 49.112236,119.8408 C 50.628867,120.39025 52.387168,121.5789 53.752134,122.97747 C 55.854359,125.13144 55.987255,125.44191 56.806725,130.11352 C 57.277933,132.79978 57.805563,137.79273 57.979232,141.20897 L 58.294999,147.42031 L 57.022055,147.90428 C 53.410422,149.27742 28.667093,149.9187 20.382927,148.85388 z " style="fill:purple"></path></svg>',i=g(),r=h("div"),l=m(e[0]),c=m(" created today"),$(o,"id","create_text"),$(o,"class","svelte-4e9y69"),$(r,"id","due_count"),$(r,"class","svelte-4e9y69"),$(n,"type","button"),$(n,"class","svelte-4e9y69")},m(t,f){d(t,n,f),u(n,o),u(n,i),u(n,r),u(r,l),u(r,c),s||(a=v(n,"click",e[1]),s=!0)},p(t,[e]){1&e&&b(l,t[0])},i:t,o:t,d(t){t&&f(n),s=!1,a()}}}function Ut(t,e,n){let o;s(t,zt,(t=>n(0,o=t)));const i=N();return[o,function(){i("click")}]}class Pt extends nt{constructor(t){super(),et(this,t,Ut,At,r,{})}}const Ht=ct(null);function Bt(e){let n,i,r,l,c,s,a,p,_,y,k,x,C,q,S,z,M=(e[0].front_text?e[0].front_text:"(blank)")+"";return{c(){n=h("div"),i=h("button"),i.textContent="✕",r=m(" \n    "),l=h("button"),l.textContent="👁",c=m(" \n    "),s=h("button"),s.textContent="✍",a=m(" \n    "),p=new L(!1),_=g(),y=h("span"),k=m("due "),x=g(),C=h("span"),q=m(M),$(i,"type","button"),$(i,"class","button svelte-1h67b8b"),w(i,"color","darkred",!1),$(l,"type","button"),$(l,"class","button svelte-1h67b8b"),$(s,"type","button"),$(s,"class","button svelte-1h67b8b"),p.a=_,$(y,"class","front_text svelte-1h67b8b"),w(y,"color","purple"),w(y,"display",e[2]),w(y,"font-size","14px",!1),$(C,"class","front_text svelte-1h67b8b"),w(C,"text-decoration",e[3]),$(n,"class","card_container svelte-1h67b8b")},m(t,o){d(t,n,o),u(n,i),u(n,r),u(n,l),u(n,c),u(n,s),u(n,a),p.m(e[1],n),u(n,_),u(n,y),u(y,k),u(n,x),u(n,C),u(C,q),S||(z=[v(i,"click",e[4]),v(l,"click",e[5]),v(s,"click",e[6])],S=!0)},p(t,[e]){2&e&&p.p(t[1]),4&e&&w(y,"display",t[2]),1&e&&M!==(M=(t[0].front_text?t[0].front_text:"(blank)")+"")&&b(q,M),8&e&&w(C,"text-decoration",t[3])},i:t,o:t,d(t){t&&f(n),S=!1,o(z)}}}function Jt(t,e,n){let o,i,r,l,c;s(t,Ht,(t=>n(8,c=t)));let{card:a}=e,u=rt();return t.$$set=t=>{"card"in t&&n(0,a=t.card)},t.$$.update=()=>{1&t.$$.dirty&&n(3,o="deleted"===a.visibility?"line-through":""),1&t.$$.dirty&&n(7,i=a.due_date<u),129&t.$$.dirty&&n(2,r=i&&"visible"===a.visibility?"inline":"none"),256&t.$$.dirty&&n(1,l=function(t){switch(t){case"":default:return"";case"create_date":return"Created <b><mark>"+Math.trunc(u-a[t])+"</mark></b> days ago";case"due_date":return"Due in <b><mark>"+Math.trunc(a[t]-u)+"</mark></b> days";case"last_review_date":return"Last reviewed <b><mark>"+Math.trunc(u-a[t])+"</mark></b> days ago";case"last_edit_date":return"Last edited <b><mark>"+Math.trunc(u-a[t])+"</mark></b> days ago";case"review_seconds":return"Spent <b><mark>"+Math.floor(a[t])+"</mark></b> seconds reviewing";case"edit_seconds":return"Spent <b><mark>"+Math.floor(a[t])+"</mark></b> seconds editing";case"total_seconds":return"Spent <b><mark>"+Math.floor(a[t])+"</mark></b> seconds";case"card_type":case"merit":return"<b><mark>"+a[t]+"</mark></b>";case"tags":return"tags: <b><mark>"+a[t]+"</mark></b>"}}(c))},[a,l,r,o,async function(){n(0,a.visibility="visible"===a.visibility?"deleted":"visible",a),$t(a)},function(){ut.set(a)},function(){at.set(a)},i,c]}class Dt extends nt{constructor(t){super(),et(this,t,Jt,Bt,r,{card:0})}}const Ft=ct([]);function Gt(e){let n,o,i,r,l,c;return U(e[4]),{c(){n=h("div"),o=h("span"),o.textContent="?",i=g(),r=h("span"),$(o,"class","question_mark svelte-1d9etfy"),$(r,"class","tooltiptext svelte-1d9etfy"),$(n,"class","tooltip svelte-1d9etfy")},m(t,s){d(t,n,s),u(n,o),u(n,i),u(n,r),r.innerHTML=e[0],e[5](r),e[6](n),l||(c=v(window,"resize",e[4]),l=!0)},p(t,[e]){1&e&&(r.innerHTML=t[0])},i:t,o:t,d(t){t&&f(n),e[5](null),e[6](null),l=!1,c()}}}function Xt(t,e,n){let o,i,r,{text:l}=e;return M((()=>{const t=o.getBoundingClientRect(),e=t.left,l=r-t.right;n(2,i.style["margin-left"]=e<120?"-"+e+"px":l<120?"-"+(240-l)+"px":"-120px",i)})),t.$$set=t=>{"text"in t&&n(0,l=t.text)},[l,o,i,r,function(){n(3,r=window.innerWidth)},function(t){j[t?"unshift":"push"]((()=>{i=t,n(2,i)}))},function(t){j[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}!async function(){const t=await async function(){const t=new URL(gt+"collection_tags");var e=vt();return e.method="GET",(await fetch(t,e)).json()}();Ft.set(t)}();class Yt extends nt{constructor(t){super(),et(this,t,Xt,Gt,r,{text:0})}}function Wt(t,e,n){const o=t.slice();return o[17]=e[n],o}function Qt(t){let e;return{c(){e=m("due:")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function Vt(t){let e;return{c(){e=m("new:")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function Zt(t){let e;return{c(){e=m("deleted:")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function Kt(e){let n,o,i,r,l,c;return i=new Yt({props:{text:"Purged cards will never be seen again.<br><br>(However, vinca never destroys data and it is possible to manually recover purged cards from the database)."}}),{c(){n=h("button"),o=m("purge\n                "),Z(i.$$.fragment),$(n,"type","button"),$(n,"class","svelte-qm6084"),w(n,"border-radius","4px",!1),w(n,"color","red",!1)},m(t,s){d(t,n,s),u(n,o),K(i,n,null),e[9](n),r=!0,l||(c=v(n,"click",e[5]),l=!0)},p:t,i(t){r||(W(i.$$.fragment,t),r=!0)},o(t){Q(i.$$.fragment,t),r=!1},d(t){t&&f(n),tt(i),e[9](null),l=!1,c()}}}function te(t){let e;return{c(){e=m("images:")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function ee(t){let e;return{c(){e=m("audio:")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function ne(t){let e,n,o,i=t[17]+"";return{c(){e=h("option"),n=m(i),e.__value=o=t[17],e.value=e.__value},m(t,o){d(t,e,o),u(e,n)},p(t,r){16&r&&i!==(i=t[17]+"")&&b(n,i),16&r&&o!==(o=t[17])&&(e.__value=o,e.value=e.__value)},d(t){t&&f(e)}}}function oe(t){let e,n,i,r,l,c,s,a,_,y,b,k,w,C,L,q,S,z,M,N,O,E,R,T,I,A,H,B,J,D,F,G,et,nt,ot,it,rt,lt,ct,st,at,ut,dt,ft,pt,ht,mt,gt,_t,vt,$t,yt,bt,kt,wt,xt,Ct,Lt,qt;function St(e){t[6](e)}let zt={$$slots:{default:[Qt]},$$scope:{ctx:t}};function Mt(e){t[7](e)}void 0!==t[3].due&&(zt.state=t[3].due),i=new Et({props:zt}),j.push((()=>V(i,"state",St)));let Nt={$$slots:{default:[Vt]},$$scope:{ctx:t}};function Ot(e){t[8](e)}void 0!==t[3].new&&(Nt.state=t[3].new),c=new Et({props:Nt}),j.push((()=>V(c,"state",Mt)));let jt={$$slots:{default:[Zt]},$$scope:{ctx:t}};void 0!==t[3].deleted&&(jt.state=t[3].deleted),_=new Et({props:jt}),j.push((()=>V(_,"state",Ot)));let Rt=t[3].deleted&&Kt(t);function Tt(e){t[10](e)}let It={$$slots:{default:[te]},$$scope:{ctx:t}};function At(e){t[11](e)}void 0!==t[3].images&&(It.state=t[3].images),w=new Et({props:It}),j.push((()=>V(w,"state",Tt)));let Ut={$$slots:{default:[ee]},$$scope:{ctx:t}};void 0!==t[3].audio&&(Ut.state=t[3].audio),q=new Et({props:Ut}),j.push((()=>V(q,"state",At)));let Pt=t[4],Ht=[];for(let e=0;e<Pt.length;e+=1)Ht[e]=ne(Wt(t,Pt,e));return{c(){e=h("div"),n=h("div"),Z(i.$$.fragment),l=g(),Z(c.$$.fragment),a=g(),Z(_.$$.fragment),b=g(),Rt&&Rt.c(),k=g(),Z(w.$$.fragment),L=g(),Z(q.$$.fragment),z=g(),M=h("div"),N=h("span"),O=m("Type:\n"),E=h("select"),R=h("option"),T=h("option"),T.textContent="basic",I=h("option"),I.textContent="verses",A=h("option"),A.textContent="occlusion",H=g(),B=h("span"),J=m("Info: \n"),D=h("select"),F=h("option"),G=h("option"),G.textContent="created",et=h("option"),et.textContent="due date",nt=h("option"),nt.textContent="last review",ot=h("option"),ot.textContent="editing time",it=h("option"),it.textContent="review time",rt=h("option"),rt.textContent="total time",lt=h("option"),lt.textContent="card type",ct=h("option"),ct.textContent="tags",st=h("option"),st.textContent="merit",at=g(),ut=h("div"),dt=h("span"),ft=m("Sort: \n"),pt=h("select"),ht=h("option"),ht.textContent="recent",mt=h("option"),mt.textContent="old",gt=h("option"),gt.textContent="overdue",_t=h("option"),_t.textContent="total time",vt=h("option"),vt.textContent="random",$t=h("option"),$t.textContent="merit",yt=g(),bt=h("span"),kt=m("Tag: \n"),wt=h("select"),xt=h("option");for(let t=0;t<Ht.length;t+=1)Ht[t].c();$(n,"class","tristates svelte-qm6084"),R.__value="",R.value=R.__value,T.__value="basic",T.value=T.__value,I.__value="verses",I.value=I.__value,A.__value="occlusion",A.value=A.__value,$(E,"class","svelte-qm6084"),void 0===t[3].card_type&&U((()=>t[12].call(E))),F.__value="",F.value=F.__value,G.__value="create_date",G.value=G.__value,et.__value="due_date",et.value=et.__value,nt.__value="last_review_date",nt.value=nt.__value,ot.__value="edit_seconds",ot.value=ot.__value,it.__value="review_seconds",it.value=it.__value,rt.__value="total_seconds",rt.value=rt.__value,lt.__value="card_type",lt.value=lt.__value,ct.__value="tags",ct.value=ct.__value,st.__value="merit",st.value=st.__value,$(D,"class","svelte-qm6084"),void 0===t[0]&&U((()=>t[13].call(D))),$(M,"class","selectors svelte-qm6084"),ht.__value="recent",ht.value=ht.__value,mt.__value="old",mt.value=mt.__value,gt.__value="overdue",gt.value=gt.__value,_t.__value="total time",_t.value=_t.__value,vt.__value="random",vt.value=vt.__value,$t.__value="merit",$t.value=$t.__value,$(pt,"class","svelte-qm6084"),void 0===t[1]&&U((()=>t[14].call(pt))),xt.__value="",xt.value=xt.__value,$(wt,"class","svelte-qm6084"),void 0===t[3].tag&&U((()=>t[15].call(wt))),$(ut,"class","selectors svelte-qm6084"),$(e,"class","master svelte-qm6084")},m(o,r){d(o,e,r),u(e,n),K(i,n,null),u(n,l),K(c,n,null),u(n,a),K(_,n,null),u(n,b),Rt&&Rt.m(n,null),u(n,k),K(w,n,null),u(n,L),K(q,n,null),u(e,z),u(e,M),u(M,N),u(N,O),u(N,E),u(E,R),u(E,T),u(E,I),u(E,A),x(E,t[3].card_type),u(M,H),u(M,B),u(B,J),u(B,D),u(D,F),u(D,G),u(D,et),u(D,nt),u(D,ot),u(D,it),u(D,rt),u(D,lt),u(D,ct),u(D,st),x(D,t[0]),u(e,at),u(e,ut),u(ut,dt),u(dt,ft),u(dt,pt),u(pt,ht),u(pt,mt),u(pt,gt),u(pt,_t),u(pt,vt),u(pt,$t),x(pt,t[1]),u(ut,yt),u(ut,bt),u(bt,kt),u(bt,wt),u(wt,xt);for(let t=0;t<Ht.length;t+=1)Ht[t].m(wt,null);x(wt,t[3].tag),Ct=!0,Lt||(qt=[v(E,"change",t[12]),v(D,"change",t[13]),v(pt,"change",t[14]),v(wt,"change",t[15])],Lt=!0)},p(t,[e]){const o={};1048576&e&&(o.$$scope={dirty:e,ctx:t}),!r&&8&e&&(r=!0,o.state=t[3].due,P((()=>r=!1))),i.$set(o);const l={};1048576&e&&(l.$$scope={dirty:e,ctx:t}),!s&&8&e&&(s=!0,l.state=t[3].new,P((()=>s=!1))),c.$set(l);const a={};1048576&e&&(a.$$scope={dirty:e,ctx:t}),!y&&8&e&&(y=!0,a.state=t[3].deleted,P((()=>y=!1))),_.$set(a),t[3].deleted?Rt?(Rt.p(t,e),8&e&&W(Rt,1)):(Rt=Kt(t),Rt.c(),W(Rt,1),Rt.m(n,k)):Rt&&(X(),Q(Rt,1,1,(()=>{Rt=null})),Y());const u={};1048576&e&&(u.$$scope={dirty:e,ctx:t}),!C&&8&e&&(C=!0,u.state=t[3].images,P((()=>C=!1))),w.$set(u);const d={};if(1048576&e&&(d.$$scope={dirty:e,ctx:t}),!S&&8&e&&(S=!0,d.state=t[3].audio,P((()=>S=!1))),q.$set(d),8&e&&x(E,t[3].card_type),1&e&&x(D,t[0]),2&e&&x(pt,t[1]),16&e){let n;for(Pt=t[4],n=0;n<Pt.length;n+=1){const o=Wt(t,Pt,n);Ht[n]?Ht[n].p(o,e):(Ht[n]=ne(o),Ht[n].c(),Ht[n].m(wt,null))}for(;n<Ht.length;n+=1)Ht[n].d(1);Ht.length=Pt.length}8&e&&x(wt,t[3].tag)},i(t){Ct||(W(i.$$.fragment,t),W(c.$$.fragment,t),W(_.$$.fragment,t),W(Rt),W(w.$$.fragment,t),W(q.$$.fragment,t),Ct=!0)},o(t){Q(i.$$.fragment,t),Q(c.$$.fragment,t),Q(_.$$.fragment,t),Q(Rt),Q(w.$$.fragment,t),Q(q.$$.fragment,t),Ct=!1},d(t){t&&f(e),tt(i),tt(c),tt(_),Rt&&Rt.d(),tt(w),tt(q),p(Ht,t),Lt=!1,o(qt)}}}function ie(t,e,n){let o,i,r,l;s(t,mt,(t=>n(1,o=t))),s(t,ht,(t=>n(3,i=t))),s(t,Ht,(t=>n(16,r=t))),s(t,Ft,(t=>n(4,l=t)));let c,a=r;return t.$$.update=()=>{if(2&t.$$.dirty)switch(o){case"old":n(0,a="create_date");break;case"overdue":n(0,a="due_date");break;case"total time":n(0,a="total_seconds");break;case"merit":n(0,a="merit");break;default:n(0,a=null)}1&t.$$.dirty&&Ht.set(a)},[a,o,c,i,l,function(){confirm("Purge deleted cards?")&&(!async function(t){const e=new URL(gt+"purge");var n=vt();n.body=JSON.stringify(t),await fetch(e,n)}(i),n(2,c.style.display="none",c))},function(e){t.$$.not_equal(i.due,e)&&(i.due=e,ht.set(i))},function(e){t.$$.not_equal(i.new,e)&&(i.new=e,ht.set(i))},function(e){t.$$.not_equal(i.deleted,e)&&(i.deleted=e,ht.set(i))},function(t){j[t?"unshift":"push"]((()=>{c=t,n(2,c)}))},function(e){t.$$.not_equal(i.images,e)&&(i.images=e,ht.set(i))},function(e){t.$$.not_equal(i.audio,e)&&(i.audio=e,ht.set(i))},function(){i.card_type=C(this),ht.set(i)},function(){a=C(this),n(0,a),n(1,o)},function(){o=C(this),mt.set(o)},function(){i.tag=C(this),ht.set(i)}]}class re extends nt{constructor(t){super(),et(this,t,ie,oe,r,{})}}function le(t){let e,n,i,r,l,c,s,a,p,_,y,x,C,L,q;return x=new re({}),{c(){e=h("center"),n=m("Search: "),i=h("input"),r=g(),l=h("button"),c=m(t[1]),s=m(" Filters "),a=h("b"),p=m(t[2]),_=g(),y=h("div"),Z(x.$$.fragment),$(i,"type","search"),$(l,"type","button"),w(y,"display",t[0]?"block":"none",!1)},m(o,f){d(o,e,f),u(e,n),u(e,i),k(i,t[3].search),u(e,r),u(e,l),u(l,c),u(l,s),u(l,a),u(a,p),d(o,_,f),d(o,y,f),K(x,y,null),C=!0,L||(q=[v(i,"input",t[5]),v(l,"click",t[4])],L=!0)},p(t,[e]){8&e&&k(i,t[3].search),(!C||2&e)&&b(c,t[1]),(!C||4&e)&&b(p,t[2]),1&e&&w(y,"display",t[0]?"block":"none",!1)},i(t){C||(W(x.$$.fragment,t),C=!0)},o(t){Q(x.$$.fragment,t),C=!1},d(t){t&&f(e),t&&f(_),t&&f(y),tt(x),L=!1,o(q)}}}function ce(t,e,n){let o,i,r;s(t,ht,(t=>n(3,r=t)));let l=!1;return t.$$.update=()=>{1&t.$$.dirty&&n(2,o=l?"-":"+"),1&t.$$.dirty&&n(1,i=l?"Less":"More")},[l,i,o,r,()=>{n(0,l=!l)},function(){r.search=this.value,ht.set(r)}]}class se extends nt{constructor(t){super(),et(this,t,ce,le,r,{})}}function ae(t,e,n){const o=t.slice();return o[4]=e[n],o}function ue(t){let e,n;return e=new Dt({props:{card:t[4]}}),{c(){Z(e.$$.fragment)},m(t,o){K(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.card=t[4]),e.$set(o)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function de(t){let e,n,o=t[0],i=[];for(let e=0;e<o.length;e+=1)i[e]=ue(ae(t,o,e));const r=t=>Q(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("div");for(let t=0;t<i.length;t+=1)i[t].c();w(e,"height","fit-content",!1)},m(o,r){d(o,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);t[3](e),n=!0},p(t,[n]){if(1&n){let l;for(o=t[0],l=0;l<o.length;l+=1){const r=ae(t,o,l);i[l]?(i[l].p(r,n),W(i[l],1)):(i[l]=ue(r),i[l].c(),W(i[l],1),i[l].m(e,null))}for(X(),l=o.length;l<i.length;l+=1)r(l);Y()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)W(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Q(i[t]);n=!1},d(n){n&&f(e),p(i,n),t[3](null)}}}function fe(t,e,n){let o,{cards:i=[]}=e,{height:r=0}=e;var l;return l=()=>{n(2,r=o.clientHeight)},z().$$.after_update.push(l),t.$$set=t=>{"cards"in t&&n(0,i=t.cards),"height"in t&&n(2,r=t.height)},[i,o,r,function(t){j[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class pe extends nt{constructor(t){super(),et(this,t,fe,de,r,{cards:0,height:2})}}function he(t,e,n){const o=t.slice();return o[6]=e[n],o[7]=e,o[8]=n,o}function me(t){let e,n,o;function i(e){t[5](e,t[6])}let r={cards:t[1][t[6]]};return void 0!==t[2][t[6]]&&(r.height=t[2][t[6]]),e=new pe({props:r}),j.push((()=>V(e,"height",i))),{c(){Z(e.$$.fragment)},m(t,n){K(e,t,n),o=!0},p(o,i){t=o;const r={};3&i&&(r.cards=t[1][t[6]]),!n&&5&i&&(n=!0,r.height=t[2][t[6]],P((()=>n=!1))),e.$set(r)},i(t){o||(W(e.$$.fragment,t),o=!0)},o(t){Q(e.$$.fragment,t),o=!1},d(t){tt(e,t)}}}function ge(t){let e,n,o=[...Array(t[0]).keys()],i=[];for(let e=0;e<o.length;e+=1)i[e]=me(he(t,o,e));const r=t=>Q(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("div");for(let t=0;t<i.length;t+=1)i[t].c();$(e,"class","columns svelte-1yx9avh"),w(e,"grid-template-columns",t[3],!1)},m(t,o){d(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,[n]){if(7&n){let l;for(o=[...Array(t[0]).keys()],l=0;l<o.length;l+=1){const r=he(t,o,l);i[l]?(i[l].p(r,n),W(i[l],1)):(i[l]=me(r),i[l].c(),W(i[l],1),i[l].m(e,null))}for(X(),l=o.length;l<i.length;l+=1)r(l);Y()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)W(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Q(i[t]);n=!1},d(t){t&&f(e),p(i,t)}}}function _e(t,e,n){let{cards:o=[]}=e,{cols:i}=e,r=Array(i).fill(Math.floor(100/i)+"%").join(" "),l=[];for(let t of Array(i))l.push([]);let c=Array(i).fill(0);return M((async()=>{let t;for(let e of o)await(A(),T),t=c.indexOf(Math.min(...c)),l[t].push(e),n(1,l)})),t.$$set=t=>{"cards"in t&&n(4,o=t.cards),"cols"in t&&n(0,i=t.cols)},[i,l,c,r,o,function(e,o){t.$$.not_equal(c[o],e)&&(c[o]=e,n(2,c))}]}class ve extends nt{constructor(t){super(),et(this,t,_e,ge,r,{cards:4,cols:0})}}function $e(e){let n,o,i,r=e[1][e[0]]+"";return{c(){n=h("pre"),o=m("Loading... "),i=m(r),w(n,"font-family","monospace",!1),w(n,"font-size","20px",!1)},m(t,e){d(t,n,e),u(n,o),u(n,i)},p(t,[e]){1&e&&r!==(r=t[1][t[0]]+"")&&b(i,r)},i:t,o:t,d(t){t&&f(n)}}}function ye(t,e,n){const o=["-","/","|","\\"];let i=0;const r=setInterval((()=>{n(0,i+=1),n(0,i%=o.length)}),90);var l;return l=()=>{clearInterval(r)},z().$$.on_destroy.push(l),[i,o]}class be extends nt{constructor(t){super(),et(this,t,ye,$e,r,{})}}function ke(t){let e,n,i,r,l,c,s,a;return{c(){e=m("Hello, "),n=m(t[2]),i=g(),r=h("a"),r.textContent="sign out",l=m(" or\n        "),c=h("a"),c.textContent="switch account",$(r,"class","login_button svelte-4whwfg"),$(c,"class","login_button svelte-4whwfg")},m(o,u){d(o,e,u),d(o,n,u),d(o,i,u),d(o,r,u),d(o,l,u),d(o,c,u),s||(a=[v(r,"click",t[9]),v(c,"click",t[10])],s=!0)},p(t,e){4&e&&b(n,t[2])},d(t){t&&f(e),t&&f(n),t&&f(i),t&&f(r),t&&f(l),t&&f(c),s=!1,o(a)}}}function we(e){let n,o,i,r;return{c(){n=m("Welcome, guest\n        "),o=h("button"),o.textContent="login / register",$(o,"class","login_button svelte-4whwfg"),$(o,"type","button")},m(t,l){d(t,n,l),d(t,o,l),i||(r=v(o,"click",e[8]),i=!0)},p:t,d(t){t&&f(n),t&&f(o),i=!1,r()}}}function xe(e){let n,o,i=e[13].message+"";return{c(){n=h("p"),o=m(i),w(n,"color","red")},m(t,e){d(t,n,e),u(n,o)},p:t,i:t,o:t,d(t){t&&f(n)}}}function Ce(e){let n,o,i=e[1],l=Le(e);return{c(){l.c(),n=_()},m(t,e){l.m(t,e),d(t,n,e),o=!0},p(e,o){2&o&&r(i,i=e[1])?(X(),Q(l,1,1,t),Y(),l=Le(e),l.c(),W(l,1),l.m(n.parentNode,n)):l.p(e,o)},i(t){o||(W(l),o=!0)},o(t){Q(l),o=!1},d(t){t&&f(n),l.d(t)}}}function Le(t){let e,n;return e=new ve({props:{cards:t[12],cols:t[1]}}),{c(){Z(e.$$.fragment)},m(t,o){K(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.cols=t[1]),e.$set(o)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function qe(e){let n,o,i;return o=new be({}),{c(){n=h("p"),Z(o.$$.fragment)},m(t,e){d(t,n,e),K(o,n,null),i=!0},p:t,i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){Q(o.$$.fragment,t),i=!1},d(t){t&&f(n),tt(o)}}}function Se(t){let e,n,o={ctx:t,current:null,token:null,hasCatch:!0,pending:qe,then:Ce,catch:xe,value:12,error:13,blocks:[,,,]};return function(t,e){const n=e.token={};function o(t,o,i,r){if(e.token!==n)return;e.resolved=r;let l=e.ctx;void 0!==i&&(l=l.slice(),l[i]=r);const c=t&&(e.current=t)(l);let s=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(X(),Q(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),Y())})):e.block.d(1),c.c(),W(c,1),c.m(e.mount(),e.anchor),s=!0),e.block=c,e.blocks&&(e.blocks[o]=c),s&&J()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=z();if(t.then((t=>{S(n),o(e.then,1,e.value,t),S(null)}),(t=>{if(S(n),o(e.catch,2,e.error,t),S(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var i}(async function(){var t=vt();const e=new URL(gt+"cardlist"),n={crit:{sort:c(mt)},filters:c(ht)};t.body=JSON.stringify(n);const o=await fetch(e,t).then(bt).catch(yt);if(o&&o.ok)return o.json();throw new Error("Could not retrieve cards from the server.")}(),o),{c(){e=_(),o.block.c()},m(t,i){d(t,e,i),o.block.m(t,o.anchor=i),o.mount=()=>e.parentNode,o.anchor=e,n=!0},p(e,n){!function(t,e,n){const o=e.slice(),{resolved:i}=t;t.current===t.then&&(o[t.value]=i),t.current===t.catch&&(o[t.error]=i),t.block.p(o,n)}(o,t=e,n)},i(t){n||(W(o.block),n=!0)},o(t){for(let t=0;t<3;t+=1){Q(o.blocks[t])}n=!1},d(t){t&&f(e),o.block.d(t),o.token=null,o=null}}}function ze(e){let n,o,i=e[4],l=Se(e);return{c(){l.c(),n=_()},m(t,e){l.m(t,e),d(t,n,e),o=!0},p(e,o){16&o&&r(i,i=e[4])?(X(),Q(l,1,1,t),Y(),l=Se(e),l.c(),W(l,1),l.m(n.parentNode,n)):l.p(e,o)},i(t){o||(W(l),o=!0)},o(t){Q(l),o=!1},d(t){t&&f(n),l.d(t)}}}function Me(e){let n,o,i,l,c,s,a,p,m,_,y,b,k,x,C,L,q={...e[3]};function S(t,e){return"guest"===t[2]?we:ke}U(e[7]);let z=S(e),M=z(e);a=new It({}),a.$on("click",e[6]),m=new Pt({}),m.$on("click",e[5]),b=new se({});let N=ze(e);return{c(){n=h("body"),o=h("div"),M.c(),i=g(),l=h("a"),l.textContent="Links",c=g(),s=h("div"),Z(a.$$.fragment),p=g(),Z(m.$$.fragment),_=g(),y=h("div"),Z(b.$$.fragment),k=g(),N.c(),w(l,"float","right"),w(l,"position","relative"),$(l,"href","http://docs.vinca.study/links.html"),$(s,"id","major_buttons"),$(s,"class","svelte-4whwfg"),$(o,"class","top svelte-4whwfg"),w(y,"margin","20px",!1)},m(t,r){d(t,n,r),u(n,o),M.m(o,null),u(o,i),u(o,l),u(o,c),u(o,s),K(a,s,null),u(s,p),K(m,s,null),u(n,_),u(n,y),K(b,y,null),u(n,k),N.m(n,null),x=!0,C||(L=v(window,"resize",e[7]),C=!0)},p(e,[l]){z===(z=S(e))&&M?M.p(e,l):(M.d(1),M=z(e),M&&(M.c(),M.m(o,i))),8&l&&r(q,q={...e[3]})?(X(),Q(N,1,1,t),Y(),N=ze(e),N.c(),W(N,1),N.m(n,null)):N.p(e,l)},i(t){x||(W(a.$$.fragment,t),W(m.$$.fragment,t),W(b.$$.fragment,t),W(N),x=!0)},o(t){Q(a.$$.fragment,t),Q(m.$$.fragment,t),Q(b.$$.fragment,t),Q(N),x=!1},d(t){t&&f(n),M.d(),tt(a),tt(m),tt(b),N.d(t),C=!1,L()}}}function Ne(t,e,n){let o,i,r,l,c,a;s(t,Mt,(t=>n(11,i=t))),s(t,pt,(t=>n(2,r=t))),s(t,ht,(t=>n(3,l=t))),s(t,mt,(t=>n(4,c=t)));return t.$$.update=()=>{1&t.$$.dirty&&n(1,o=Math.floor(a/450)||1)},[a,o,r,l,c,function(){let t={...Nt()};at.set(t)},function(){dt.set(i[0])},function(){n(0,a=window.innerWidth)},()=>{pt.set("")},()=>{pt.set("guest")},()=>{pt.set("")}]}class Oe extends nt{constructor(t){super(),et(this,t,Ne,Me,r,{})}}function je(e){let n,o,i;return{c(){n=h("textarea"),$(n,"class","svelte-o80sq3")},m(t,r){d(t,n,r),k(n,e[0]),e[4](n),o||(i=v(n,"input",e[3]),o=!0)},p(t,[e]){1&e&&k(n,t[0])},i:t,o:t,d(t){t&&f(n),e[4](null),o=!1,i()}}}function Ee(t,e,n){let o,{value:i=null}=e,{placeholder:r}=e;return t.$$set=t=>{"value"in t&&n(0,i=t.value),"placeholder"in t&&n(2,r=t.placeholder)},t.$$.update=()=>{6&t.$$.dirty&&o&&n(1,o.placeholder=r,o)},[i,o,r,function(){i=this.value,n(0,i)},function(t){j[t?"unshift":"push"]((()=>{o=t,n(1,o),n(2,r)}))}]}class Re extends nt{constructor(t){super(),et(this,t,Ee,je,r,{value:0,placeholder:2})}}function Te(e){let n,i,r,l,c,s,a,p,_,y,k,x;return{c(){n=h("input"),i=g(),r=h("button"),l=m(" \n\t♬\n\t \n\t"),c=h("span"),c.textContent="↑",s=m("\n\t \n\t🕪\n\t"),a=h("br"),p=g(),_=h("span"),y=m(e[1]),$(n,"type","file"),$(n,"accept",".mp3,.wav,.ogg"),w(n,"display","none"),w(c,"font-size","32px"),w(_,"font-size","16px"),$(r,"class","svelte-1ur4qxs")},m(t,o){d(t,n,o),e[2](n),d(t,i,o),d(t,r,o),u(r,l),u(r,c),u(r,s),u(r,a),u(r,p),u(r,_),u(_,y),k||(x=[v(n,"change",e[3]),v(r,"click",e[4])],k=!0)},p(t,[e]){2&e&&b(y,t[1])},i:t,o:t,d(t){t&&f(n),e[2](null),t&&f(i),t&&f(r),k=!1,o(x)}}}function Ie(t,e,n){let o,i="Choose audio";return[o,i,function(t){j[t?"unshift":"push"]((()=>{o=t,n(0,o)}))},function(){i=this.value,n(1,i)},()=>{o.click()}]}class Ae extends nt{constructor(t){super(),et(this,t,Ie,Te,r,{})}}function Ue(e){let n,i,r,l,c,s,a,p,_,y,k,x,C=(e[0]?"N/A":e[2])+"";return{c(){n=h("input"),i=g(),r=h("button"),l=m(" \n\t🖼\n\t \n\t"),c=h("span"),c.textContent="↑",s=m("\n\t \n\t📷\n\t"),a=h("br"),p=g(),_=h("span"),y=m(C),$(n,"type","file"),$(n,"accept","image/*"),w(n,"display","none"),w(c,"font-size","32px"),w(_,"font-size","16px"),r.disabled=e[0],$(r,"class","svelte-12cjody"),w(r,"background-color",e[0]?"lightgray":"white",!1)},m(t,o){d(t,n,o),e[6](n),d(t,i,o),d(t,r,o),u(r,l),u(r,c),u(r,s),u(r,a),u(r,p),u(r,_),u(_,y),e[7](r),k||(x=[v(n,"change",e[4]),v(r,"click",e[8])],k=!0)},p(t,[e]){5&e&&C!==(C=(t[0]?"N/A":t[2])+"")&&b(y,C),1&e&&(r.disabled=t[0]),1&e&&w(r,"background-color",t[0]?"lightgray":"white",!1)},i:t,o:t,d(t){t&&f(n),e[6](null),t&&f(i),t&&f(r),e[7](null),k=!1,o(x)}}}function Pe(t,e,n){let o,i,{image_id:r}=e,l=null,{disabled:c=!1}=e,s="Choose Image";M((async()=>{if(0!=r){const t=await Lt(r);n(3,i.style["background-image"]="url("+t+")",i)}}));return t.$$set=t=>{"image_id"in t&&n(5,r=t.image_id),"disabled"in t&&n(0,c=t.disabled)},[c,o,s,i,function(){let t=o.files[0];n(2,s=t.name);const e=new FileReader;e.readAsDataURL(t),e.onload=async()=>{let t=await kt(e.result);n(5,r=await t),l="url("+e.result+")",n(3,i.style["background-image"]=l,i)}},r,function(t){j[t?"unshift":"push"]((()=>{o=t,n(1,o)}))},function(t){j[t?"unshift":"push"]((()=>{i=t,n(3,i)}))},()=>{o.click()}]}class He extends nt{constructor(t){super(),et(this,t,Pe,Ue,r,{image_id:5,disabled:0})}}function Be(t){let e,n,o,i,r,l,c,s,a,p,m;function _(e){t[4](e)}function v(e){t[5](e)}let y={};function b(e){t[6](e)}void 0!==t[0]&&(y.value=t[0]),void 0!==t[2]&&(y.placeholder=t[2]),n=new Re({props:y}),j.push((()=>V(n,"value",_))),j.push((()=>V(n,"placeholder",v))),c=new Ae({});let k={disabled:t[3]};return void 0!==t[1]&&(k.image_id=t[1]),a=new He({props:k}),j.push((()=>V(a,"image_id",b))),{c(){e=h("div"),Z(n.$$.fragment),r=g(),l=h("div"),Z(c.$$.fragment),s=g(),Z(a.$$.fragment),$(l,"id","media"),$(l,"class","svelte-uhg411"),$(e,"id","main"),$(e,"class","svelte-uhg411")},m(t,o){d(t,e,o),K(n,e,null),u(e,r),u(e,l),K(c,l,null),u(l,s),K(a,l,null),m=!0},p(t,[e]){const r={};!o&&1&e&&(o=!0,r.value=t[0],P((()=>o=!1))),!i&&4&e&&(i=!0,r.placeholder=t[2],P((()=>i=!1))),n.$set(r);const l={};8&e&&(l.disabled=t[3]),!p&&2&e&&(p=!0,l.image_id=t[1],P((()=>p=!1))),a.$set(l)},i(t){m||(W(n.$$.fragment,t),W(c.$$.fragment,t),W(a.$$.fragment,t),m=!0)},o(t){Q(n.$$.fragment,t),Q(c.$$.fragment,t),Q(a.$$.fragment,t),m=!1},d(t){t&&f(e),tt(n),tt(c),tt(a)}}}function Je(t,e,n){let{text:o}=e,{image_id:i}=e,{placeholder:r}=e,{image_picker_disabled:l}=e;return t.$$set=t=>{"text"in t&&n(0,o=t.text),"image_id"in t&&n(1,i=t.image_id),"placeholder"in t&&n(2,r=t.placeholder),"image_picker_disabled"in t&&n(3,l=t.image_picker_disabled)},[o,i,r,l,function(t){o=t,n(0,o)},function(t){r=t,n(2,r)},function(t){i=t,n(1,i)}]}class De extends nt{constructor(t){super(),et(this,t,Je,Be,r,{text:0,image_id:1,placeholder:2,image_picker_disabled:3})}}function Fe(t,e,n){const o=t.slice();return o[10]=e[n],o[11]=e,o[12]=n,o}function Ge(t){let e,n,o,i,r,l,c,s=t[10]+"";function a(){t[7].call(n,t[10])}return{c(){e=h("label"),n=h("input"),o=g(),i=m(s),r=g(),$(n,"type","checkbox"),$(e,"class","svelte-f8t21t")},m(s,f){d(s,e,f),u(e,n),n.checked=t[1][t[10]],u(e,o),u(e,i),u(e,r),l||(c=v(n,"change",a),l=!0)},p(e,o){t=e,2&o&&(n.checked=t[1][t[10]]),2&o&&s!==(s=t[10]+"")&&b(i,s)},d(t){t&&f(e),l=!1,c()}}}function Xe(t){let e,n=t[10].includes(t[2]),o=n&&Ge(t);return{c(){o&&o.c(),e=_()},m(t,n){o&&o.m(t,n),d(t,e,n)},p(t,i){6&i&&(n=t[10].includes(t[2])),n?o?o.p(t,i):(o=Ge(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},d(t){o&&o.d(t),t&&f(e)}}}function Ye(e){let n,i,r,l,c,s,a,_,y,w,x,C=e[0].tags+"",L=Object.keys(e[1]).reverse(),q=[];for(let t=0;t<L.length;t+=1)q[t]=Xe(Fe(e,L,t));return{c(){n=h("div"),i=h("p"),r=h("b"),l=m(C),c=g(),s=h("button"),s.textContent="+ new tag",a=m(" \n  "),_=h("input"),y=g();for(let t=0;t<q.length;t+=1)q[t].c();$(i,"id","tags_list"),$(i,"class","svelte-f8t21t"),$(s,"type","button"),$(_,"type","search"),$(_,"placeholder","search"),$(n,"id","tags_bar"),$(n,"class","svelte-f8t21t")},m(t,o){d(t,n,o),u(n,i),u(i,r),u(r,l),u(n,c),u(n,s),u(n,a),u(n,_),k(_,e[2]),u(n,y);for(let t=0;t<q.length;t+=1)q[t].m(n,null);w||(x=[v(s,"click",e[5]),v(_,"input",e[6])],w=!0)},p(t,[e]){if(1&e&&C!==(C=t[0].tags+"")&&b(l,C),4&e&&k(_,t[2]),6&e){let o;for(L=Object.keys(t[1]).reverse(),o=0;o<L.length;o+=1){const i=Fe(t,L,o);q[o]?q[o].p(i,e):(q[o]=Xe(i),q[o].c(),q[o].m(n,null))}for(;o<q.length;o+=1)q[o].d(1);q.length=L.length}},i:t,o:t,d(t){t&&f(n),p(q,t),w=!1,o(x)}}}function We(t,e,n){let o,i;s(t,Ft,(t=>n(8,i=t)));let{card:r}=e;function l(t){Ft.update((e=>[t,...e])),n(1,c[t]=!0,c)}let c=i.reduce(((t,e)=>(t[e]=!1,t)),new Map);const a=""===r.tags?[]:r.tags.split(",");for(tag in a)c[tag]=!0;let u="";return t.$$set=t=>{"card"in t&&n(0,r=t.card)},t.$$.update=()=>{2&t.$$.dirty&&n(4,o=Object.entries(c).filter((t=>t[1])).map((t=>t[0]))),16&t.$$.dirty&&n(0,r.tags=o.join(", "),r)},[r,c,u,l,o,()=>{l(prompt("new tag"))},function(){u=this.value,n(2,u)},function(t){c[t]=this.checked,n(1,c)}]}class Qe extends nt{constructor(t){super(),et(this,t,We,Ye,r,{card:0})}}function Ve(t,e,n){const o=t.slice();return o[8]=e[n],o}function Ze(e){let n,o,i,r=e[8]+"";return{c(){n=h("option"),o=m(r),n.__value=i=e[8],n.value=n.__value},m(t,e){d(t,n,e),u(n,o)},p:t,d(t){t&&f(n)}}}function Ke(t){let e,n,i,r,l,c,s,a,_,b,C,L,q,S,z,M,N;n=new Yt({props:{text:"<b>Basic</b>:  class question and answer card <br><br>\n                <b>Verses</b>: tests you line by line (useful for poetry) <br><br>\n                <b>Occlusion</b>: generate several cards by covering up parts of a map or diagram (useful for geography)"}});let O=t[4],j=[];for(let e=0;e<O.length;e+=1)j[e]=Ze(Ve(t,O,e));return L=new Yt({props:{text:"Quantify in minutes the worth of remembering this knowledge.<br><br>\n        This lets you see if the time spent studying a card has been worthwhile. <br><br>\n        It also lets you sort your cards to find the best ones."}}),{c(){e=h("center"),Z(n.$$.fragment),i=m("\n\nCard type:\n"),r=h("select");for(let t=0;t<j.length;t+=1)j[t].c();l=g(),c=h("button"),c.textContent="cancel",s=g(),a=h("button"),a.textContent="preview",_=g(),b=h("button"),b.textContent="save",C=g(),Z(L.$$.fragment),q=m("\nMerit:\n"),S=h("input"),void 0===t[0].card_type&&U((()=>t[5].call(r))),w(r,"background-color","white",!1),$(c,"class","submit_button svelte-1c03v3z"),$(a,"class","submit_button svelte-1c03v3z"),$(b,"class","submit_button svelte-1c03v3z"),$(S,"type","number"),$(S,"min","1"),$(S,"max","60"),w(S,"width","50px",!1)},m(o,f){d(o,e,f),K(n,e,null),u(e,i),u(e,r);for(let t=0;t<j.length;t+=1)j[t].m(r,null);x(r,t[0].card_type),u(e,l),u(e,c),u(e,s),u(e,a),u(e,_),u(e,b),u(e,C),K(L,e,null),u(e,q),u(e,S),k(S,t[0].merit),z=!0,M||(N=[v(r,"change",t[5]),v(c,"click",t[2]),v(a,"click",t[3]),v(b,"click",t[1]),v(S,"input",t[6])],M=!0)},p(t,[e]){if(16&e){let n;for(O=t[4],n=0;n<O.length;n+=1){const o=Ve(t,O,n);j[n]?j[n].p(o,e):(j[n]=Ze(o),j[n].c(),j[n].m(r,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=O.length}17&e&&x(r,t[0].card_type),17&e&&y(S.value)!==t[0].merit&&k(S,t[0].merit)},i(t){z||(W(n.$$.fragment,t),W(L.$$.fragment,t),z=!0)},o(t){Q(n.$$.fragment,t),Q(L.$$.fragment,t),z=!1},d(t){t&&f(e),tt(n),p(j,t),tt(L),M=!1,o(N)}}}function tn(t,e,n){let{card:o}=e;const i=N();const r=["basic","verses","occlusion"];return t.$$set=t=>{"card"in t&&n(0,o=t.card)},[o,()=>{i("save")},()=>{i("cancel")},()=>{i("preview")},r,function(){o.card_type=C(this),n(0,o),n(4,r)},function(){o.merit=y(this.value),n(0,o),n(4,r)}]}class en extends nt{constructor(t){super(),et(this,t,tn,Ke,r,{card:0})}}function nn(t){let e,n,i,r,l,c,s,a,p,_=t[0].width>45&&t[0].height>20?"✣ Move":"";return{c(){e=h("div"),n=h("button"),i=m(_),r=g(),l=h("button"),l.textContent="✗ Del",c=g(),s=h("button"),s.textContent="⤡",$(n,"id","moveButton"),$(n,"type","button"),$(n,"class","svelte-xqaxsl"),$(l,"id","deleteButton"),$(l,"type","button"),$(l,"class","svelte-xqaxsl"),$(s,"id","resizeButton"),$(s,"type","button"),$(s,"class","svelte-xqaxsl"),w(e,"position","absolute",!1),w(e,"top",t[0].top+"px",!1),w(e,"left",t[0].left+"px",!1),w(e,"width",t[0].width+"px",!1),w(e,"height",t[0].height+"px",!1)},m(o,f){d(o,e,f),u(e,n),u(n,i),u(e,r),u(e,l),u(e,c),u(e,s),a||(p=[v(n,"mousedown",t[2]),v(n,"click",rn),v(l,"click",t[3]),v(s,"mousedown",t[1]),v(s,"click",rn)],a=!0)},p(t,n){1&n&&_!==(_=t[0].width>45&&t[0].height>20?"✣ Move":"")&&b(i,_),1&n&&w(e,"top",t[0].top+"px",!1),1&n&&w(e,"left",t[0].left+"px",!1),1&n&&w(e,"width",t[0].width+"px",!1),1&n&&w(e,"height",t[0].height+"px",!1)},d(t){t&&f(e),a=!1,o(p)}}}function on(e){let n,o=!e[0].deleted&&nn(e);return{c(){o&&o.c(),n=_()},m(t,e){o&&o.m(t,e),d(t,n,e)},p(t,[e]){t[0].deleted?o&&(o.d(1),o=null):o?o.p(t,e):(o=nn(t),o.c(),o.m(n.parentNode,n))},i:t,o:t,d(t){o&&o.d(t),t&&f(n)}}}function rn(t){t.stopPropagation()}function ln(t,e,n){let o,i,{self:r={deleted:!1,id:0,left:100,top:100,width:200,height:100}}=e;return t.$$set=t=>{"self"in t&&n(0,r=t.self)},[r,function(t){o={x:t.clientX,y:t.clientY},i={...r},document.onmousemove=t=>{n(0,r.width=i.width+(t.clientX-o.x),r),n(0,r.height=i.height+(t.clientY-o.y),r)},document.onmouseup=t=>{document.onmousemove=null}},function(t){o={x:t.clientX,y:t.clientY},i={...r},document.onmousemove=t=>{n(0,r.left=i.left+(t.clientX-o.x),r),n(0,r.top=i.top+(t.clientY-o.y),r)},document.onmouseup=t=>{document.onmousemove=null}},function(t){(0==r.id||confirm("This will trigger a card to be deleted on save."))&&(n(0,r.deleted=!0,r),rn(t))}]}class cn extends nt{constructor(t){super(),et(this,t,ln,on,r,{self:0})}}function sn(t,e,n){const o=t.slice();return o[19]=e[n],o[20]=e,o[21]=n,o}function an(t){let e,n,o;function i(e){t[12](e,t[19],t[20],t[21])}let r={};return void 0!==t[19]&&(r.self=t[19]),e=new cn({props:r}),j.push((()=>V(e,"self",i))),{c(){Z(e.$$.fragment)},m(t,n){K(e,t,n),o=!0},p(o,i){t=o;const r={};!n&&1&i&&(n=!0,r.self=t[19],P((()=>n=!1))),e.$set(r)},i(t){o||(W(e.$$.fragment,t),o=!0)},o(t){Q(e.$$.fragment,t),o=!1},d(t){tt(e,t)}}}function un(t){let e;return{c(){e=m("Click to Upload an Image")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function dn(t){let e,n,r,l,c,s,a,_,y,b,k,x,C,L,q,S,z,M,N,O,j=t[0].rectangles,E=[];for(let e=0;e<j.length;e+=1)E[e]=an(sn(t,j,e));const R=t=>Q(E[t],1,1,(()=>{E[t]=null}));let T=!t[1]&&un();return{c(){e=h("input"),n=g(),r=h("center"),l=h("button"),l.textContent="+ new rectangle",c=g(),s=h("label"),a=h("input"),_=m(" Hide All"),y=g(),b=h("label"),k=h("input"),x=m(" Hide One"),C=g(),L=h("button");for(let t=0;t<E.length;t+=1)E[t].c();q=g(),S=h("button"),S.textContent="⤡ Resize",z=g(),T&&T.c(),$(e,"type","file"),$(e,"accept","image/*"),w(e,"display","none"),$(l,"type","button"),$(a,"type","radio"),a.__value=!0,a.value=a.__value,$(a,"name","hide"),t[10][0].push(a),w(s,"display","inline",!1),$(k,"type","radio"),k.__value=!1,k.value=k.__value,$(k,"name","hide"),t[10][0].push(k),w(b,"display","inline",!1),$(S,"class","imageSizer svelte-o9mhat"),$(L,"class","occlusionImage svelte-o9mhat"),w(L,"width",t[0].box.width+"px",!1),w(L,"height",t[0].box.height+"px",!1)},m(o,f){d(o,e,f),t[8](e),d(o,n,f),d(o,r,f),u(r,l),u(r,c),u(r,s),u(s,a),a.checked=a.__value===t[0].hide_all,u(s,_),u(r,y),u(r,b),u(b,k),k.checked=k.__value===t[0].hide_all,u(b,x),d(o,C,f),d(o,L,f);for(let t=0;t<E.length;t+=1)E[t].m(L,null);u(L,q),u(L,S),t[13](S),u(L,z),T&&T.m(L,null),t[14](L),M=!0,N||(O=[v(e,"change",t[6]),v(l,"click",t[7]),v(a,"change",t[9]),v(k,"change",t[11]),v(S,"mousedown",t[5]),v(S,"click",fn),v(L,"click",(function(){i(t[3].click())&&t[3].click().apply(this,arguments)}))],N=!0)},p(e,[n]){if(t=e,1&n&&(a.checked=a.__value===t[0].hide_all),1&n&&(k.checked=k.__value===t[0].hide_all),1&n){let e;for(j=t[0].rectangles,e=0;e<j.length;e+=1){const o=sn(t,j,e);E[e]?(E[e].p(o,n),W(E[e],1)):(E[e]=an(o),E[e].c(),W(E[e],1),E[e].m(L,q))}for(X(),e=j.length;e<E.length;e+=1)R(e);Y()}t[1]?T&&(T.d(1),T=null):T||(T=un(),T.c(),T.m(L,null)),1&n&&w(L,"width",t[0].box.width+"px",!1),1&n&&w(L,"height",t[0].box.height+"px",!1)},i(t){if(!M){for(let t=0;t<j.length;t+=1)W(E[t]);M=!0}},o(t){E=E.filter(Boolean);for(let t=0;t<E.length;t+=1)Q(E[t]);M=!1},d(i){i&&f(e),t[8](null),i&&f(n),i&&f(r),t[10][0].splice(t[10][0].indexOf(a),1),t[10][0].splice(t[10][0].indexOf(k),1),i&&f(C),i&&f(L),p(E,i),t[13](null),T&&T.d(),t[14](null),N=!1,o(O)}}}const fn=t=>{t.stopPropagation()};function pn(t,e,n){let o,i,r,l,c,{data:s}=e,{image_id:a}=e,u=null;M((async()=>{0!=a&&(u=await Lt(a),n(2,o.style["background-image"]="url("+u+")",o))}));const d={id:0,top:50,left:50,height:100,width:200,deleted:!1};return t.$$set=t=>{"data"in t&&n(0,s=t.data),"image_id"in t&&n(1,a=t.image_id)},[s,a,o,i,r,function(t){l={x:t.clientX,y:t.clientY},c={width:s.box.width,height:s.box.height},document.onmousemove=t=>{n(0,s.box.width=c.width+(t.clientX-l.x),s),n(0,s.box.height=c.height+(t.clientY-l.y),s)},document.onmouseup=t=>{document.onmousemove=null}},function(){let t=i.files[0];const e=new FileReader;e.readAsDataURL(t),e.onload=async()=>{let t=await kt(e.result);n(1,a=await t),u="url("+e.result+")",n(2,o.style["background-image"]=u,o)}},function(){var t={...d};s.rectangles.push(t),n(0,s)},function(t){j[t?"unshift":"push"]((()=>{i=t,n(3,i)}))},function(){s.hide_all=this.__value,n(0,s)},[[]],function(){s.hide_all=this.__value,n(0,s)},function(t,e,o,i){o[i]=t,n(0,s)},function(t){j[t?"unshift":"push"]((()=>{r=t,n(4,r)}))},function(t){j[t?"unshift":"push"]((()=>{o=t,n(2,o)}))}]}class hn extends nt{constructor(t){super(),et(this,t,pn,dn,r,{data:0,image_id:1})}}function mn(t){let e,n,o,i,r,l;function c(e){t[7](e)}function s(e){t[8](e)}let a={};return void 0!==t[1]&&(a.data=t[1]),void 0!==t[0].front_image_id&&(a.image_id=t[0].front_image_id),e=new hn({props:a}),j.push((()=>V(e,"data",c))),j.push((()=>V(e,"image_id",s))),{c(){Z(e.$$.fragment),i=g(),r=h("hr")},m(t,n){K(e,t,n),d(t,i,n),d(t,r,n),l=!0},p(t,i){const r={};!n&&2&i&&(n=!0,r.data=t[1],P((()=>n=!1))),!o&&1&i&&(o=!0,r.image_id=t[0].front_image_id,P((()=>o=!1))),e.$set(r)},i(t){l||(W(e.$$.fragment,t),l=!0)},o(t){Q(e.$$.fragment,t),l=!1},d(t){tt(e,t),t&&f(i),t&&f(r)}}}function gn(t){let e,n,o,i,r,l;function c(e){t[11](e)}function s(e){t[12](e)}let a={image_picker_disabled:"occlusion"===t[0].card_type,placeholder:t[2].back};return void 0!==t[0].back_text&&(a.text=t[0].back_text),void 0!==t[0].back_image_id&&(a.image_id=t[0].back_image_id),e=new De({props:a}),j.push((()=>V(e,"text",c))),j.push((()=>V(e,"image_id",s))),{c(){Z(e.$$.fragment),i=g(),r=h("hr")},m(t,n){K(e,t,n),d(t,i,n),d(t,r,n),l=!0},p(t,i){const r={};1&i&&(r.image_picker_disabled="occlusion"===t[0].card_type),4&i&&(r.placeholder=t[2].back),!n&&1&i&&(n=!0,r.text=t[0].back_text,P((()=>n=!1))),!o&&1&i&&(o=!0,r.image_id=t[0].back_image_id,P((()=>o=!1))),e.$set(r)},i(t){l||(W(e.$$.fragment,t),l=!0)},o(t){Q(e.$$.fragment,t),l=!1},d(t){tt(e,t),t&&f(i),t&&f(r)}}}function _n(t){let e,n,o,i,r,l,c,s,a,p,m,_,v,$,y,b,k;function w(e){t[6](e)}let x={};void 0!==t[0]&&(x.card=t[0]),n=new en({props:x}),j.push((()=>V(n,"card",w))),n.$on("preview",t[3]),n.$on("cancel",t[4]),n.$on("save",t[5]);let C="occlusion"===t[0].card_type&&mn(t);function L(e){t[9](e)}function q(e){t[10](e)}let S={image_picker_disabled:"occlusion"===t[0].card_type,placeholder:t[2].front};void 0!==t[0].front_text&&(S.text=t[0].front_text),void 0!==t[0].front_image_id&&(S.image_id=t[0].front_image_id),s=new De({props:S}),j.push((()=>V(s,"text",L))),j.push((()=>V(s,"image_id",q)));let z="verses"!=t[0].card_type&&gn(t);function M(e){t[13](e)}let N={};return void 0!==t[0]&&(N.card=t[0]),y=new Qe({props:N}),j.push((()=>V(y,"card",M))),{c(){e=h("body"),Z(n.$$.fragment),i=g(),r=h("hr"),l=g(),C&&C.c(),c=g(),Z(s.$$.fragment),m=g(),_=h("hr"),v=g(),z&&z.c(),$=g(),Z(y.$$.fragment)},m(t,o){d(t,e,o),K(n,e,null),u(e,i),u(e,r),u(e,l),C&&C.m(e,null),u(e,c),K(s,e,null),u(e,m),u(e,_),u(e,v),z&&z.m(e,null),u(e,$),K(y,e,null),k=!0},p(t,[i]){const r={};!o&&1&i&&(o=!0,r.card=t[0],P((()=>o=!1))),n.$set(r),"occlusion"===t[0].card_type?C?(C.p(t,i),1&i&&W(C,1)):(C=mn(t),C.c(),W(C,1),C.m(e,c)):C&&(X(),Q(C,1,1,(()=>{C=null})),Y());const l={};1&i&&(l.image_picker_disabled="occlusion"===t[0].card_type),4&i&&(l.placeholder=t[2].front),!a&&1&i&&(a=!0,l.text=t[0].front_text,P((()=>a=!1))),!p&&1&i&&(p=!0,l.image_id=t[0].front_image_id,P((()=>p=!1))),s.$set(l),"verses"!=t[0].card_type?z?(z.p(t,i),1&i&&W(z,1)):(z=gn(t),z.c(),W(z,1),z.m(e,$)):z&&(X(),Q(z,1,1,(()=>{z=null})),Y());const u={};!b&&1&i&&(b=!0,u.card=t[0],P((()=>b=!1))),y.$set(u)},i(t){k||(W(n.$$.fragment,t),W(C),W(s.$$.fragment,t),W(z),W(y.$$.fragment,t),k=!0)},o(t){Q(n.$$.fragment,t),Q(C),Q(s.$$.fragment,t),Q(z),Q(y.$$.fragment,t),k=!1},d(t){t&&f(e),tt(n),C&&C.d(),tt(s),z&&z.d(),tt(y)}}}function vn(t,e,n){let o,i,r;s(t,ft,(t=>n(15,i=t))),s(t,at,(t=>n(16,r=t)));let l={...r},c={...r};const a=ot();let u={box:{width:500,height:500},hide_all:!0,rectangles:[]};function d(){at.set(null)}return M((async()=>{0!=l.id&&"occlusion"===l.card_type&&n(1,u=await qt(l.back_image_id))})),t.$$.update=()=>{var e;1&t.$$.dirty&&n(2,(e=c.card_type,o="basic"===e?{front:"Question",back:"Answer"}:"verses"===e?{front:"To be or not to be, that is the question:  \nWhether 'tis nobler in the mind to suffer  \nThe slings and arrows of outrageous fortune\nOr to take arms against a sea of troubles  \nAnd by opposing, end them.",back:""}:{front:"- Text entered when the cards are created will be shared between all cards. \n- Afterwards each card's front and back text can be edited individually.",back:""}))},[c,u,o,function(){ut.set(null)},function(){0===l.id&&(l.visibility="purged"),at.set(null)},async function(){var t=ot()-a;for(var e in ft.set(i+t),c)l[e]=c[e];if("occlusion"===l.card_type){t/=u.rectangles.length;for(let e of u.rectangles){if(e.deleted&&0!=e.id){$t({id:e.id,visibility:"purged"});cards.find((t=>t.id===e.id)).visibility="purged"}if(0===e.id&&!e.deleted){let n={...l};n.id=_t(),e.id=n.id,cards.push(n),$t(n,t)}}const e=await kt(JSON.stringify(u),!1);for(let t of u.rectangles){$t({id:t.id,back_image_id:e});cards.find((e=>e.id===t.id)).back_image_id=e}d()}else"basic"!==l.card_type&&"verses"!==l.card_type||(0===l.id&&(l.id=_t()),$t(l,t),d())},function(t){c=t,n(0,c)},function(t){u=t,n(1,u)},function(e){t.$$.not_equal(c.front_image_id,e)&&(c.front_image_id=e,n(0,c))},function(e){t.$$.not_equal(c.front_text,e)&&(c.front_text=e,n(0,c))},function(e){t.$$.not_equal(c.front_image_id,e)&&(c.front_image_id=e,n(0,c))},function(e){t.$$.not_equal(c.back_text,e)&&(c.back_text=e,n(0,c))},function(e){t.$$.not_equal(c.back_image_id,e)&&(c.back_image_id=e,n(0,c))},function(t){c=t,n(0,c)}]}class $n extends nt{constructor(t){super(),et(this,t,vn,_n,r,{})}}function yn(t,e,n){const o=t.slice();return o[5]=e[n],o}function bn(e){let n;return{c(){n=m("Loading...")},m(t,e){d(t,n,e)},p:t,d(t){t&&f(n)}}}function kn(t){let e,n=t[2].rectangles,o=[];for(let e=0;e<n.length;e+=1)o[e]=xn(yn(t,n,e));return{c(){e=h("div");for(let t=0;t<o.length;t+=1)o[t].c();$(e,"id","occludedImage"),$(e,"class","svelte-1i7whgz"),w(e,"width",t[2].box.width+"px",!1),w(e,"height",t[2].box.height+"px",!1)},m(n,i){d(n,e,i);for(let t=0;t<o.length;t+=1)o[t].m(e,null);t[4](e)},p(t,i){if(7&i){let r;for(n=t[2].rectangles,r=0;r<n.length;r+=1){const l=yn(t,n,r);o[r]?o[r].p(l,i):(o[r]=xn(l),o[r].c(),o[r].m(e,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}4&i&&w(e,"width",t[2].box.width+"px",!1),4&i&&w(e,"height",t[2].box.height+"px",!1)},d(n){n&&f(e),p(o,n),t[4](null)}}}function wn(t){let e;return{c(){e=h("div"),w(e,"position","absolute"),w(e,"top",t[5].top+"px"),w(e,"left",t[5].left+"px"),w(e,"width",t[5].width+"px"),w(e,"height",t[5].height+"px"),w(e,"background-color",t[0].id===t[5].id?"transparent":t[2].hide_all?"rgba(70,70,70,1)":"rgba(70,70,70,0.2)"),w(e,"border","5px solid "+(t[0].id!==t[5].id?"black":t[1]?"green":"red"))},m(t,n){d(t,e,n)},p(t,n){4&n&&w(e,"top",t[5].top+"px"),4&n&&w(e,"left",t[5].left+"px"),4&n&&w(e,"width",t[5].width+"px"),4&n&&w(e,"height",t[5].height+"px"),5&n&&w(e,"background-color",t[0].id===t[5].id?"transparent":t[2].hide_all?"rgba(70,70,70,1)":"rgba(70,70,70,0.2)"),7&n&&w(e,"border","5px solid "+(t[0].id!==t[5].id?"black":t[1]?"green":"red"))},d(t){t&&f(e)}}}function xn(t){let e,n=!t[5].deleted&&wn(t);return{c(){n&&n.c(),e=_()},m(t,o){n&&n.m(t,o),d(t,e,o)},p(t,o){t[5].deleted?n&&(n.d(1),n=null):n?n.p(t,o):(n=wn(t),n.c(),n.m(e.parentNode,e))},d(t){n&&n.d(t),t&&f(e)}}}function Cn(e){let n;function o(t,e){return t[2]?kn:bn}let i=o(e),r=i(e);return{c(){r.c(),n=_()},m(t,e){r.m(t,e),d(t,n,e)},p(t,[e]){i===(i=o(t))&&r?r.p(t,e):(r.d(1),r=i(t),r&&(r.c(),r.m(n.parentNode,n)))},i:t,o:t,d(t){r.d(t),t&&f(n)}}}function Ln(t,e,n){let o,i,{card:r}=e,{flipped:l}=e;return M((async()=>{n(2,o=await qt(r.back_image_id));const t=await Lt(r.front_image_id);n(3,i.style["background-image"]="url("+t+")",i)})),t.$$set=t=>{"card"in t&&n(0,r=t.card),"flipped"in t&&n(1,l=t.flipped)},[r,l,o,i,function(t){j[t?"unshift":"push"]((()=>{i=t,n(3,i)}))}]}class qn extends nt{constructor(t){super(),et(this,t,Ln,Cn,r,{card:0,flipped:1})}}function Sn(t,e,n){const o=t.slice();return o[26]=e[n],o}function zn(t,e,n){const o=t.slice();return o[29]=e[n][0],o[30]=e[n][1],o}function Mn(t){let e,n,i,r,l,c,s,a,p,_,y,b,k=t[6]?"<u>b</u>ack":"<u>q</u>uit",w=t[5]&&Nn(t);return{c(){e=h("div"),n=h("button"),n.innerHTML="<u>e</u>dit",i=g(),r=h("button"),l=m("⏎ "),c=new L(!1),s=g(),a=h("button"),a.innerHTML="✕ <u>d</u>elete",p=g(),_=h("div"),w&&w.c(),$(n,"class","manage_button svelte-1196xzv"),c.a=null,$(r,"class","manage_button svelte-1196xzv"),$(a,"class","manage_button svelte-1196xzv"),$(e,"id","manage_buttons_bar"),$(e,"class","svelte-1196xzv"),$(_,"id","grade_buttons_bar"),$(_,"class","svelte-1196xzv")},m(o,f){d(o,e,f),u(e,n),u(e,i),u(e,r),u(r,l),c.m(k,r),u(e,s),u(e,a),d(o,p,f),d(o,_,f),w&&w.m(_,null),y||(b=[v(n,"click",t[11]),v(r,"click",t[10]),v(a,"click",t[9])],y=!0)},p(t,e){t[5]?w?w.p(t,e):(w=Nn(t),w.c(),w.m(_,null)):w&&(w.d(1),w=null)},d(t){t&&f(e),t&&f(p),t&&f(_),w&&w.d(),y=!1,o(b)}}}function Nn(t){let e,n=[["again",1],["hard",2],["good",3],["easy",4]],o=[];for(let e=0;e<4;e+=1)o[e]=On(zn(t,n,e));return{c(){for(let t=0;t<4;t+=1)o[t].c();e=_()},m(t,n){for(let e=0;e<4;e+=1)o[e].m(t,n);d(t,e,n)},p(t,i){if(4256&i[0]){let r;for(n=[["again",1],["hard",2],["good",3],["easy",4]],r=0;r<4;r+=1){const l=zn(t,n,r);o[r]?o[r].p(l,i):(o[r]=On(l),o[r].c(),o[r].m(e.parentNode,e))}for(;r<4;r+=1)o[r].d(1)}},d(t){p(o,t),t&&f(e)}}}function On(t){let e,n,o,i,r,l,c,s,a,p,_,y,k,x,C=Math.floor(t[5][t[29]])-Math.floor(t[7])+"";function L(){return t[16](t[29])}return{c(){e=h("button"),n=m(t[29]),o=m(" ("),i=m(t[30]),r=m(")"),l=h("br"),c=g(),s=h("span"),a=m("+"),p=m(C),_=m(" days"),y=g(),w(s,"font-size","12px"),$(e,"class","grade_button svelte-1196xzv")},m(t,f){var h;d(t,e,f),u(e,n),u(e,o),u(e,i),u(e,r),u(e,l),u(e,c),u(e,s),u(s,a),u(s,p),u(s,_),u(e,y),k||(x=v(e,"click",(h=L,function(t){return t.stopPropagation(),h.call(this,t)})),k=!0)},p(e,n){t=e,32&n[0]&&C!==(C=Math.floor(t[5][t[29]])-Math.floor(t[7])+"")&&b(p,C)},d(t){t&&f(e),k=!1,x()}}}function jn(t){let e,n=t[8].slice(0,t[4]),o=[];for(let e=0;e<n.length;e+=1)o[e]=Rn(Sn(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=_()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);d(t,e,n)},p(t,i){if(272&i[0]){let r;for(n=t[8].slice(0,t[4]),r=0;r<n.length;r+=1){const l=Sn(t,n,r);o[r]?o[r].p(l,i):(o[r]=Rn(l),o[r].c(),o[r].m(e.parentNode,e))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){p(o,t),t&&f(e)}}}function En(t){let e,n,o=t[0].front_text.replace(/\n/g,"<br>")+"";return{c(){e=new L(!1),n=_(),e.a=n},m(t,i){e.m(o,t,i),d(t,n,i)},p(t,n){1&n[0]&&o!==(o=t[0].front_text.replace(/\n/g,"<br>")+"")&&e.p(o)},d(t){t&&f(n),t&&e.d()}}}function Rn(t){let e,n,o=t[26]+"";return{c(){e=m(o),n=h("br")},m(t,o){d(t,e,o),d(t,n,o)},p(t,n){16&n[0]&&o!==(o=t[26]+"")&&b(e,o)},d(t){t&&f(e),t&&f(n)}}}function Tn(t){let e,n,o,i,r,l,c,s="verses"===t[0].card_type?"Next Line":"Flip";return{c(){e=h("button"),n=m(s),o=h("br"),i=g(),r=h("span"),r.textContent="(click anywhere)",w(r,"font-size","14px"),$(e,"id","flipper"),$(e,"type","button"),$(e,"class","svelte-1196xzv")},m(s,a){d(s,e,a),u(e,n),u(e,o),u(e,i),u(e,r),l||(c=v(e,"click",t[13]),l=!0)},p(t,e){1&e[0]&&s!==(s="verses"===t[0].card_type?"Next Line":"Flip")&&b(n,s)},d(t){t&&f(e),l=!1,c()}}}function In(t){let e,n,o,i,r=t[0].back_text.replace("\n","<br>")+"";return{c(){e=h("div"),n=h("br"),o=g(),i=new L(!1),i.a=null,$(e,"id","backside")},m(t,l){d(t,e,l),u(e,n),u(e,o),i.m(r,e)},p(t,e){1&e[0]&&r!==(r=t[0].back_text.replace("\n","<br>")+"")&&i.p(r)},d(t){t&&f(e)}}}function An(e){let n,o;return{c(){n=h("center"),o=h("img"),$(o,"alt","back"),$(o,"class","svelte-1196xzv")},m(t,i){d(t,n,i),u(n,o),e[17](o)},p:t,d(t){t&&f(n),e[17](null)}}}function Un(e){let n,o;return{c(){n=h("center"),o=h("img"),$(o,"alt","front"),$(o,"class","svelte-1196xzv")},m(t,i){d(t,n,i),u(n,o),e[18](o)},p:t,d(t){t&&f(n),e[18](null)}}}function Pn(t){let e,n,o,i;function r(e){t[19](e)}function l(e){t[20](e)}let c={};return void 0!==t[0]&&(c.card=t[0]),void 0!==t[3]&&(c.flipped=t[3]),e=new qn({props:c}),j.push((()=>V(e,"card",r))),j.push((()=>V(e,"flipped",l))),{c(){Z(e.$$.fragment)},m(t,n){K(e,t,n),i=!0},p(t,i){const r={};!n&&1&i[0]&&(n=!0,r.card=t[0],P((()=>n=!1))),!o&&8&i[0]&&(o=!0,r.flipped=t[3],P((()=>o=!1))),e.$set(r)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){Q(e.$$.fragment,t),i=!1},d(t){tt(e,t)}}}function Hn(t){let e,n,i,r,l,c,s,a,p,_,y,k,w,x,C,L,q,S,z=t[0].tags+"",M=t[3]&&!t[6]&&Mn(t);function N(t,e){return"basic"===t[0].card_type||t[6]?En:"verses"===t[0].card_type?jn:void 0}let O=N(t),j=O&&O(t),E=!t[3]&&Tn(t),R="verses"!=t[0].card_type&&t[3]&&In(t),T=0!=t[0].back_image_id&&t[3]&&"occlusion"===!t[0].card_type&&An(t),I=0!=t[0].front_image_id&&(0===t[0].back_image_id||t[6]||!t[3])&&"occlusion"===!t[0].card_type&&Un(t),A="occlusion"===t[0].card_type&&t[0].front_image_id&&Pn(t);return{c(){e=h("body"),n=h("div"),M&&M.c(),i=g(),j&&j.c(),r=g(),l=h("br"),c=h("br"),s=g(),E&&E.c(),a=g(),R&&R.c(),p=g(),_=m(z),y=g(),k=h("hr"),w=g(),T&&T.c(),x=g(),I&&I.c(),C=g(),A&&A.c(),$(n,"id","buttons_bar"),$(n,"class","svelte-1196xzv"),$(e,"class","svelte-1196xzv")},m(o,f){d(o,e,f),u(e,n),M&&M.m(n,null),u(e,i),j&&j.m(e,null),u(e,r),u(e,l),u(e,c),u(e,s),E&&E.m(e,null),u(e,a),R&&R.m(e,null),u(e,p),u(e,_),u(e,y),u(e,k),u(e,w),T&&T.m(e,null),u(e,x),I&&I.m(e,null),u(e,C),A&&A.m(e,null),L=!0,q||(S=[v(window,"keydown",t[15]),v(e,"click",t[14])],q=!0)},p(t,o){t[3]&&!t[6]?M?M.p(t,o):(M=Mn(t),M.c(),M.m(n,null)):M&&(M.d(1),M=null),O===(O=N(t))&&j?j.p(t,o):(j&&j.d(1),j=O&&O(t),j&&(j.c(),j.m(e,r))),t[3]?E&&(E.d(1),E=null):E?E.p(t,o):(E=Tn(t),E.c(),E.m(e,a)),"verses"!=t[0].card_type&&t[3]?R?R.p(t,o):(R=In(t),R.c(),R.m(e,p)):R&&(R.d(1),R=null),(!L||1&o[0])&&z!==(z=t[0].tags+"")&&b(_,z),0!=t[0].back_image_id&&t[3]&&"occlusion"===!t[0].card_type?T?T.p(t,o):(T=An(t),T.c(),T.m(e,x)):T&&(T.d(1),T=null),0==t[0].front_image_id||0!==t[0].back_image_id&&!t[6]&&t[3]||"occlusion"!==!t[0].card_type?I&&(I.d(1),I=null):I?I.p(t,o):(I=Un(t),I.c(),I.m(e,C)),"occlusion"===t[0].card_type&&t[0].front_image_id?A?(A.p(t,o),1&o[0]&&W(A,1)):(A=Pn(t),A.c(),W(A,1),A.m(e,null)):A&&(X(),Q(A,1,1,(()=>{A=null})),Y())},i(t){L||(W(A),L=!0)},o(t){Q(A),L=!1},d(t){t&&f(e),M&&M.d(),j&&j.d(),E&&E.d(),R&&R.d(),T&&T.d(),I&&I.d(),A&&A.d(),q=!1,o(S)}}}function Bn(t,e,n){let o,i,r,l;s(t,Mt,(t=>n(22,o=t))),s(t,ft,(t=>n(23,i=t))),s(t,ut,(t=>n(24,r=t))),s(t,dt,(t=>n(25,l=t)));let c,a,u,d=r||l,f=null!=r,p=rt(),h=f,m=1,g=d.front_text.split("\n"),_={again:0,hard:10,good:15,easy:25};function v(){n(0,d.visibility="deleted",d),$t(d),$()}function $(){r?ut.set(null):dt.set(null)}function y(){at.set(d)}async function b(t){n(0,d.due_date=p+1,d),c=ot();var e=c-i;await async function(t,e,n){const o={review:{card_id:t,grade:e},metadata:{seconds:n,date:rt()}};let i=vt();i.body=JSON.stringify(o);var r=new URL(gt+"review");fetch(r,i).then(bt).catch(yt)}(d.id,t,e),n(0,d.due_date=_[t],d),await $t(d),dt.set(o[1])}function k(){"basic"===d.card_type||"occlusion"===d.card_type?n(3,h=!0):"verses"===d.card_type&&(n(4,m++,m),n(3,h=m===g.length))}function w(){h||k()}M((async()=>{if(n(5,_=await async function(t,e){const n=new URL(gt+"hypothetical_due_dates");n.search=new URLSearchParams({card_id:t,date:e});var o=vt();o.method="GET";const i=await fetch(n,o);return await i.json()}(d.id,p)),ft.set(ot()),0!=d.front_image_id){const t=await Lt(d.front_image_id);n(2,u.src=t,u)}0!=d.back_image_id&&"occlusion"!=d.card_type&&n(1,a.src=await Lt(d.back_image_id),a)}));return[d,a,u,h,m,_,f,p,g,v,$,y,b,k,w,function(t){const e=t.key;"e"===e?y():"b"===e||"q"==e?$():"d"===e?v():" "===e?w():"1"===e?b("again"):"2"===e?b("hard"):"3"===e?b("good"):"4"===e&&b("easy")},t=>b(t),function(t){j[t?"unshift":"push"]((()=>{a=t,n(1,a)}))},function(t){j[t?"unshift":"push"]((()=>{u=t,n(2,u)}))},function(t){d=t,n(0,d)},function(t){h=t,n(3,h)}]}class Jn extends nt{constructor(t){super(),et(this,t,Bn,Hn,r,{},null,[-1,-1])}}function Dn(t){let e;return{c(){e=h("center"),e.textContent="Incorrect Password",w(e,"color","darkred")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function Fn(e){let n,i,r,l,c,s,a,p,_,y,x,C,L,q,S,z,M,N,O,j,E,R,T,I,A,U="login"===e[2]&&e[3]&&Dn();return{c(){n=h("body"),i=m(e[7]),r=g(),l=h("input"),c=g(),s=h("input"),a=g(),U&&U.c(),p=g(),_=h("div"),y=h("label"),x=h("input"),C=m(" LOGIN"),L=g(),q=h("label"),S=h("input"),z=m(" REGISTER"),M=g(),N=h("input"),j=g(),E=h("br"),R=h("center"),T=h("button"),T.textContent="continue as guest",$(l,"class","entry svelte-1dlq1ng"),$(l,"type","text"),$(l,"placeholder","Username"),$(s,"class","entry svelte-1dlq1ng"),$(s,"type","password"),$(s,"placeholder","Password"),$(x,"type","radio"),$(x,"name","rol"),x.__value="login",x.value=x.__value,e[20][0].push(x),$(y,"class","svelte-1dlq1ng"),$(S,"type","radio"),$(S,"name","rol"),S.__value="register",S.value=S.__value,e[20][0].push(S),$(q,"class","svelte-1dlq1ng"),$(N,"type","submit"),N.value=e[2],N.disabled=O=!e[8],w(N,"border",e[8]?"1px solid black":"",!1),$(_,"id","bottom_row"),$(_,"class","svelte-1dlq1ng"),$(T,"type","button"),$(n,"class","svelte-1dlq1ng")},m(t,o){d(t,n,o),u(n,i),u(n,r),u(n,l),e[15](l),k(l,e[0]),u(n,c),u(n,s),e[17](s),k(s,e[1]),u(n,a),U&&U.m(n,null),u(n,p),u(n,_),u(_,y),u(y,x),x.checked=x.__value===e[2],u(y,C),u(_,L),u(_,q),u(q,S),S.checked=S.__value===e[2],u(q,z),u(_,M),u(_,N),e[22](N),u(n,j),u(n,E),u(n,R),u(R,T),I||(A=[v(l,"input",e[16]),v(s,"input",e[18]),v(s,"keydown",e[10]),v(x,"change",e[19]),v(S,"change",e[21]),v(N,"click",e[9]),v(T,"click",e[23])],I=!0)},p(t,[e]){128&e&&b(i,t[7]),1&e&&l.value!==t[0]&&k(l,t[0]),2&e&&s.value!==t[1]&&k(s,t[1]),"login"===t[2]&&t[3]?U||(U=Dn(),U.c(),U.m(n,p)):U&&(U.d(1),U=null),4&e&&(x.checked=x.__value===t[2]),4&e&&(S.checked=S.__value===t[2]),4&e&&(N.value=t[2]),256&e&&O!==(O=!t[8])&&(N.disabled=O),256&e&&w(N,"border",t[8]?"1px solid black":"",!1)},i:t,o:t,d(t){t&&f(n),e[15](null),e[17](null),U&&U.d(),e[20][0].splice(e[20][0].indexOf(x),1),e[20][0].splice(e[20][0].indexOf(S),1),e[22](null),I=!1,o(A)}}}function Gn(t,e,n){let o,i,r,l,c,s,a,u,d=[],f="",p="",h="login",m=!1;async function g(){const t=await async function(t,e){var n=new URL(gt+"auth/token"),o=new FormData;o.append("username",t),o.append("password",e);const i={method:"POST",mode:"cors",body:o};var r=null;const l=await fetch(n,i).then((t=>(r=t.ok,t))).then(bt).catch(yt);if(r){var c=await l.json();return window.localStorage.setItem("access_token",c.access_token),window.localStorage.setItem("username",t),!0}return!1}(f,p);t?pt.set(f):(n(3,m=!0),n(1,p=""),s.focus())}async function _(){const t=await async function(t,e){var n=new URL(gt+"auth/register"),o=vt();o.body=JSON.stringify({username:t,password:e});var i=null;const r=await fetch(n,o).then((t=>(i=t.ok,t))).then(bt).catch(yt);if(i){var l=await r.json();return window.localStorage.setItem("access_token",l.access_token),window.localStorage.setItem("username",t),!0}return!1}(f,p);t?pt.set(f):alert("registration failed")}M((async()=>{n(11,d=await async function(){var t=new URL(gt+"auth/users_list"),e=vt();return e.method="GET",(await fetch(t,e)).json()}()),a.focus()}));return t.$$.update=()=>{2049&t.$$.dirty&&n(12,o=d.includes(f)),4098&t.$$.dirty&&n(14,i=o&&p.length>2),4099&t.$$.dirty&&n(13,r=!o&&f.length>2&&p.length>2),24580&t.$$.dirty&&n(8,l="login"===h&&i||"register"===h&&r),4101&t.$$.dirty&&n(7,c="user does not exist!".repeat("login"===h&&!o&&f.length>2)+"username is already taken!".repeat("register"===h&&o&&f.length>2))},[f,p,h,m,s,a,u,c,l,function(){"login"===h?g():_()},function(t){"Enter"===t.key&&(t.preventDefault(),u.click())},d,o,r,i,function(t){j[t?"unshift":"push"]((()=>{a=t,n(5,a)}))},function(){f=this.value,n(0,f)},function(t){j[t?"unshift":"push"]((()=>{s=t,n(4,s)}))},function(){p=this.value,n(1,p)},function(){h=this.__value,n(2,h)},[[]],function(){h=this.__value,n(2,h)},function(t){j[t?"unshift":"push"]((()=>{u=t,n(6,u)}))},()=>{pt.set("guest")}]}class Xn extends nt{constructor(t){super(),et(this,t,Gn,Fn,r,{})}}function Yn(t){let e,n,o;var i=t[2];return i&&(e=new i({})),{c(){e&&Z(e.$$.fragment),n=_()},m(t,i){e&&K(e,t,i),d(t,n,i),o=!0},p(t,o){if(i!==(i=t[2])){if(e){X();const t=e;Q(t.$$.fragment,1,0,(()=>{tt(t,1)})),Y()}i?(e=new i({}),Z(e.$$.fragment),W(e.$$.fragment,1),K(e,n.parentNode,n)):e=null}},i(t){o||(e&&W(e.$$.fragment,t),o=!0)},o(t){e&&Q(e.$$.fragment,t),o=!1},d(t){t&&f(n),e&&tt(e,t)}}}function Wn(e){let n,o,i=[e[0],e[1]],l=Yn(e);return{c(){n=h("body"),l.c(),$(n,"class","svelte-suk1zo")},m(t,e){d(t,n,e),l.m(n,null),o=!0},p(e,[o]){3&o&&r(i,i=[e[0],e[1]])?(X(),Q(l,1,1,t),Y(),l=Yn(e),l.c(),W(l,1),l.m(n,null)):l.p(e,o)},i(t){o||(W(l),o=!0)},o(t){Q(l),o=!1},d(t){t&&f(n),l.d(t)}}}function Qn(t,e,n){let o,i,r,l,c;return s(t,dt,(t=>n(0,i=t))),s(t,at,(t=>n(3,r=t))),s(t,ut,(t=>n(4,l=t))),s(t,pt,(t=>n(1,c=t))),c||pt.set("guest"),t.$$.update=()=>{27&t.$$.dirty&&n(2,o=c?l?Jn:r?$n:i?Jn:Oe:Xn)},[i,c,o,r,l]}return new class extends nt{constructor(t){super(),et(this,t,Qn,Wn,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
